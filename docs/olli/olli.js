!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var n=t();for(var r in n)("object"==typeof exports?exports:e)[r]=n[r]}}(this,(()=>(()=>{"use strict";var e={370:(e,t,n)=>{n.d(t,{Z:()=>c});var r=n(601),a=n.n(r),i=n(609),o=n.n(i)()(a());o.push([e.id,'.olli-vis ul[role="tree"] {\n  margin: 0;\n  padding: 0;\n  list-style: none;\n}\n\n.olli-vis ul[role="tree"] li {\n  margin: 0;\n  padding: 0;\n  list-style: none;\n}\n\n.olli-vis [role="treeitem"]:not(.expanded) + [role="group"] {\n  display: none;\n}\n\n.olli-vis [role="treeitem"].expanded + [role="group"] {\n  display: block;\n}\n\n.olli-vis [role="treeitem"]:not(.expanded) > ul {\n  display: none;\n}\n\n.olli-vis [role="treeitem"].expanded > ul {\n  display: block;\n}\n\n/* .olli-vis [role="treeitem"],\n.olli-vis [role="treeitem"] span {\n  width: 9em;\n  margin: 0;\n  padding: 0.125em;\n  display: block;\n} */\n\n/* disable default keyboard focus styling for treeitems\n   Keyboard focus is styled with the following CSS */\n.olli-vis :focus {\n  outline: 0;\n}\n\n.olli-vis .focus,\n.olli-vis  span.focus,\n/* .olli-vis  [aria-selected="true"] { */\n.olli-vis  .selected {\n  border-color: black;\n  background-color: #eee;\n}\n\n.olli-vis .hover,\n.olli-vis  span:hover {\n  background-color: #ddd;\n}\n',""]);const c=o},609:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",r=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),r&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),r&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,r,a,i){"string"==typeof e&&(e=[[null,e,void 0]]);var o={};if(r)for(var c=0;c<this.length;c++){var s=this[c][0];null!=s&&(o[s]=!0)}for(var l=0;l<e.length;l++){var d=[].concat(e[l]);r&&o[d[0]]||(void 0!==i&&(void 0===d[5]||(d[1]="@layer".concat(d[5].length>0?" ".concat(d[5]):""," {").concat(d[1],"}")),d[5]=i),n&&(d[2]?(d[1]="@media ".concat(d[2]," {").concat(d[1],"}"),d[2]=n):d[2]=n),a&&(d[4]?(d[1]="@supports (".concat(d[4],") {").concat(d[1],"}"),d[4]=a):d[4]="".concat(a)),t.push(d))}},t}},601:e=>{e.exports=function(e){return e[1]}},62:e=>{var t=[];function n(e){for(var n=-1,r=0;r<t.length;r++)if(t[r].identifier===e){n=r;break}return n}function r(e,r){for(var i={},o=[],c=0;c<e.length;c++){var s=e[c],l=r.base?s[0]+r.base:s[0],d=i[l]||0,u="".concat(l," ").concat(d);i[l]=d+1;var f=n(u),p={css:s[1],media:s[2],sourceMap:s[3],supports:s[4],layer:s[5]};if(-1!==f)t[f].references++,t[f].updater(p);else{var h=a(p,r);r.byIndex=c,t.splice(c,0,{identifier:u,updater:h,references:1})}o.push(u)}return o}function a(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,a){var i=r(e=e||[],a=a||{});return function(e){e=e||[];for(var o=0;o<i.length;o++){var c=n(i[o]);t[c].references--}for(var s=r(e,a),l=0;l<i.length;l++){var d=n(i[l]);0===t[d].references&&(t[d].updater(),t.splice(d,1))}i=s}}},793:e=>{var t={};e.exports=function(e,n){var r=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},173:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},892:(e,t,n)=>{e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},36:e=>{e.exports=function(e){var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var a=void 0!==n.layer;a&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,a&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var i=n.sourceMap;i&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),t.styleTagTransform(r,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},464:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var i=t[r]={id:r,exports:{}};return e[r](i,i.exports,n),i.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nc=void 0;var r={};return(()=>{n.r(r),n.d(r,{chart:()=>le,facetedChart:()=>de,olli:()=>ue});var e,t=function(){return t=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},t.apply(this,arguments)},a=function(e){return e instanceof Date?e.toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric"}):"string"==typeof e||isNaN(e)||e%1==0?String(e):Number(e).toFixed(2)},i=function(){return window._olli||(window._olli={}),window._olli},o=function(e){window._olli=t(t({},window._olli),e)},c=function(e){switch(null==e?void 0:e.nodeName){case"INPUT":case"TEXTAREA":case"SELECT":case"OPTION":return!0}return"string"==typeof(null==e?void 0:e.getAttribute("contenteditable"))},s=function(e){o({treesOnPage:(i().treesOnPage||[]).concat([e])}),i().keyListenerAttached||(document.addEventListener("keydown",(function(e){var t;if(!c(document.activeElement)){var n=i(),r=n.lastVisitedTree,a=n.treesOnPage;if("KeyT"===e.code){var o=r||a[0];if(null===(t=o.domNode.firstElementChild)||void 0===t?void 0:t.classList.contains("selected")){var s=a.indexOf(o);if(e.shiftKey){if(s>0){var l=a[s-1];l.setFocusToItem(l.rootTreeItem)}}else if(s<a.length-1){var d=a[s+1];d.setFocusToItem(d.rootTreeItem)}}else o.setFocusToItem(o.rootTreeItem)}}})),o({keyListenerAttached:!0}))},l=function(){function e(e,t,n){e.tabIndex=-1,this.tree=t,this.domNode=e,this.isExpandable=!1,this.isVisible=!1,this.inGroup=!1,n&&(this.inGroup=!0),this.parent=n,this.children=[];for(var r=e.firstElementChild;r;){if(["ul","table","thead","tbody","tr","td","th"].includes(r.tagName.toLowerCase())){this.isExpandable=!0;break}r=r.nextElementSibling}}return e.prototype.init=function(){this.domNode.tabIndex=-1,this.domNode.addEventListener("keydown",this.handleKeydown.bind(this)),this.domNode.addEventListener("click",this.handleClick.bind(this)),this.domNode.addEventListener("focus",this.handleFocus.bind(this)),this.domNode.addEventListener("blur",this.handleBlur.bind(this)),this.isExpandable||(this.domNode.addEventListener("mouseover",this.handleMouseOver.bind(this)),this.domNode.addEventListener("mouseout",this.handleMouseOut.bind(this)))},e.prototype.isExpanded=function(){return!!this.isExpandable&&this.domNode.classList.contains("expanded")},e.prototype.handleKeydown=function(e){e.altKey||e.ctrlKey||e.metaKey||this.checkBaseKeys(e)},e.prototype.checkBaseKeys=function(e){var t,n=!1,r=this.tree.currentlyTypingToken();switch(e.key){case"Enter":case" ":case"ArrowDown":this.children.length>0&&this.isExpandable&&(this.tree.expandTreeItem(this),this.tree.setFocusToNextLayer(this)),n=!0;break;case"Escape":case"ArrowUp":this.isExpandable&&this.isExpanded()?(this.tree.collapseTreeItem(this),this.tree.setFocusToParentItem(this),n=!0):this.inGroup&&((null===(t=null==this?void 0:this.parent)||void 0===t?void 0:t.isExpandable)&&this.parent.isExpanded()&&this.tree.collapseTreeItem(this.parent),this.tree.setFocusToParentItem(this),n=!0);break;case"ArrowLeft":this.tree.setFocusToPreviousItem(this),n=!0;break;case"ArrowRight":this.tree.setFocusToNextItem(this),n=!0;break;case"Home":this.parent&&(this.tree.setFocusToFirstInLayer(this),n=!0);break;case"End":this.parent&&(this.tree.setFocusToLastInLayer(this),n=!0);break;case"x":r||this.tree.focusOnNodeType("xAxis",this);break;case"y":r||this.tree.focusOnNodeType("yAxis",this);break;case"l":r||this.tree.focusOnNodeType("legend",this);break;case"w":r||this.tree.setFocusGridUp(this);break;case"a":r||this.tree.setFocusGridLeft(this);break;case"s":r||this.tree.setFocusGridDown(this);break;case"d":r||this.tree.setFocusGridRight(this)}n&&(e.stopPropagation(),e.preventDefault())},e.prototype.handleClick=function(e){this.isExpandable?(this.isExpanded()?this.tree.collapseTreeItem(this):this.tree.expandTreeItem(this),e.stopPropagation()):(this.tree.setFocusToItem(this),e.stopPropagation())},e.prototype.handleFocus=function(){var e=this.domNode;this.isExpandable&&(e=e.firstElementChild),e.classList.add("focus")},e.prototype.handleBlur=function(){var e=this.domNode;this.isExpandable&&(e=e.firstElementChild),e.classList.remove("focus")},e.prototype.handleMouseOver=function(e){e.currentTarget.classList.add("hover")},e.prototype.handleMouseOut=function(e){e.currentTarget.classList.remove("hover")},e}(),d=function(){function e(e,t){this.currentlyTypingToken=function(){if(document.activeElement&&(document.activeElement.id.endsWith("custom-name")||"command-dropdown"===document.activeElement.id))return!0},this.domNode=e,this.treeItems=[],this.onFocus=t}return e.prototype.init=function(){!function e(t,n,r){for(var a=t.firstElementChild,i=r;a;)["li","table","tr","th","td"].includes(a.tagName.toLowerCase())&&((i=new l(a,n,r)).init(),r&&r.children.push(i),n.treeItems.push(i)),a.firstElementChild&&e(a,n,i),a=a.nextElementSibling}(this.domNode,this,void 0),this.updateVisibleTreeItems(),this.rootTreeItem.domNode.tabIndex=0,this.lastFocusedItem=this.rootTreeItem},e.prototype.setFocusToItem=function(e){var t=this;window.requestAnimationFrame((function(){for(var n=0;n<t.treeItems.length;n++){var r=t.treeItems[n];r===e?(r.domNode.tabIndex=0,r.domNode.focus(),r.domNode.classList.add("selected"),t.lastFocusedItem=r,t.onFocus&&t.onFocus(r.domNode),o({lastVisitedTree:t})):(r.domNode.tabIndex=-1,r.domNode.classList.remove("selected"))}}))},e.prototype.setFocusToNextItem=function(e){if(e.parent){var t=e.parent.children.indexOf(e);t<e.parent.children.length-1&&this.setFocusToItem(e.parent.children[t+1])}},e.prototype.setFocusToPreviousItem=function(e){if(e.parent){var t=e.parent.children.indexOf(e);t>0&&this.setFocusToItem(e.parent.children[t-1])}},e.prototype.setFocusToNextLayer=function(e){e.lastVisitedChild?this.setFocusToItem(e.lastVisitedChild):this.setFocusToItem(e.children[0])},e.prototype.setFocusToParentItem=function(e){e.parent&&(e.parent.lastVisitedChild=e,this.setFocusToItem(e.parent))},e.prototype.setFocusToFirstInLayer=function(e){e.parent&&this.setFocusToItem(e.parent.children[0])},e.prototype.setFocusToLastInLayer=function(e){e.parent&&this.setFocusToItem(e.parent.children[e.parent.children.length-1])},e.prototype.setFocusGridLeft=function(e){var t=e.domNode.getAttribute("data-i"),n=e.domNode.getAttribute("data-j");if(t&&n){var r=this.treeItems.find((function(e){return e.domNode.getAttribute("data-i")===String(Number(t)-1)&&e.domNode.getAttribute("data-j")===String(n)}));r&&this.setFocusToItem(r)}},e.prototype.setFocusGridRight=function(e){var t=e.domNode.getAttribute("data-i"),n=e.domNode.getAttribute("data-j");if(t&&n){var r=this.treeItems.find((function(e){return e.domNode.getAttribute("data-i")===String(Number(t)+1)&&e.domNode.getAttribute("data-j")===String(n)}));r&&this.setFocusToItem(r)}},e.prototype.setFocusGridUp=function(e){var t=e.domNode.getAttribute("data-i"),n=e.domNode.getAttribute("data-j");if(t&&n){var r=this.treeItems.find((function(e){return e.domNode.getAttribute("data-i")===String(t)&&e.domNode.getAttribute("data-j")===String(Number(n)+1)}));r&&this.setFocusToItem(r)}},e.prototype.setFocusGridDown=function(e){var t=e.domNode.getAttribute("data-i"),n=e.domNode.getAttribute("data-j");if(t&&n){var r=this.treeItems.find((function(e){return e.domNode.getAttribute("data-i")===String(t)&&e.domNode.getAttribute("data-j")===String(Number(n)-1)}));r&&this.setFocusToItem(r)}},e.prototype.expandTreeItem=function(e){e.isExpandable&&(e.parent&&e.parent.children.forEach((function(t){t!==e&&t.domNode.classList.remove("expanded")})),e.domNode.classList.add("expanded"),this.updateVisibleTreeItems())},e.prototype.collapseTreeItem=function(e){var t;e.isExpanded()?t=e:e.parent&&(t=e.parent),t&&(t.domNode.classList.remove("expanded"),this.updateVisibleTreeItems())},e.prototype.updateVisibleTreeItems=function(){this.rootTreeItem=this.treeItems[0];for(var e=0;e<this.treeItems.length;e++){var t=this.treeItems[e],n=t.domNode.parentNode;for(t.isVisible=!0;n&&n!==this.domNode;)n.classList.contains("expanded")||(t.isVisible=!1),n=n.parentNode}},e.prototype.focusOnNodeType=function(e,t){for(var n=this,r=function(e){e&&e.isExpandable&&!e.isExpanded()&&(n.expandTreeItem(e),r(e.parent))},a=function(e){e.children.forEach((function(e){e.isExpandable&&e.isExpanded()&&(a(e),n.collapseTreeItem(e))}))},i=t.domNode.getAttribute("data-nodetype"),o=t;"chart"!==i;){if(!i)return;if(!o.parent)return;i=(o=o.parent).domNode.getAttribute("data-nodetype")}var c=o.children.find((function(t){var n=t.domNode.getAttribute("data-nodetype");return e===n}));c&&(r(c),a(c),this.setFocusToItem(c))},e}(),u=["name","index","type","children","data","size","facet","depth","aggregate","quantile"],f=["root","facet","axis","section","datapoint"];!function(e){e[e.Short=0]="Short",e[e.Long=1]="Long"}(e||(e={}));var p={multiView:"root",chart:"facet",xAxis:"axis",yAxis:"axis",legend:"axis",grid:"axis",filteredData:"section",data:"datapoint"},h={root:["name"],facet:["index","type","name","children","depth"],axis:["name","type","data","size","facet","aggregate","depth"],section:["data","index","size","facet","aggregate","quantile","depth"],datapoint:["data","facet","quantile"]},m=e.Short,v=e.Long,y={index:'Index in set (e.g. "1 of 5 ")',type:'Type of element (e.g. "temporal scale", "line chart")',size:'Size of children (e.g. "10 values")',data:'Data value or range (e.g. "0 to 800 ", "price: 50 ")',aggregate:'Aggregate statistics including minimum, maximum, and average (e.g. "average: 50 ")',facet:'Facet name (e.g. "profit" and "expenditures")',name:'Name (e.g. "x-axis titled price")',children:'Childrenâ€™s names (e.g. at the root, "axes titled date and price") ',quantile:'Quantile of current data (e.g. "quartile: 1 ")',depth:'Depth of element in tree (e.g. "depth: 3 ")'},g={facet:{high:[["index",v],["type",v],["name",v],["children",v],["depth",v]],medium:[["type",v],["name",v],["children",v]],low:[["type",m],["name",m],["children",m]]},axis:{high:[["name",v],["type",v],["data",v],["size",v],["facet",v],["aggregate",v],["depth",v]],medium:[["name",v],["type",v],["data",v]],low:[["name",m],["type",m],["data",m]]},section:{high:[["data",v],["index",v],["size",v],["facet",v],["aggregate",v],["quantile",v],["depth",v]],medium:[["data",v],["size",v],["aggregate",m],["quantile",m]],low:[["data",m],["size",m]]},datapoint:{high:[["data",v],["facet",v],["quantile",v]],medium:[["data",v]],low:[["data",m]]}},b=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,a,i=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)o.push(r.value)}catch(e){a={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(a)throw a.error}}return o},x=function(e,t,n){if(n||2===arguments.length)for(var r,a=0,i=t.length;a<i;a++)!r&&a in t||(r||(r=Array.prototype.slice.call(t,0,a)),r[a]=t[a]);return e.concat(r||Array.prototype.slice.call(t))},E=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},w=[];function T(e){console.log("speaking:",e);var t=document.createElement("div");t.setAttribute("aria-live","assertive"),document.body.appendChild(t),window.setTimeout((function(){t.innerText=e}),100),window.setTimeout((function(){t.remove()}),1e3)}var A=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},N=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,a,i=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)o.push(r.value)}catch(e){a={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(a)throw a.error}}return o};function I(e,t){var n,r,a=JSON.parse(localStorage.getItem("settingsData"))[e],i=document.createElement("select");i.id="".concat(e,"-verbosity");var o=document.createElement("label");o.setAttribute("for","".concat(e,"-verbosity"));var c="Description: "+L(a[Object.keys(a)[0]]);o.innerText=O("".concat(e," verbosity. ").concat(c));try{for(var s=A(Object.keys(a)),l=s.next();!l.done;l=s.next()){var d=l.value,u=document.createElement("option");u.innerText=d,u.value=d,i.appendChild(u)}}catch(e){n={error:e}}finally{try{l&&!l.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}var f=document.createElement("option");f.innerText="custom",f.value="custom",i.appendChild(f),i.addEventListener("change",(function(e){S(i,t)}));var p=document.createElement("div");return p.id="".concat(e,"-verbosity-container"),p.appendChild(o),p.appendChild(i),p}function S(e,t){var n=JSON.parse(localStorage.getItem("settingsData")),r=e.id.split("-")[0],a=document.getElementById("".concat(r,"-custom")),i=e.previousElementSibling;if("custom"===e.value){window.requestAnimationFrame((function(){a.setAttribute("style","display: block"),a.setAttribute("aria-hidden","false")}));var o="Create a custom preset using the preset menu. Set verbosity for each element; use alt+left and alt+right to reorder elements.";i.innerText=o,T("".concat(e.id.split("-")[0]," verbosity set to ").concat(e.value,". ").concat(o))}else window.requestAnimationFrame((function(){a.setAttribute("style","display: none"),a.setAttribute("aria-hidden","true")})),o="Description: "+L(n[r][e.value]),i.innerText=O("".concat(r," verbosity. ").concat(o)),W(t,document.getElementById("tree-root")),T("".concat(e.id.split("-")[0]," verbosity set to ").concat(e.value,". ").concat(o)),w.push({action:"dropdown",target:"settings-".concat(r),value:e.value})}function k(t){var n,r,a=[];try{for(var i=A(document.getElementById("".concat(t,"-custom-options")).children),o=i.next();!o.done;o=i.next()){var c=o.value.firstElementChild;"long"===c.value?a.push([c.id.split("-")[1],e.Long]):"short"===c.value&&a.push([c.id.split("-")[1],e.Short])}}catch(e){n={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return a}var C=[];function F(t,n){var r,a;void 0===n&&(n=void 0);var i,o=p[t.type],c={},s=JSON.parse(localStorage.getItem("settingsData"));if("root"===o)i=h[o],c=Object.fromEntries(i.map((function(t){return[t,e.Long]})));else{var l=document.getElementById("".concat(o,"-verbosity")),d=l?l.value:"high";i=s[o][d].map((function(e){return e[0]})),c=Object.fromEntries(s[o][d])}var u=[],f=[];try{for(var m=A(t.description.entries()),v=m.next();!v.done;v=m.next()){var y=N(v.value,2),g=y[0],b=y[1];if(i.includes(g)||C.includes(g)){var x=0;n?x=Number(Object.values(e).find((function(t){return"number"==typeof t&&e[t]===n}))):c[g]&&(x=c[g]),C.includes(g)?u[C.indexOf(g)]=b[x]:f[i.indexOf(g)]=b[x]}}}catch(e){r={error:e}}finally{try{v&&!v.done&&(a=m.return)&&a.call(m)}finally{if(r)throw r.error}}return u.concat(f).filter((function(e){return e.length>0})).map(O).join(". ")+"."}function O(e){return e.slice(0,1).toUpperCase()+e.slice(1)}function L(t){var n,r,a="";try{for(var i=A(t),o=i.next();!o.done;o=i.next()){var c=N(o.value,2),s=c[0],l=c[1];a+="".concat(s," (").concat(e[l],"), ")}}catch(e){n={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return a.slice(0,-2)}var j=n(62),D=n.n(j),K=n(36),M=n.n(K),V=n(793),q=n.n(V),B=n(892),P=n.n(B),J=n(173),z=n.n(J),G=n(464),U=n.n(G),_=n(370),R={};R.styleTagTransform=U(),R.setAttributes=P(),R.insert=q().bind(null,"head"),R.domAPI=M(),R.insertStyleElement=z(),D()(_.Z,R),_.Z&&_.Z.locals&&_.Z.locals;var Z=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},H=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,a,i=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)o.push(r.value)}catch(e){a={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(a)throw a.error}}return o};function W(e,t){var n,r;if(t.children.length)try{for(var a=Z(t.children),i=a.next();!i.done;i=a.next()){var o=i.value;if("TABLE"===o.nodeName){var c=t.parentElement,s=Q(c,e).children.filter((function(e){return"data"===e.type}));o.replaceWith(X(s,c.id.split("-").length))}else o.firstElementChild.innerText=F(Q(o,e)),o.children[1]&&W(e,o.children[1])}}catch(e){n={error:e}}finally{try{i&&!i.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}}function Q(e,t){var n,r,a=t.root,i=e.id.split("-").slice(2).map((function(e){return Number(e)}));try{for(var o=Z(i),c=o.next();!c.done;c=o.next()){var s=c.value;a=a.children[s]}}catch(e){n={error:e}}finally{try{c&&!c.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return a}function X(e,t){var n,r,i=function(){var e,t,n=JSON.parse(localStorage.getItem("settingsData")),r=document.getElementById("datapoint-verbosity"),a=r?r.value:"high",i=n.datapoint[a].map((function(e){return e[0]})),o=n.datapoint.high.map((function(e){return e[0]})),c={};try{for(var s=A(o),l=s.next();!l.done;l=s.next()){var d=l.value;c[d]=i.indexOf(d)}}catch(t){e={error:t}}finally{try{l&&!l.done&&(t=s.return)&&t.call(s)}finally{if(e)throw e.error}}return c}(),o=[],c=[];e[0].tableKeys.forEach((function(t,n){var r=e[0].tableKeysMap[n];i[r]<0||("quantile"!=r||e[0].description.get("quantile")[0])&&(o.push(t),c.push(r))}));var s=[],l=[];try{for(var d=Z(Object.entries(i).sort((function(e,t){return e[1]-t[1]}))),u=d.next();!u.done;u=d.next()){var f=H(u.value,2),p=f[0],h=(f[1],c.indexOf(p));h<0||(l.push(p),s.push(o[h]),"data"===p&&(l.push(p),s.push(o[h+1])))}}catch(e){n={error:e}}finally{try{u&&!u.done&&(r=d.return)&&r.call(d)}finally{if(n)throw n.error}}var m=document.createElement("table"),v=document.createElement("tbody"),y=document.createElement("thead"),g=document.createElement("tr");return null==s||s.forEach((function(e){var t=document.createElement("th");t.setAttribute("scope","col"),t.innerText=e,g.appendChild(t)})),y.appendChild(g),m.appendChild(y),e.forEach((function(e,t){var n=document.createElement("tr");null==s||s.forEach((function(t,r){var i;i="quantile"===l[r]?e.description.get("quantile")[0]:a(e.selected[0][t]);var o=document.createElement("td");o.innerText=i,n.appendChild(o)})),v.appendChild(n)})),m.appendChild(v),m}var Y=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,a,i=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)o.push(r.value)}catch(e){a={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(a)throw a.error}}return o},$=function(e,t,n){if(n||2===arguments.length)for(var r,a=0,i=t.length;a<i;a++)!r&&a in t||(r||(r=Array.prototype.slice.call(t,0,a)),r[a]=t[a]);return e.concat(r||Array.prototype.slice.call(t))},ee=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};function te(e){var t=ne(e);switch(e.type){case"facetedChart":return{root:ie("multiView",e.selection||e.data,null,e,t),fieldsUsed:t};case"chart":return{root:ie("chart",e.selection||e.data,null,e,t),fieldsUsed:t};default:throw"olliVisSpec.type ".concat(e.type," not handled in olliVisSpecToTree")}}function ne(e){switch(e.type){case"facetedChart":return $([],Y(new Set($([e.facetedField],Y($([],Y(e.charts.values()),!1).flatMap((function(e){return ne(e)}))),!1))),!1);case"chart":return $([],Y(new Set(e.axes.concat(e.legends).reduce((function(e,t){return e.concat(t.field)}),[]))),!1);default:throw"olliVisSpec.type ".concat(e.type," not handled in getFieldsUsedForChart")}}var re=function(e,t,n,r){return e.filter((function(e){var a=e[t];if(a instanceof Date){var i=String(n),o=String(r);4===i.length&&4===o.length&&(a=a.getFullYear())}return a>=n&&a<r}))};function ae(e){var t=function(e){return e.every((function(e){return"string"==typeof e||e instanceof String}))?{values:e.map((function(e){return Number(e.replaceAll(",",""))}))}:e.every((function(e){return e instanceof Date}))?{values:e.map((function(e){return e.getTime()})),isDate:!0}:{values:e}}(e),n=t.values.reduce((function(e,t,n,r){var a,i=n-1;if(0===n&&0===t)return e;if(-1===i&&0!==t)a=[t-(r[n+1]-t),t];else if(n===r.length-1){var o=t+(t-r[n-1]);e.push([r[i],t]),a=[t,o]}else a=[r[i],r[i+1]];return e.push([a[0],a[1]]),e}),[]);return t.isDate?n.map((function(e){return[new Date(e[0]),new Date(e[1])]})):n}function ie(e,t,n,r,i,o,c,s,l,d,u,f){void 0===o&&(o=0);var m={type:e,parent:n,selected:t,filterValue:s,gridIndex:f,description:new Map,children:[]},v=r,y=r;switch(e){case"multiView":m.children=$([],Y(v.charts.entries()),!1).map((function(e,n,r){var a=Y(e,2),c=a[0],s=a[1];return ie("chart",t.filter((function(e){return String(e[v.facetedField])===c})),m,s,i,o+1,c,void 0,void 0,n,r.length)}));break;case"chart":var g=y.axes.filter((function(e){return"bar"!==y.mark||"continuous"!==e.type}));m.children=$($($([],Y(g.map((function(e){return ie("x"===e.axisType?"xAxis":"yAxis",t,m,y,i,o+1,c,void 0,e)}))),!1),Y(y.legends.map((function(e){return ie("legend",t,m,y,i,o+1,c,void 0,e)}))),!1),Y("point"===y.mark&&2===g.length&&g.every((function(e){return"continuous"===e.type}))?[ie("grid",t,m,y,i,o+1,c)]:[]),!1);break;case"xAxis":case"yAxis":var b=l;switch(b.type){case"discrete":m.children=b.values.map((function(e,n){return ie("filteredData",t.filter((function(t){return String(t[b.field])===String(e)})),m,y,i,o+1,c,String(e),b,n,b.values.length)}));break;case"continuous":var x=ae(b.values);m.children=x.map((function(e,n){var r=Y(e,2),a=r[0],s=r[1];return ie("filteredData",re(t,b.field,a,s),m,y,i,o+1,c,[a,s],b,n,x.length)}))}break;case"legend":var E=l;"discrete"===E.type&&(m.children=E.values.map((function(e,n){return ie("filteredData",t.filter((function(t){return String(t[E.field])===String(e)})),m,y,i,o+1,c,String(e),E,n,E.values.length)})));break;case"grid":var w=y.axes.find((function(e){return"x"===e.axisType})),T=y.axes.find((function(e){return"y"===e.axisType})),A=ae(w.values),N=ae(T.values);m.children=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.reduce((function(e,t){return e.flatMap((function(e){return t.map((function(t){return[e,t].flat()}))}))}))}(A,N).map((function(e,n){var r=Y(e,4),a=r[0],s=r[1],l=r[2],d=r[3];return ie("filteredData",re(re(t,w.field,a,s),T.field,l,d),m,y,i,o+1,c,[[a,s],[l,d]],void 0,void 0,void 0,{i:Math.floor(n/N.length),j:n%N.length})}));break;case"filteredData":m.children=t.map((function(e,t,n){return ie("data",[e],m,y,i,o+1,c,void 0,l,t,n.length)}));break;case"data":if(m.tableKeys=i,m.tableKeysMap=m.tableKeys.map((function(e){return"data"})),l&&(m.tableKeys=m.tableKeys.filter((function(e){return e!==l.field})).concat([l.field])),c){var I=i[0];m.tableKeys=m.tableKeys.filter((function(e){return e!==I})).concat([I]),m.tableKeysMap[m.tableKeys.length-1]="facet"}m.tableKeys.push("quartile"),m.tableKeysMap.push("quantile");break;default:throw"Node type ".concat(e," not handled in olliVisSpecToNode")}return m.description=function(e,t,n,r,i,o,c){return function(e,t,n,r,i,o,c){var s,l,d=function(e){return"point"===e.mark?e.axes.every((function(e){return"continuous"===e.type}))?"scatterplot":"dot plot":e.mark?"".concat(e.mark," chart"):""},u=function(e){return e.title||n?'"'.concat(e.title||n,'"'):""},f=function(e){return'titled "'.concat(e.title||e.field,'"')},m=function(e){return"".concat(e.scaleType||e.type," scale")},v=function(e){return e.channel?"for ".concat(e.channel):""},y=function(e,t,n){return void 0===n&&(n="s"),"".concat(e," ").concat(t).concat(1!==e?n:"")};function g(e){var t=e%10,n=e%100;return 1==t&&11!=n?e+"st":2==t&&12!=n?e+"nd":3==t&&13!=n?e+"rd":e+"th"}var b=function(e){return"o"===e.charAt(0)?"an ".concat(e):"a ".concat(e)},x=function(e){return e?"".concat(e):""},E=function(e){return e?Array.isArray(e)?"".concat(e.map((function(e){return a(e)})).join(" to ")):'"'.concat(a(e),'"'):""},w=function(e){return e?"".concat(E(e[0])," and ").concat(E(e[1])):""},T=function(e,t){return void 0!==e&&void 0!==t?"".concat(e+1," of ").concat(t):""},A=function(e,t){var n;return null===(n=t.tableKeys)||void 0===n?void 0:n.map((function(t){var n=a(e[t]);return'"'.concat(t,'": "').concat(n,'"')})).join(", ")},N=function(e,t){return a(e.reduce((function(e,n){return e+Number(n[t])}),0)/e.length)},I=function(e,t){return a(e.reduce((function(e,n){return Math.max(e,Number(n[t]))}),Number(e[0][t])))},S=function(e,t){return a(e.reduce((function(e,n){return Math.min(e,Number(n[t]))}),Number(e[0][t])))},k=t,C=r,F=r;var O={name:function(e){switch(e.type){case"multiView":var n=u(t);return["faceted chart ".concat(n,", ").concat(e.children.length," views"),"a faceted chart ".concat(n.length>0?"titled ".concat(n," "):n,"with ").concat(e.children.length," views")];case"chart":return[n=u(t),n.length>0?"titled ".concat(n):n];case"xAxis":case"yAxis":return Array(2).fill("".concat(C.axisType,"-axis ").concat(f(C)));case"legend":return Array(2).fill("legend ".concat(f(F)));case"grid":return["grid","grid view of ".concat(d(k))];default:throw"Node type ".concat(e.type," does not have the token name.")}},index:function(e){switch(e.type){case"chart":case"filteredData":return Array(2).fill(T(i,o));default:throw"Node type ".concat(e.type," does not have the token index.")}},type:function(e){switch(e.type){case"chart":return Array(2).fill(d(k));case"xAxis":case"yAxis":return[m(C),"for "+b(m(C))];case"legend":return Array(2).fill(v(F));case"grid":return["",""];default:throw"Node type ".concat(e.type," does not have the token type.")}},children:function(e){if("chart"===e.type){var t=k.axes[0].title||k.axes[0].field,n=k.axes.map((function(e){return'"'.concat(e.title||e.field,'"')}));return 1===k.axes.length?["axis ".concat(t),"with axis ".concat(t)]:["axes ".concat(n.join(", ")),"with axes ".concat(n.join(" and "))]}throw"Node type ".concat(e.type," does not have the token children.")},data:function(e){var t;switch(e.type){case"xAxis":case"yAxis":case"legend":var n=a(C.values[0]),r=a(C.values[1]),i=a(C.values[C.values.length-1]);return"discrete"===C.type?2===C.values.length?["".concat(n,", ").concat(r),'"'.concat(n,'" and "').concat(r,'"')]:["from ".concat(n," to ").concat(i),'values starting with "'.concat(n,'" and ending with "').concat(i,'"')]:["from ".concat(n," to ").concat(i),'with values from "'.concat(n,'" to "').concat(i,'"')];case"grid":return["",""];case"filteredData":var o;return"grid"===(null===(t=e.parent)||void 0===t?void 0:t.type)?[o=w(e.filterValue),"Values from ".concat(o)]:[o=E(e.filterValue),"Values from ".concat(o)];case"data":return Array(2).fill(A(e.selected[0],e));default:throw"Node type ".concat(e.type," does not have the token data.")}},size:function(e){switch(e.type){case"xAxis":case"yAxis":case"legend":case"grid":case"filteredData":return Array(2).fill(y(e.children.length,"value"));default:throw"Node type ".concat(e.type," does not have the token size.")}},facet:function(e){switch(e.type){case"xAxis":case"yAxis":case"legend":case"grid":case"filteredData":case"data":var t=x(n);return[t,t.length>0?'"'.concat(t,'"'):t];default:throw"Node type ".concat(e.type," does not have the token parent.")}},depth:function(e){return["depth ".concat(c),"the tree depth is ".concat(c)]},aggregate:function(e){switch(e.type){case"xAxis":case"yAxis":case"filteredData":var t=ce(e);if(!t||!C||!e.selected.length)return["",""];var n=oe(t,C);if(void 0===n)return["",""];var r=String(n),a=N(e.selected,r),i=I(e.selected,r),o=S(e.selected,r);return["average ".concat(a,", maximum ").concat(i,", minimum ").concat(o),'the average for the "'.concat(r,'" field is ').concat(a,", the maximum is ").concat(i,", and the minimum is ").concat(o)];case"legend":case"grid":return["",""];default:throw"Node type ".concat(e.type," does not have the token aggregate.")}},quantile:function(e){switch(e.type){case"filteredData":var t=ce(e);if(!(t&&C&&e.parent&&e.selected.length))return["",""];var n=oe(t,C);if(void 0===n)return["",""];var a=String(n),i=void 0;switch(e.parent.type){case"xAxis":case"yAxis":var o=r;switch(o.type){case"discrete":i=o.values.map((function(t,n){return e.parent.selected.filter((function(e){return String(e[o.field])===String(t)}))}));break;case"continuous":i=ae(o.values).map((function(t,n){var r=Y(t,2),a=r[0],i=r[1];return re(e.parent.selected,o.field,a,i)}))}break;case"legend":var c=r;switch(c.type){case"discrete":i=c.values.map((function(t,n){return e.parent.selected.filter((function(e){return String(e[c.field])===String(t)}))}));break;case"continuous":return["",""]}break;case"grid":return["",""]}if(!i)return["",""];var s=[];i.forEach((function(e){if(0!=e.length){var t=N(e,a);s.push(Number(t))}else s.push(0)})),s.sort((function(e,t){return e-t}));var l=0==e.selected.length?0:N(e.selected,a),d=s.indexOf(Number(l))/s.length,u=Math.max(1,Math.ceil(4*d));return["".concat(g(u)," quartile by average"),"This section's average ".concat(a," is in the ").concat(g(u)," quartile  of all sections")];case"data":if(!C)return["",""];if(void 0===(n=oe(e,C)))return["",""];a=String(n),e.tableKeys[e.tableKeys.indexOf("quartile")]="quartile (".concat(a,")");var f=e.parent.selected.map((function(e){return e[a]}));f.sort((function(e,t){return Number(e)-Number(t)}));var p=f.indexOf(e.selected[0][a])/f.length,h=""+Math.max(1,Math.ceil(4*p));return[h,h];default:throw"Node type ".concat(e.type," does not have the token context.")}}},L=new Map;try{var j=h[p[e.type]];try{for(var D=ee(j),K=D.next();!K.done;K=D.next()){var M=K.value;L.set(M,O[M](e))}}catch(e){s={error:e}}finally{try{K&&!K.done&&(l=D.return)&&l.call(D)}finally{if(s)throw s.error}}}catch(t){throw"Node type ".concat(e.type," not handled in nodeToDesc, threw: ").concat(t)}return L}(e,t,n,r,i,o,c)}(m,r,c,l,d,u,o),m}function oe(e,t){var n,r,a,i=void 0;if("data"!==e.type)return i;try{for(var o=ee(e.tableKeys.entries()),c=o.next();!c.done;c=o.next()){var s=Y(c.value,2),l=s[0],d=s[1];"facet"!==e.tableKeysMap[l]&&"quartile"!==e.tableKeysMap[l]&&d!==t.field&&("number"==typeof(a=""+e.selected[0][d])||!isNaN(a)&&!isNaN(parseFloat(a)))&&(i=d)}}catch(e){n={error:e}}finally{try{c&&!c.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return i}function ce(e){var t,n;if("data"===e.type)return e;if(e.children)try{for(var r=ee(e.children),a=r.next();!a.done;a=r.next()){var i=a.value;if("data"===i.type)return i;var o=ce(i);if(o)return o}}catch(e){t={error:e}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}}var se=function(){return se=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},se.apply(this,arguments)},le=function(e){return se(se({},e),{type:"chart"})},de=function(e){return se(se({},e),{type:"facetedChart"})};function ue(t,n){var r=te(t),i=document.createElement("div");if("table"===(n={renderType:(null==n?void 0:n.renderType)||"tree",onFocus:null==n?void 0:n.onFocus}).renderType)i.appendChild(function(e,t){var n=document.createElement("table"),r=document.createElement("thead"),i=document.createElement("tr");t.forEach((function(e){var t=document.createElement("th");t.setAttribute("scope","col"),t.innerText=e,i.appendChild(t)})),r.appendChild(i),n.appendChild(r);var o=document.createElement("tbody");return e.forEach((function(e){var n=document.createElement("tr");t.forEach((function(t){var r=document.createElement("td");r.innerText=a(e[t]),n.appendChild(r)})),o.appendChild(n)})),n.appendChild(o),n}(r.root.selected,r.fieldsUsed));else{var o=function(e){var t,n=localStorage.getItem("settingsData");n?t=JSON.parse(n):(t=g,localStorage.setItem("settingsData",JSON.stringify(g)));var r=document.createElement("fieldset");r.setAttribute("id","settings");var a=document.createElement("button");return a.addEventListener("click",(function(e){r.dispatchEvent(new KeyboardEvent("keydown",{key:"Escape"}))})),a.innerText="Close",r.appendChild(a),Object.keys(t).forEach((function(t){r.appendChild(I(t,e));var n=function(e,t){var n,r,a,i,o=h[e],c=document.createElement("div");c.id="".concat(e,"-custom");var s=document.createElement("div");s.id="".concat(e,"-custom-options");var l=document.createElement("input");l.type="text",l.id="".concat(e,"-custom-name");var d=document.createElement("label");d.setAttribute("for","".concat(e,"-custom-name")),d.innerText="Custom preset name";try{for(var u=A(o),f=u.next();!f.done;f=u.next()){var p=f.value,m=document.createElement("select");m.id="".concat(e,"-").concat(p);try{for(var v=(a=void 0,A(["off","short","long"])),g=v.next();!g.done;g=v.next()){var b=g.value,x=document.createElement("option");x.innerText=b,x.value=b,m.appendChild(x)}}catch(e){a={error:e}}finally{try{g&&!g.done&&(i=v.return)&&i.call(v)}finally{if(a)throw a.error}}var E=document.createElement("label");E.setAttribute("for","".concat(e,"-").concat(p)),E.innerText=y[p];var T=document.createElement("div");T.appendChild(m),T.appendChild(E),s.append(T)}}catch(e){n={error:e}}finally{try{f&&!f.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}var N=document.createElement("button");return N.innerText="Save",N.addEventListener("click",(function(n){!function(e,t){var n=document.getElementById("".concat(e,"-custom"));n.setAttribute("style","display: none"),n.setAttribute("aria-hidden","true");var r=JSON.parse(localStorage.getItem("settingsData")),a=document.getElementById("".concat(e,"-custom-name")).value,i=k(e);r[e][a]=i,localStorage.setItem("settingsData",JSON.stringify(r)),function(e){JSON.parse(localStorage.getItem("settingsData")),document.getElementById("".concat(e,"-verbosity-container")).replaceWith(I(e,t))}(e);var o=document.getElementById("".concat(e,"-verbosity"));o.value=a,S(o,t),o.focus(),o.setAttribute("aria-active","true");var c=document.getElementById("command-dropdown"),s=document.createElement("option");s.innerText=a,s.value=a,c.appendChild(s),w.push({action:"custom",target:"settings-".concat(e),value:JSON.stringify(i)})}(e,t)})),c.append(s),c.appendChild(d),c.appendChild(l),c.appendChild(N),c}(t,e);n.setAttribute("style","display: none"),n.setAttribute("aria-hidden","true"),r.appendChild(n)})),r}(r);o.setAttribute("style","display: none"),o.setAttribute("aria-hidden","true"),i.appendChild(o);var l=function(){var t,n,r,a,i,o,c,s,l,d,p=document.createElement("select");function h(e,t,n){var r=document.createElement("option");r.innerText=e,r.value=t,n.appendChild(r)}p.setAttribute("id","command-dropdown");try{for(var m=A(u.concat().sort()),v=m.next();!v.done;v=m.next())h(b=v.value,b,p)}catch(e){t={error:e}}finally{try{v&&!v.done&&(n=m.return)&&n.call(m)}finally{if(t)throw t.error}}try{for(var y=A(u.concat().sort()),g=y.next();!g.done;g=y.next()){var b;h("focus "+(b=g.value),"focus-"+b,p)}}catch(e){r={error:e}}finally{try{g&&!g.done&&(a=y.return)&&a.call(y)}finally{if(r)throw r.error}}h("clear","clear",p);try{for(var x=A(Object.values(e)),E=x.next();!E.done;E=x.next()){var w=E.value;"string"==typeof w&&h(w,w,p)}}catch(e){i={error:e}}finally{try{E&&!E.done&&(o=x.return)&&o.call(x)}finally{if(i)throw i.error}}try{for(var T=A(f),N=T.next();!N.done;N=T.next()){var I=N.value;if("root"!==I){var S=JSON.parse(localStorage.getItem("settingsData"));try{for(var k=(l=void 0,A(Object.keys(S[I]))),C=k.next();!C.done;C=k.next()){var F=C.value;h(I+" "+F,I+"-"+F,p)}}catch(e){l={error:e}}finally{try{C&&!C.done&&(d=k.return)&&d.call(k)}finally{if(l)throw l.error}}}}}catch(e){c={error:e}}finally{try{N&&!N.done&&(s=T.return)&&s.call(T)}finally{if(c)throw c.error}}var O=document.createElement("label");O.setAttribute("for","command-dropdown"),O.innerText="Choose command";var L=document.createElement("div");return L.setAttribute("id","command-dropdown-container"),L.appendChild(O),L.appendChild(p),L}();l.setAttribute("style","display: none"),l.setAttribute("aria-hidden","true"),i.appendChild(l);var m=function(e){var t,n=(Math.random()+1).toString(36).substring(7),r=e.root,a=document.createElement("ul"),i="".concat(n,"-").concat(r.type,"-label");return a.setAttribute("role","tree"),a.setAttribute("aria-labelledby",i),a.setAttribute("id","tree-root"),a.appendChild(function e(t,n,r,a,i,o){var c=document.createElement("li"),s=o+"-"+(a-1);c.setAttribute("role","treeitem"),c.setAttribute("data-nodetype",t.type),c.setAttribute("id",s),t.gridIndex&&(c.setAttribute("data-i",String(t.gridIndex.i)),c.setAttribute("data-j",String(t.gridIndex.j))),t.filterValue&&c.setAttribute("data-filterValue",JSON.stringify(t.filterValue));var l=document.createElement("span");if(l.textContent=F(t),c.appendChild(l),t.children.length){var d=t.children.filter((function(e){return"data"===e.type})),u=t.children.filter((function(e){return"data"!==e.type})),f=document.createElement("ul");f.setAttribute("role","group"),d.length?f.appendChild(X(d)):u.forEach((function(t,a,i){f.appendChild(e(t,n,r+1,a+1,i.length,s))})),c.appendChild(f)}return c}(r,n,1,1,0,"root")),null===(t=a.querySelector("span"))||void 0===t||t.setAttribute("id",i),a}(r),v=document.createElement("div");v.classList.add("olli-vis"),v.setAttribute("role","application"),v.appendChild(m),i.appendChild(v);var N=new d(m,n.onFocus);N.init(),document.addEventListener("keypress",(function(e){"t"!==e.key||N.currentlyTypingToken()||N.setFocusToItem(N.rootTreeItem)}));var O=document.createElement("button");O.innerText="Finish section",O.setAttribute("aria-live","polite"),O.addEventListener("click",(function(){fetch("https://docs.google.com/forms/d/e/1FAIpQLSeNGFhokzskkyxfgZz6hVHK1W-TbItjzgMsOw_LbEICNGxRAg/formResponse?usp=pp_url&entry.1882377581="+JSON.stringify(w),{mode:"no-cors",method:"GET"}).then((function(e){return O.innerText="All done, thank you"}))}));var j=document.createElement("h5");j.innerText="Finish study section",i.appendChild(j),i.appendChild(O),function(e,t){e.addEventListener("keydown",(function(e){if("Escape"===e.key){var n=document.getElementById("settings");n.setAttribute("style","display: none"),n.setAttribute("aria-hidden","true"),t.setFocusToItem(t.lastFocusedItem),w.push({action:"close",target:"settings"})}else if(e.altKey&&"ArrowLeft"===e.key){if((a=document.activeElement)&&"SELECT"===a.nodeName){var r=(i=a.parentNode).previousElementSibling;null!=r&&(i.insertAdjacentElement("afterend",r),a.focus(),a.setAttribute("aria-active","true"),T(L(k(a.id.split("-")[0]))),e.preventDefault())}}else if(e.altKey&&"ArrowRight"===e.key){var a;if((a=document.activeElement)&&"SELECT"===a.nodeName){var i,o=(i=a.parentNode).nextElementSibling;null!=o&&(i.parentNode.insertBefore(o,i),T(L(k(a.id.split("-")[0]))),e.preventDefault())}}}));var n=e.querySelector(":enabled"),r=x([],b(e.querySelectorAll("select:enabled")),!1).filter((function(e){return!e.parentElement.closest('#settings > div[aria-hidden="true"]')})).reverse()[0];n.addEventListener("keydown",(function(e){("Tab"===e.key&&e.shiftKey||"ArrowUp"===e.key)&&(T("Beginning of settings menu"),e.preventDefault())})),r.addEventListener("keydown",(function(e){("Tab"===e.key&&!e.shiftKey||"ArrowDown"===e.key)&&(T("End of settings menu"),e.preventDefault())}))}(o,N),m.addEventListener("keydown",(function(e){if(!c(document.activeElement)){if("m"===e.key){var t=document.getElementById("settings");t.firstElementChild,t.setAttribute("style","display: block"),t.setAttribute("aria-hidden","false"),setTimeout((function(){var e;null===(e=t.querySelector(":enabled"))||void 0===e||e.focus()}),0),w.push({action:"open",target:"settings"})}if("i"===e.key){var n=document.getElementById("command-dropdown-container");n.setAttribute("style","display: block"),n.setAttribute("aria-hidden","false"),setTimeout((function(){n.firstElementChild.focus(),n.classList.add("selected")}),0),w.push({action:"open",target:"commands"})}}})),function(t,n,r){var a=t.children[1];t.addEventListener("change",(function(){T(a.selectedOptions[0].text)})),t.addEventListener("keydown",(function(i){var o,c,s,l,d=JSON.parse(localStorage.getItem("settingsData"));if("Enter"===i.key){var h=a.selectedOptions[0].value;w.push({action:"dropdown",target:"commands",value:h});try{for(var m=E(u),v=m.next();!v.done;v=m.next()){var y=v.value;if(h===y){var g=Q(r.lastFocusedItem.domNode,n);if(g.description.has(h)){var b=p[g.type];if("root"===b)T(g.description.get(h)[1]);else{var x=document.getElementById("".concat(b,"-verbosity")).value,A=d[b][x].find((function(e){return e[0]===h}))[1];T(g.description.get(h)[A])}}else T("No ".concat(y," available"))}else h==="focus-"+y&&(C.unshift(y),W(n,document.getElementById("tree-root")))}}catch(e){o={error:e}}finally{try{v&&!v.done&&(c=m.return)&&c.call(m)}finally{if(o)throw o.error}}"clear"===h&&(C.splice(0,C.length),W(n,document.getElementById("tree-root"))),f.forEach((function(e){var t,r;if("root"!==e){var a=document.getElementById(e+"-verbosity"),i=Object.keys(d[e]);try{for(var o=E(i),c=o.next();!c.done;c=o.next()){var s=c.value;if(h===e+"-"+s)return a.value=s,S(a,n),void T("".concat(a.id.split("-")[0]," verbosity set to ").concat(a.value))}}catch(e){t={error:e}}finally{try{c&&!c.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}}}));var N=function(t){if("string"!=typeof t)return"continue";var a=Number(Object.values(e).find((function(n){return"number"==typeof n&&e[n]===t}))),i=e[a];h===t&&T(F(Q(r.lastFocusedItem.domNode,n),i))};try{for(var I=E(Object.values(e)),k=I.next();!k.done;k=I.next())N(k.value)}catch(e){s={error:e}}finally{try{k&&!k.done&&(l=I.return)&&l.call(I)}finally{if(s)throw s.error}}}"Enter"!==i.key&&"Escape"!==i.key||(t.setAttribute("style","display: none"),t.setAttribute("aria-hidden","true"),r.setFocusToItem(r.lastFocusedItem),w.push({action:"close",target:"commands"})),"Tab"===i.key&&i.preventDefault()}))}(l,r,N),s(N)}return i}})(),r})()));

/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(function webpackUniversalModuleDefinition(root, factory) {
	if(typeof exports === 'object' && typeof module === 'object')
		module.exports = factory();
	else if(typeof define === 'function' && define.amd)
		define([], factory);
	else {
		var a = factory();
		for(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];
	}
})(this, () => {
return /******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "../../node_modules/css-loader/dist/cjs.js!./src/Render/TreeView/TreeStyle.css":
/*!*************************************************************************************!*\
  !*** ../../node_modules/css-loader/dist/cjs.js!./src/Render/TreeView/TreeStyle.css ***!
  \*************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _node_modules_css_loader_dist_runtime_noSourceMaps_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../../node_modules/css-loader/dist/runtime/noSourceMaps.js */ \"../../node_modules/css-loader/dist/runtime/noSourceMaps.js\");\n/* harmony import */ var _node_modules_css_loader_dist_runtime_noSourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_noSourceMaps_js__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../../node_modules/css-loader/dist/runtime/api.js */ \"../../node_modules/css-loader/dist/runtime/api.js\");\n/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__);\n// Imports\n\n\nvar ___CSS_LOADER_EXPORT___ = _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default()((_node_modules_css_loader_dist_runtime_noSourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default()));\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".olli-vis ul[role=\\\"tree\\\"] {\\n  margin: 0;\\n  padding: 0;\\n  list-style: none;\\n}\\n\\n.olli-vis ul[role=\\\"tree\\\"] li {\\n  margin: 0;\\n  padding: 0;\\n  list-style: none;\\n}\\n\\n.olli-vis [role=\\\"treeitem\\\"][aria-expanded=\\\"false\\\"] + [role=\\\"group\\\"] {\\n  display: none;\\n}\\n\\n.olli-vis [role=\\\"treeitem\\\"][aria-expanded=\\\"true\\\"] + [role=\\\"group\\\"] {\\n  display: block;\\n}\\n\\n.olli-vis [role=\\\"treeitem\\\"][aria-expanded=\\\"false\\\"] > ul {\\n  display: none;\\n}\\n\\n.olli-vis [role=\\\"treeitem\\\"][aria-expanded=\\\"true\\\"] > ul {\\n  display: block;\\n}\\n\\n/* .olli-vis [role=\\\"treeitem\\\"],\\n.olli-vis [role=\\\"treeitem\\\"] span {\\n  width: 9em;\\n  margin: 0;\\n  padding: 0.125em;\\n  display: block;\\n} */\\n\\n/* disable default keyboard focus styling for treeitems\\n   Keyboard focus is styled with the following CSS */\\n.olli-vis :focus {\\n  outline: 0;\\n}\\n\\n.olli-vis .focus,\\n.olli-vis  span.focus,\\n.olli-vis  [aria-selected=\\\"true\\\"] {\\n  border-color: black;\\n  background-color: #eee;\\n}\\n\\n.olli-vis .hover,\\n.olli-vis  span:hover {\\n  background-color: #ddd;\\n}\\n\", \"\"]);\n// Exports\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (___CSS_LOADER_EXPORT___);\n\n\n//# sourceURL=webpack://olli/./src/Render/TreeView/TreeStyle.css?../../node_modules/css-loader/dist/cjs.js");

/***/ }),

/***/ "../../node_modules/css-loader/dist/runtime/api.js":
/*!*********************************************************!*\
  !*** ../../node_modules/css-loader/dist/runtime/api.js ***!
  \*********************************************************/
/***/ ((module) => {

eval("\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\nmodule.exports = function (cssWithMappingToString) {\n  var list = [];\n\n  // return the list of modules as css string\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = \"\";\n      var needLayer = typeof item[5] !== \"undefined\";\n      if (item[4]) {\n        content += \"@supports (\".concat(item[4], \") {\");\n      }\n      if (item[2]) {\n        content += \"@media \".concat(item[2], \" {\");\n      }\n      if (needLayer) {\n        content += \"@layer\".concat(item[5].length > 0 ? \" \".concat(item[5]) : \"\", \" {\");\n      }\n      content += cssWithMappingToString(item);\n      if (needLayer) {\n        content += \"}\";\n      }\n      if (item[2]) {\n        content += \"}\";\n      }\n      if (item[4]) {\n        content += \"}\";\n      }\n      return content;\n    }).join(\"\");\n  };\n\n  // import a list of modules into the list\n  list.i = function i(modules, media, dedupe, supports, layer) {\n    if (typeof modules === \"string\") {\n      modules = [[null, modules, undefined]];\n    }\n    var alreadyImportedModules = {};\n    if (dedupe) {\n      for (var k = 0; k < this.length; k++) {\n        var id = this[k][0];\n        if (id != null) {\n          alreadyImportedModules[id] = true;\n        }\n      }\n    }\n    for (var _k = 0; _k < modules.length; _k++) {\n      var item = [].concat(modules[_k]);\n      if (dedupe && alreadyImportedModules[item[0]]) {\n        continue;\n      }\n      if (typeof layer !== \"undefined\") {\n        if (typeof item[5] === \"undefined\") {\n          item[5] = layer;\n        } else {\n          item[1] = \"@layer\".concat(item[5].length > 0 ? \" \".concat(item[5]) : \"\", \" {\").concat(item[1], \"}\");\n          item[5] = layer;\n        }\n      }\n      if (media) {\n        if (!item[2]) {\n          item[2] = media;\n        } else {\n          item[1] = \"@media \".concat(item[2], \" {\").concat(item[1], \"}\");\n          item[2] = media;\n        }\n      }\n      if (supports) {\n        if (!item[4]) {\n          item[4] = \"\".concat(supports);\n        } else {\n          item[1] = \"@supports (\".concat(item[4], \") {\").concat(item[1], \"}\");\n          item[4] = supports;\n        }\n      }\n      list.push(item);\n    }\n  };\n  return list;\n};\n\n//# sourceURL=webpack://olli/../../node_modules/css-loader/dist/runtime/api.js?");

/***/ }),

/***/ "../../node_modules/css-loader/dist/runtime/noSourceMaps.js":
/*!******************************************************************!*\
  !*** ../../node_modules/css-loader/dist/runtime/noSourceMaps.js ***!
  \******************************************************************/
/***/ ((module) => {

eval("\n\nmodule.exports = function (i) {\n  return i[1];\n};\n\n//# sourceURL=webpack://olli/../../node_modules/css-loader/dist/runtime/noSourceMaps.js?");

/***/ }),

/***/ "./src/Render/TreeView/TreeStyle.css":
/*!*******************************************!*\
  !*** ./src/Render/TreeView/TreeStyle.css ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! !../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js */ \"../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n/* harmony import */ var _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! !../../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js */ \"../../node_modules/style-loader/dist/runtime/styleDomAPI.js\");\n/* harmony import */ var _node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! !../../../../../node_modules/style-loader/dist/runtime/insertBySelector.js */ \"../../node_modules/style-loader/dist/runtime/insertBySelector.js\");\n/* harmony import */ var _node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! !../../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js */ \"../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\");\n/* harmony import */ var _node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! !../../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js */ \"../../node_modules/style-loader/dist/runtime/insertStyleElement.js\");\n/* harmony import */ var _node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! !../../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js */ \"../../node_modules/style-loader/dist/runtime/styleTagTransform.js\");\n/* harmony import */ var _node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var _node_modules_css_loader_dist_cjs_js_TreeStyle_css__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! !!../../../../../node_modules/css-loader/dist/cjs.js!./TreeStyle.css */ \"../../node_modules/css-loader/dist/cjs.js!./src/Render/TreeView/TreeStyle.css\");\n\n      \n      \n      \n      \n      \n      \n      \n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = (_node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5___default());\noptions.setAttributes = (_node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3___default());\n\n      options.insert = _node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2___default().bind(null, \"head\");\n    \noptions.domAPI = (_node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1___default());\noptions.insertStyleElement = (_node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4___default());\n\nvar update = _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0___default()(_node_modules_css_loader_dist_cjs_js_TreeStyle_css__WEBPACK_IMPORTED_MODULE_6__[\"default\"], options);\n\n\n\n\n       /* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (_node_modules_css_loader_dist_cjs_js_TreeStyle_css__WEBPACK_IMPORTED_MODULE_6__[\"default\"] && _node_modules_css_loader_dist_cjs_js_TreeStyle_css__WEBPACK_IMPORTED_MODULE_6__[\"default\"].locals ? _node_modules_css_loader_dist_cjs_js_TreeStyle_css__WEBPACK_IMPORTED_MODULE_6__[\"default\"].locals : undefined);\n\n\n//# sourceURL=webpack://olli/./src/Render/TreeView/TreeStyle.css?");

/***/ }),

/***/ "../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js":
/*!********************************************************************************!*\
  !*** ../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js ***!
  \********************************************************************************/
/***/ ((module) => {

eval("\n\nvar stylesInDOM = [];\n\nfunction getIndexByIdentifier(identifier) {\n  var result = -1;\n\n  for (var i = 0; i < stylesInDOM.length; i++) {\n    if (stylesInDOM[i].identifier === identifier) {\n      result = i;\n      break;\n    }\n  }\n\n  return result;\n}\n\nfunction modulesToDom(list, options) {\n  var idCountMap = {};\n  var identifiers = [];\n\n  for (var i = 0; i < list.length; i++) {\n    var item = list[i];\n    var id = options.base ? item[0] + options.base : item[0];\n    var count = idCountMap[id] || 0;\n    var identifier = \"\".concat(id, \" \").concat(count);\n    idCountMap[id] = count + 1;\n    var indexByIdentifier = getIndexByIdentifier(identifier);\n    var obj = {\n      css: item[1],\n      media: item[2],\n      sourceMap: item[3],\n      supports: item[4],\n      layer: item[5]\n    };\n\n    if (indexByIdentifier !== -1) {\n      stylesInDOM[indexByIdentifier].references++;\n      stylesInDOM[indexByIdentifier].updater(obj);\n    } else {\n      var updater = addElementStyle(obj, options);\n      options.byIndex = i;\n      stylesInDOM.splice(i, 0, {\n        identifier: identifier,\n        updater: updater,\n        references: 1\n      });\n    }\n\n    identifiers.push(identifier);\n  }\n\n  return identifiers;\n}\n\nfunction addElementStyle(obj, options) {\n  var api = options.domAPI(options);\n  api.update(obj);\n\n  var updater = function updater(newObj) {\n    if (newObj) {\n      if (newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap && newObj.supports === obj.supports && newObj.layer === obj.layer) {\n        return;\n      }\n\n      api.update(obj = newObj);\n    } else {\n      api.remove();\n    }\n  };\n\n  return updater;\n}\n\nmodule.exports = function (list, options) {\n  options = options || {};\n  list = list || [];\n  var lastIdentifiers = modulesToDom(list, options);\n  return function update(newList) {\n    newList = newList || [];\n\n    for (var i = 0; i < lastIdentifiers.length; i++) {\n      var identifier = lastIdentifiers[i];\n      var index = getIndexByIdentifier(identifier);\n      stylesInDOM[index].references--;\n    }\n\n    var newLastIdentifiers = modulesToDom(newList, options);\n\n    for (var _i = 0; _i < lastIdentifiers.length; _i++) {\n      var _identifier = lastIdentifiers[_i];\n\n      var _index = getIndexByIdentifier(_identifier);\n\n      if (stylesInDOM[_index].references === 0) {\n        stylesInDOM[_index].updater();\n\n        stylesInDOM.splice(_index, 1);\n      }\n    }\n\n    lastIdentifiers = newLastIdentifiers;\n  };\n};\n\n//# sourceURL=webpack://olli/../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js?");

/***/ }),

/***/ "../../node_modules/style-loader/dist/runtime/insertBySelector.js":
/*!************************************************************************!*\
  !*** ../../node_modules/style-loader/dist/runtime/insertBySelector.js ***!
  \************************************************************************/
/***/ ((module) => {

eval("\n\nvar memo = {};\n/* istanbul ignore next  */\n\nfunction getTarget(target) {\n  if (typeof memo[target] === \"undefined\") {\n    var styleTarget = document.querySelector(target); // Special case to return head of iframe instead of iframe itself\n\n    if (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n      try {\n        // This will throw an exception if access to iframe is blocked\n        // due to cross-origin restrictions\n        styleTarget = styleTarget.contentDocument.head;\n      } catch (e) {\n        // istanbul ignore next\n        styleTarget = null;\n      }\n    }\n\n    memo[target] = styleTarget;\n  }\n\n  return memo[target];\n}\n/* istanbul ignore next  */\n\n\nfunction insertBySelector(insert, style) {\n  var target = getTarget(insert);\n\n  if (!target) {\n    throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");\n  }\n\n  target.appendChild(style);\n}\n\nmodule.exports = insertBySelector;\n\n//# sourceURL=webpack://olli/../../node_modules/style-loader/dist/runtime/insertBySelector.js?");

/***/ }),

/***/ "../../node_modules/style-loader/dist/runtime/insertStyleElement.js":
/*!**************************************************************************!*\
  !*** ../../node_modules/style-loader/dist/runtime/insertStyleElement.js ***!
  \**************************************************************************/
/***/ ((module) => {

eval("\n\n/* istanbul ignore next  */\nfunction insertStyleElement(options) {\n  var element = document.createElement(\"style\");\n  options.setAttributes(element, options.attributes);\n  options.insert(element, options.options);\n  return element;\n}\n\nmodule.exports = insertStyleElement;\n\n//# sourceURL=webpack://olli/../../node_modules/style-loader/dist/runtime/insertStyleElement.js?");

/***/ }),

/***/ "../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js":
/*!**************************************************************************************!*\
  !*** ../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js ***!
  \**************************************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("\n\n/* istanbul ignore next  */\nfunction setAttributesWithoutAttributes(styleElement) {\n  var nonce =  true ? __webpack_require__.nc : 0;\n\n  if (nonce) {\n    styleElement.setAttribute(\"nonce\", nonce);\n  }\n}\n\nmodule.exports = setAttributesWithoutAttributes;\n\n//# sourceURL=webpack://olli/../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js?");

/***/ }),

/***/ "../../node_modules/style-loader/dist/runtime/styleDomAPI.js":
/*!*******************************************************************!*\
  !*** ../../node_modules/style-loader/dist/runtime/styleDomAPI.js ***!
  \*******************************************************************/
/***/ ((module) => {

eval("\n\n/* istanbul ignore next  */\nfunction apply(styleElement, options, obj) {\n  var css = \"\";\n\n  if (obj.supports) {\n    css += \"@supports (\".concat(obj.supports, \") {\");\n  }\n\n  if (obj.media) {\n    css += \"@media \".concat(obj.media, \" {\");\n  }\n\n  var needLayer = typeof obj.layer !== \"undefined\";\n\n  if (needLayer) {\n    css += \"@layer\".concat(obj.layer.length > 0 ? \" \".concat(obj.layer) : \"\", \" {\");\n  }\n\n  css += obj.css;\n\n  if (needLayer) {\n    css += \"}\";\n  }\n\n  if (obj.media) {\n    css += \"}\";\n  }\n\n  if (obj.supports) {\n    css += \"}\";\n  }\n\n  var sourceMap = obj.sourceMap;\n\n  if (sourceMap && typeof btoa !== \"undefined\") {\n    css += \"\\n/*# sourceMappingURL=data:application/json;base64,\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))), \" */\");\n  } // For old IE\n\n  /* istanbul ignore if  */\n\n\n  options.styleTagTransform(css, styleElement, options.options);\n}\n\nfunction removeStyleElement(styleElement) {\n  // istanbul ignore if\n  if (styleElement.parentNode === null) {\n    return false;\n  }\n\n  styleElement.parentNode.removeChild(styleElement);\n}\n/* istanbul ignore next  */\n\n\nfunction domAPI(options) {\n  var styleElement = options.insertStyleElement(options);\n  return {\n    update: function update(obj) {\n      apply(styleElement, options, obj);\n    },\n    remove: function remove() {\n      removeStyleElement(styleElement);\n    }\n  };\n}\n\nmodule.exports = domAPI;\n\n//# sourceURL=webpack://olli/../../node_modules/style-loader/dist/runtime/styleDomAPI.js?");

/***/ }),

/***/ "../../node_modules/style-loader/dist/runtime/styleTagTransform.js":
/*!*************************************************************************!*\
  !*** ../../node_modules/style-loader/dist/runtime/styleTagTransform.js ***!
  \*************************************************************************/
/***/ ((module) => {

eval("\n\n/* istanbul ignore next  */\nfunction styleTagTransform(css, styleElement) {\n  if (styleElement.styleSheet) {\n    styleElement.styleSheet.cssText = css;\n  } else {\n    while (styleElement.firstChild) {\n      styleElement.removeChild(styleElement.firstChild);\n    }\n\n    styleElement.appendChild(document.createTextNode(css));\n  }\n}\n\nmodule.exports = styleTagTransform;\n\n//# sourceURL=webpack://olli/../../node_modules/style-loader/dist/runtime/styleTagTransform.js?");

/***/ }),

/***/ "./src/Render/Table/index.ts":
/*!***********************************!*\
  !*** ./src/Render/Table/index.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"renderTable\": () => (/* binding */ renderTable)\n/* harmony export */ });\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../utils */ \"./src/utils.ts\");\n\n/**\n *\n * @param tree The {@link AccessibilityTreeNode} to generate a table from\n * @returns An {@link HTMLElement} table of the data used in a visualization\n */\nfunction renderTable(data, fieldsUsed) {\n    var table = document.createElement(\"table\");\n    var thead = document.createElement(\"thead\");\n    var theadtr = document.createElement(\"tr\");\n    fieldsUsed.forEach(function (field) {\n        var th = document.createElement(\"th\");\n        th.setAttribute('scope', 'col');\n        th.innerText = field;\n        theadtr.appendChild(th);\n    });\n    thead.appendChild(theadtr);\n    table.appendChild(thead);\n    var tableBody = document.createElement(\"tbody\");\n    data.forEach(function (data) {\n        var dataRow = document.createElement(\"tr\");\n        fieldsUsed.forEach(function (field) {\n            var td = document.createElement(\"td\");\n            td.innerText = (0,_utils__WEBPACK_IMPORTED_MODULE_0__.fmtValue)(data[field]);\n            dataRow.appendChild(td);\n        });\n        tableBody.appendChild(dataRow);\n    });\n    table.appendChild(tableBody);\n    return table;\n}\n\n\n//# sourceURL=webpack://olli/./src/Render/Table/index.ts?");

/***/ }),

/***/ "./src/Render/TreeView/Tree.ts":
/*!*************************************!*\
  !*** ./src/Render/TreeView/Tree.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Tree\": () => (/* binding */ Tree)\n/* harmony export */ });\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../utils */ \"./src/utils.ts\");\n/* harmony import */ var _TreeItem__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./TreeItem */ \"./src/Render/TreeView/TreeItem.ts\");\n\n\n/*\n *   This content is licensed according to the W3C Software License at\n *   https://www.w3.org/Consortium/Legal/2015/copyright-software-and-document\n *\n *   File:   Tree.js\n *\n *   Desc:   Tree widget that implements ARIA Authoring Practices\n *           for a tree being used as a file viewer\n */\n/*\n*   @constructor\n*\n*   @desc\n*       Tree item object for representing the state and user interactions for a\n*       tree widget\n*\n*   @param node\n*       An element with the role=tree attribute\n*/\nvar Tree = /** @class */ (function () {\n    function Tree(node, onFocus) {\n        this.currentlyTypingToken = function () {\n            // don't activate any other commands if writing a preset name\n            if (document.activeElement && (document.activeElement.id.endsWith('custom-name') ||\n                (document.activeElement.id === 'command-dropdown'))) {\n                return true;\n            }\n            function startEndOverlap(endOverlaps, startOverlaps) {\n                var overlapLen = Math.min(startOverlaps.length, endOverlaps.length);\n                while (overlapLen > 0) {\n                    if (startOverlaps.slice(0, overlapLen) === endOverlaps.slice(-overlapLen)) {\n                        break;\n                    }\n                    overlapLen -= 1;\n                }\n                return overlapLen;\n            }\n        };\n        this.domNode = node;\n        this.treeItems = [];\n        this.onFocus = onFocus;\n    }\n    Tree.prototype.init = function () {\n        function findTreeitems(node, tree, group) {\n            var elem = node.firstElementChild;\n            var ti = group;\n            while (elem) {\n                if (['li', 'table', 'tr', 'th', 'td'].includes(elem.tagName.toLowerCase())) {\n                    ti = new _TreeItem__WEBPACK_IMPORTED_MODULE_1__.TreeItem(elem, tree, group);\n                    ti.init();\n                    if (group) {\n                        group.children.push(ti);\n                    }\n                    tree.treeItems.push(ti);\n                }\n                if (elem.firstElementChild) {\n                    findTreeitems(elem, tree, ti);\n                }\n                elem = elem.nextElementSibling;\n            }\n        }\n        findTreeitems(this.domNode, this, undefined);\n        this.updateVisibleTreeItems();\n        this.rootTreeItem.domNode.tabIndex = 0;\n        this.lastFocusedItem = this.rootTreeItem;\n    };\n    Tree.prototype.setFocusToItem = function (treeitem) {\n        for (var i = 0; i < this.treeItems.length; i++) {\n            var ti = this.treeItems[i];\n            if (ti === treeitem) {\n                ti.domNode.tabIndex = 0;\n                ti.domNode.focus();\n                ti.domNode.setAttribute('aria-selected', 'true');\n                this.lastFocusedItem = ti;\n                if (this.onFocus) {\n                    this.onFocus(ti.domNode);\n                }\n                (0,_utils__WEBPACK_IMPORTED_MODULE_0__.setOlliGlobalState)({ lastVisitedTree: this });\n            }\n            else {\n                ti.domNode.tabIndex = -1;\n                ti.domNode.setAttribute('aria-selected', 'false');\n            }\n        }\n    };\n    Tree.prototype.setFocusToNextItem = function (currentItem) {\n        if (currentItem.parent) {\n            var nodeIndex = currentItem.parent.children.indexOf(currentItem);\n            if (nodeIndex < currentItem.parent.children.length - 1) {\n                this.setFocusToItem(currentItem.parent.children[nodeIndex + 1]);\n            }\n        }\n    };\n    Tree.prototype.setFocusToPreviousItem = function (currentItem) {\n        if (currentItem.parent) {\n            var nodeIndex = currentItem.parent.children.indexOf(currentItem);\n            if (nodeIndex > 0) {\n                this.setFocusToItem(currentItem.parent.children[nodeIndex - 1]);\n            }\n        }\n    };\n    Tree.prototype.setFocusToNextLayer = function (currentItem) {\n        if (currentItem.lastVisitedChild) {\n            this.setFocusToItem(currentItem.lastVisitedChild);\n        }\n        else {\n            this.setFocusToItem(currentItem.children[0]);\n        }\n    };\n    Tree.prototype.setFocusToParentItem = function (currentItem) {\n        if (currentItem.parent) {\n            currentItem.parent.lastVisitedChild = currentItem;\n            this.setFocusToItem(currentItem.parent);\n            // if (currentItem.isExpandable && currentItem.isExpanded()) this.collapseTreeItem(currentItem);\n            if (currentItem.parent.isExpandable && currentItem.parent.isExpanded())\n                this.collapseTreeItem(currentItem.parent);\n        }\n    };\n    Tree.prototype.setFocusToFirstInLayer = function (currentItem) {\n        if (currentItem.parent) {\n            this.setFocusToItem(currentItem.parent.children[0]);\n        }\n    };\n    Tree.prototype.setFocusToLastInLayer = function (currentItem) {\n        if (currentItem.parent) {\n            this.setFocusToItem(currentItem.parent.children[currentItem.parent.children.length - 1]);\n        }\n    };\n    Tree.prototype.setFocusGridLeft = function (currentItem) {\n        var i = currentItem.domNode.getAttribute('data-i');\n        var j = currentItem.domNode.getAttribute('data-j');\n        if (i && j) {\n            var next = this.treeItems.find(function (item) {\n                return item.domNode.getAttribute('data-i') === String(Number(i) - 1) &&\n                    item.domNode.getAttribute('data-j') === String(j);\n            });\n            if (next) {\n                this.setFocusToItem(next);\n            }\n        }\n    };\n    Tree.prototype.setFocusGridRight = function (currentItem) {\n        var i = currentItem.domNode.getAttribute('data-i');\n        var j = currentItem.domNode.getAttribute('data-j');\n        if (i && j) {\n            var next = this.treeItems.find(function (item) {\n                return item.domNode.getAttribute('data-i') === String(Number(i) + 1) &&\n                    item.domNode.getAttribute('data-j') === String(j);\n            });\n            if (next) {\n                this.setFocusToItem(next);\n            }\n        }\n    };\n    Tree.prototype.setFocusGridUp = function (currentItem) {\n        var i = currentItem.domNode.getAttribute('data-i');\n        var j = currentItem.domNode.getAttribute('data-j');\n        if (i && j) {\n            var next = this.treeItems.find(function (item) {\n                return item.domNode.getAttribute('data-i') === String(i) &&\n                    item.domNode.getAttribute('data-j') === String(Number(j) + 1);\n            });\n            if (next) {\n                this.setFocusToItem(next);\n            }\n        }\n    };\n    Tree.prototype.setFocusGridDown = function (currentItem) {\n        var i = currentItem.domNode.getAttribute('data-i');\n        var j = currentItem.domNode.getAttribute('data-j');\n        if (i && j) {\n            var next = this.treeItems.find(function (item) {\n                return item.domNode.getAttribute('data-i') === String(i) &&\n                    item.domNode.getAttribute('data-j') === String(Number(j) - 1);\n            });\n            if (next) {\n                this.setFocusToItem(next);\n            }\n        }\n    };\n    Tree.prototype.expandTreeItem = function (currentItem) {\n        if (currentItem.isExpandable) {\n            if (currentItem.parent) {\n                currentItem.parent.children.forEach(function (item) {\n                    if (item !== currentItem) {\n                        item.domNode.setAttribute('aria-expanded', 'false');\n                    }\n                });\n            }\n            currentItem.domNode.setAttribute('aria-expanded', 'true');\n            this.updateVisibleTreeItems();\n        }\n    };\n    Tree.prototype.collapseTreeItem = function (item) {\n        var group;\n        if (item.isExpanded()) {\n            group = item;\n        }\n        else if (item.parent) {\n            group = item.parent;\n        }\n        if (group) {\n            group.domNode.setAttribute('aria-expanded', 'false');\n            this.updateVisibleTreeItems();\n            this.setFocusToItem(group);\n        }\n    };\n    Tree.prototype.updateVisibleTreeItems = function () {\n        this.rootTreeItem = this.treeItems[0];\n        for (var i = 0; i < this.treeItems.length; i++) {\n            var ti = this.treeItems[i];\n            var parent_1 = ti.domNode.parentNode;\n            ti.isVisible = true;\n            while (parent_1 && (parent_1 !== this.domNode)) {\n                if (parent_1.getAttribute('aria-expanded') == 'false') {\n                    ti.isVisible = false;\n                }\n                parent_1 = parent_1.parentNode;\n            }\n        }\n    };\n    Tree.prototype.focusOnNodeType = function (nodeType, currentItem) {\n        var _this = this;\n        var expandParents = function (node) {\n            if (node) {\n                if (node.isExpandable && !node.isExpanded()) {\n                    _this.expandTreeItem(node);\n                    expandParents(node.parent);\n                }\n            }\n        };\n        var collapseChildren = function (node) {\n            node.children.forEach(function (child) {\n                if (child.isExpandable && child.isExpanded()) {\n                    collapseChildren(child);\n                    _this.collapseTreeItem(child);\n                }\n            });\n        };\n        var iterNodeType = currentItem.domNode.getAttribute('data-nodetype');\n        var iterItem = currentItem;\n        while (iterNodeType !== 'chart') {\n            if (!iterNodeType)\n                return;\n            if (iterItem.parent) {\n                iterItem = iterItem.parent;\n                iterNodeType = iterItem.domNode.getAttribute('data-nodetype');\n            }\n            else\n                return;\n        }\n        var targetItem = iterItem.children.find(function (item) {\n            var nt = item.domNode.getAttribute('data-nodetype');\n            return nodeType === nt;\n        });\n        if (targetItem) {\n            expandParents(targetItem);\n            collapseChildren(targetItem);\n            this.setFocusToItem(targetItem);\n        }\n    };\n    return Tree;\n}());\n\n\n\n//# sourceURL=webpack://olli/./src/Render/TreeView/Tree.ts?");

/***/ }),

/***/ "./src/Render/TreeView/TreeItem.ts":
/*!*****************************************!*\
  !*** ./src/Render/TreeView/TreeItem.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"TreeItem\": () => (/* binding */ TreeItem)\n/* harmony export */ });\n/*\n *   This content is licensed according to the W3C Software License at\n *   https://www.w3.org/Consortium/Legal/2015/copyright-software-and-document\n *\n *   File:   Treeitem.js\n *\n *   Desc:   Treeitem widget that implements ARIA Authoring Practices\n *           for a tree being used as a file viewer\n */\n/*\n*   @constructor\n*\n*   @desc\n*       Treeitem object for representing the state and user interactions for a\n*       treeItem widget\n*\n*   @param node\n*       An element with the role=tree attribute\n*/\nvar TreeItem = /** @class */ (function () {\n    function TreeItem(node, treeObj, parent) {\n        node.tabIndex = -1;\n        this.tree = treeObj;\n        this.domNode = node;\n        this.isExpandable = false;\n        this.isVisible = false;\n        this.inGroup = false;\n        if (parent) {\n            this.inGroup = true;\n        }\n        this.parent = parent;\n        this.children = [];\n        var elem = node.firstElementChild;\n        while (elem) {\n            // if (['ul', 'table', 'th', 'td'].includes(elem.tagName.toLowerCase())) {\n            if (['ul', 'table', 'thead', 'tbody', 'tr', 'td', 'th'].includes(elem.tagName.toLowerCase())) {\n                // if (['ul', 'table'].includes(elem.tagName.toLowerCase())) {\n                this.isExpandable = true;\n                break;\n            }\n            elem = elem.nextElementSibling;\n        }\n        this.keyCode = Object.freeze({\n            RETURN: 13,\n            SPACE: 32,\n            PAGEUP: 33,\n            PAGEDOWN: 34,\n            END: 35,\n            HOME: 36,\n            LEFT: 37,\n            UP: 38,\n            RIGHT: 39,\n            DOWN: 40,\n            X: 88,\n            Y: 89,\n            L: 76,\n            G: 71,\n            W: 87,\n            A: 65,\n            S: 83,\n            D: 68,\n            ESCAPE: 27,\n            PLUS: 107,\n            MINUS: 189\n        });\n    }\n    TreeItem.prototype.init = function () {\n        this.domNode.tabIndex = -1;\n        this.domNode.addEventListener('keydown', this.handleKeydown.bind(this));\n        this.domNode.addEventListener('click', this.handleClick.bind(this));\n        this.domNode.addEventListener('focus', this.handleFocus.bind(this));\n        this.domNode.addEventListener('blur', this.handleBlur.bind(this));\n        if (!this.isExpandable) {\n            this.domNode.addEventListener('mouseover', this.handleMouseOver.bind(this));\n            this.domNode.addEventListener('mouseout', this.handleMouseOut.bind(this));\n        }\n    };\n    TreeItem.prototype.isExpanded = function () {\n        if (this.isExpandable) {\n            return this.domNode.getAttribute('aria-expanded') === 'true';\n        }\n        return false;\n    };\n    /* EVENT HANDLERS */\n    TreeItem.prototype.handleKeydown = function (event) {\n        if (event.altKey || event.ctrlKey || event.metaKey) {\n            return;\n        }\n        // TODO this was lateral nav\n        // if (event.shiftKey) {\n        //     let root = this.getRootNode();\n        //     if (event.keyCode == this.keyCode.SPACE || event.keyCode == this.keyCode.RETURN) {\n        //         event.stopPropagation();\n        //     } else if (root.label.includes('nested charts') && event.target === this.domNode) {\n        //         const nodePosition = (item: TreeItem): number[] => {\n        //             let arr: number[] = [];\n        //             let node: TreeItem = item\n        //             while (node !== undefined) {\n        //                 if (node.parent) {\n        //                     let index: number = node.parent.children.indexOf(node);\n        //                     if (index !== -1) {\n        //                         arr.push(index)\n        //                     }\n        //                 }\n        //                 node = node.parent\n        //             }\n        //             return arr\n        //         }\n        //         if (event.keyCode === this.keyCode.LEFT) {\n        //             let pos: number[] = nodePosition(this).reverse()\n        //             pos[0] = pos[0] - 1\n        //             if (pos[0] >= 0) {\n        //                 this.shiftToNode(pos)\n        //             }\n        //         } else if (event.keyCode === this.keyCode.RIGHT) {\n        //             let pos: number[] = nodePosition(this).reverse()\n        //             pos[0] = pos[0] + 1\n        //             if (pos[pos.length - 1] < root.children.length) {\n        //                 this.shiftToNode(pos)\n        //             }\n        //         }\n        //     }\n        // } else {\n        //     this.checkBaseKeys(event)\n        // }\n        this.checkBaseKeys(event);\n    };\n    TreeItem.prototype.checkBaseKeys = function (event) {\n        var flag = false;\n        var typingToken = this.tree.currentlyTypingToken();\n        switch (event.key) {\n            case 'Enter':\n            case ' ':\n                if (this.isExpandable) {\n                    if (this.isExpanded()) {\n                        this.tree.collapseTreeItem(this);\n                    }\n                    else {\n                        this.tree.expandTreeItem(this);\n                    }\n                }\n                flag = true;\n                break;\n            case 'ArrowDown':\n                if (this.children.length > 0) {\n                    if (this.isExpandable) {\n                        this.tree.expandTreeItem(this);\n                        this.tree.setFocusToNextLayer(this);\n                    }\n                }\n                flag = true;\n                break;\n            case 'Escape':\n            case 'ArrowUp':\n                // if (this.isExpandable && this.isExpanded()) {\n                // this.tree.setFocusToParentItem();\n                // this.tree.collapseTreeItem(this);\n                // flag = true;\n                // } else {\n                if (this.inGroup) {\n                    this.tree.setFocusToParentItem(this);\n                    flag = true;\n                }\n                // }\n                break;\n            case 'ArrowLeft':\n                this.tree.setFocusToPreviousItem(this);\n                flag = true;\n                break;\n            case 'ArrowRight':\n                this.tree.setFocusToNextItem(this);\n                flag = true;\n                break;\n            case 'Home':\n                if (this.parent) {\n                    this.tree.setFocusToFirstInLayer(this);\n                    flag = true;\n                }\n                break;\n            case 'End':\n                if (this.parent) {\n                    this.tree.setFocusToLastInLayer(this);\n                    flag = true;\n                }\n                break;\n            case 'x':\n                if (!typingToken) {\n                    this.tree.focusOnNodeType(\"xAxis\", this);\n                }\n                break;\n            case 'y':\n                if (!typingToken) {\n                    this.tree.focusOnNodeType(\"yAxis\", this);\n                }\n                break;\n            case 'l':\n                if (!typingToken) {\n                    this.tree.focusOnNodeType(\"legend\", this);\n                }\n                break;\n            case 'w':\n                if (!typingToken) {\n                    this.tree.setFocusGridUp(this);\n                }\n                break;\n            case 'a':\n                if (!typingToken) {\n                    this.tree.setFocusGridLeft(this);\n                }\n                break;\n            case 's':\n                if (!typingToken) {\n                    this.tree.setFocusGridDown(this);\n                }\n                break;\n            case 'd':\n                if (!typingToken) {\n                    this.tree.setFocusGridRight(this);\n                }\n                break;\n        }\n        if (flag) {\n            event.stopPropagation();\n            event.preventDefault();\n        }\n    };\n    TreeItem.prototype.handleClick = function (event) {\n        if (this.isExpandable) {\n            if (this.isExpanded()) {\n                this.tree.collapseTreeItem(this);\n            }\n            else {\n                this.tree.expandTreeItem(this);\n            }\n            event.stopPropagation();\n        }\n        else {\n            this.tree.setFocusToItem(this);\n            event.stopPropagation();\n        }\n    };\n    TreeItem.prototype.handleFocus = function () {\n        var node = this.domNode;\n        if (this.isExpandable) {\n            node = node.firstElementChild;\n        }\n        node.classList.add('focus');\n    };\n    TreeItem.prototype.handleBlur = function () {\n        var node = this.domNode;\n        if (this.isExpandable) {\n            node = node.firstElementChild;\n        }\n        node.classList.remove('focus');\n    };\n    TreeItem.prototype.handleMouseOver = function (event) {\n        event.currentTarget.classList.add('hover');\n    };\n    TreeItem.prototype.handleMouseOut = function (event) {\n        event.currentTarget.classList.remove('hover');\n    };\n    return TreeItem;\n}());\n\n\n\n//# sourceURL=webpack://olli/./src/Render/TreeView/TreeItem.ts?");

/***/ }),

/***/ "./src/Render/TreeView/index.ts":
/*!**************************************!*\
  !*** ./src/Render/TreeView/index.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"htmlNodeToTree\": () => (/* binding */ htmlNodeToTree),\n/* harmony export */   \"renderTree\": () => (/* binding */ renderTree),\n/* harmony export */   \"rerenderTreeDescription\": () => (/* binding */ rerenderTreeDescription)\n/* harmony export */ });\n/* harmony import */ var _Settings__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../Settings */ \"./src/Settings/index.ts\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../utils */ \"./src/utils.ts\");\n/* harmony import */ var _TreeStyle_css__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./TreeStyle.css */ \"./src/Render/TreeView/TreeStyle.css\");\n// Adapted from: https://w3c.github.io/aria-practices/examples/treeview/treeview-1/treeview-1b.html\nvar __values = (undefined && undefined.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nvar __read = (undefined && undefined.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\n\n\n\n/**\n *\n * @param node A {@link AccessibilityTreeNode} to generate a navigable tree view from\n * @returns An {@link HTMLElement} ARIA TreeView of the navigable tree view for a visualization\n */\nfunction renderTree(tree) {\n    var _a;\n    var namespace = (Math.random() + 1).toString(36).substring(7);\n    var node = tree.root;\n    var root = document.createElement('ul');\n    var labelId = \"\".concat(namespace, \"-\").concat(node.type, \"-label\");\n    root.setAttribute('role', 'tree');\n    root.setAttribute('aria-labelledby', labelId);\n    root.setAttribute('id', 'tree-root');\n    // const childContainer = document.createElement('ul');\n    // childContainer.setAttribute('role', 'group');\n    // childContainer.appendChild(_renderTree(node, namespace, 1, 1, 1));\n    // root.appendChild(childContainer);\n    // childContainer.querySelector('span')?.setAttribute('id', labelId);\n    root.appendChild(_renderTree(node, namespace, 1, 1, 1, \"root\"));\n    (_a = root.querySelector('span')) === null || _a === void 0 ? void 0 : _a.setAttribute('id', labelId);\n    return root;\n    function _renderTree(node, namespace, level, posinset, setsize, idPrefix) {\n        var item = document.createElement('li');\n        var id = idPrefix + '-' + (posinset - 1);\n        item.setAttribute('role', 'treeitem');\n        item.setAttribute('aria-level', String(level));\n        item.setAttribute('aria-setsize', String(setsize));\n        item.setAttribute('aria-posinset', String(posinset));\n        item.setAttribute('aria-expanded', 'false');\n        item.setAttribute('data-nodetype', node.type);\n        item.setAttribute('id', id);\n        if (node.gridIndex) {\n            item.setAttribute('data-i', String(node.gridIndex.i));\n            item.setAttribute('data-j', String(node.gridIndex.j));\n        }\n        if (node.filterValue) {\n            item.setAttribute('data-filterValue', JSON.stringify(node.filterValue));\n        }\n        var label = document.createElement('span');\n        label.textContent = (0,_Settings__WEBPACK_IMPORTED_MODULE_0__.getDescriptionWithSettings)(node);\n        item.appendChild(label);\n        if (node.children.length) {\n            var dataChildren = node.children.filter(function (n) { return n.type === 'data'; });\n            var treeChildren = node.children.filter(function (n) { return n.type !== 'data'; });\n            var childContainer_1 = document.createElement('ul');\n            childContainer_1.setAttribute('role', 'group');\n            if (dataChildren.length) {\n                childContainer_1.appendChild(createDataTable(dataChildren, level + 1));\n            }\n            else {\n                treeChildren.forEach(function (n, index, array) {\n                    childContainer_1.appendChild(_renderTree(n, namespace, level + 1, index + 1, array.length, id));\n                });\n            }\n            item.appendChild(childContainer_1);\n        }\n        return item;\n    }\n}\n/**\n *\n * @param tree The {@link AccessibilityTreeNode} whose description is being re-rendered\n * @param ul The {@link HTMLElement} corresponding to the tree root\n */\nfunction rerenderTreeDescription(tree, ul) {\n    // Tree structure is:\n    // ul -> li[] | table\n    // li -> [span, ul] | span\n    // span, table have no children\n    var e_1, _a;\n    if (ul.children.length) {\n        try {\n            for (var _b = __values(ul.children), _c = _b.next(); !_c.done; _c = _b.next()) {\n                var li = _c.value;\n                if (li.nodeName === 'TABLE') {\n                    var parentLi = ul.parentElement; // the parent li stores the relevant ID\n                    var tableData = htmlNodeToTree(parentLi, tree).children.filter(function (n) { return n.type === 'data'; });\n                    li.replaceWith(createDataTable(tableData, parentLi.id.split('-').length));\n                }\n                else {\n                    var label = li.firstElementChild;\n                    label.innerText = (0,_Settings__WEBPACK_IMPORTED_MODULE_0__.getDescriptionWithSettings)(htmlNodeToTree(li, tree));\n                    if (li.children[1]) {\n                        rerenderTreeDescription(tree, li.children[1]);\n                    }\n                }\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n    }\n}\n/**\n *\n * @param node The {@link HTMLElement} to find in the tree\n * @param tree The {@link AccessibilityTree} to look for the node in\n * @returns An {@link AccessibilityTreeNode} matching the HTML node input\n */\nfunction htmlNodeToTree(node, tree) {\n    var e_2, _a;\n    var cur = tree.root;\n    var path = node.id.split('-').slice(2).map(function (x) { return Number(x); });\n    try {\n        for (var path_1 = __values(path), path_1_1 = path_1.next(); !path_1_1.done; path_1_1 = path_1.next()) {\n            var idx = path_1_1.value;\n            cur = cur.children[idx];\n        }\n    }\n    catch (e_2_1) { e_2 = { error: e_2_1 }; }\n    finally {\n        try {\n            if (path_1_1 && !path_1_1.done && (_a = path_1.return)) _a.call(path_1);\n        }\n        finally { if (e_2) throw e_2.error; }\n    }\n    return cur;\n}\nfunction createDataTable(dataNodes, level) {\n    var e_3, _a;\n    // Figure out which keys to include\n    var ordering = (0,_Settings__WEBPACK_IMPORTED_MODULE_0__.getSettingsInfoForTable)();\n    var tableKeys = [];\n    var tableKeysMap = [];\n    dataNodes[0].tableKeys.forEach(function (name, idx) {\n        var key = dataNodes[0].tableKeysMap[idx];\n        var include = ordering[key];\n        if (include < 0)\n            return;\n        // extra check for quantile since sometimes settings turn it on, but it is not generated (e.g. wrong axis)\n        if (key == 'quantile' && !(dataNodes[0].description.get('quantile')[0]))\n            return;\n        tableKeys.push(name);\n        tableKeysMap.push(key);\n    });\n    // Reorder keys according to their indices (values of `ordering`)\n    var orderedTableKeys = [];\n    var orderedTableKeysMap = [];\n    try {\n        for (var _b = __values(Object.entries(ordering).sort(function (a, b) { return a[1] - b[1]; })), _c = _b.next(); !_c.done; _c = _b.next()) {\n            var _d = __read(_c.value, 2), token = _d[0], _ = _d[1];\n            var origIdx = tableKeysMap.indexOf(token);\n            if (origIdx < 0)\n                continue;\n            orderedTableKeysMap.push(token);\n            orderedTableKeys.push(tableKeys[origIdx]);\n            if (token === 'data') { // appears twice in a row\n                orderedTableKeysMap.push(token);\n                orderedTableKeys.push(tableKeys[origIdx + 1]);\n            }\n        }\n    }\n    catch (e_3_1) { e_3 = { error: e_3_1 }; }\n    finally {\n        try {\n            if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n        }\n        finally { if (e_3) throw e_3.error; }\n    }\n    // Create HTML table\n    // Container + header\n    var table = document.createElement(\"table\");\n    table.setAttribute('aria-label', \"Table with \".concat(dataNodes.length, \" rows\"));\n    table.setAttribute('aria-level', String(level));\n    table.setAttribute('aria-posinset', '1');\n    table.setAttribute('aria-setsize', '1');\n    var tableBody = document.createElement(\"tbody\");\n    var thead = document.createElement(\"thead\");\n    var theadtr = document.createElement(\"tr\");\n    theadtr.setAttribute('aria-label', \"\".concat(orderedTableKeys === null || orderedTableKeys === void 0 ? void 0 : orderedTableKeys.join(', ')));\n    orderedTableKeys === null || orderedTableKeys === void 0 ? void 0 : orderedTableKeys.forEach(function (key) {\n        var th = document.createElement(\"th\");\n        th.setAttribute('scope', 'col');\n        th.innerText = key;\n        th.setAttribute('aria-label', key);\n        theadtr.appendChild(th);\n    });\n    thead.appendChild(theadtr);\n    table.appendChild(thead);\n    // Individual rows\n    dataNodes.forEach(function (node, _) {\n        var dataRow = document.createElement(\"tr\");\n        dataRow.setAttribute('aria-label', \"\".concat(orderedTableKeys === null || orderedTableKeys === void 0 ? void 0 : orderedTableKeys.map(function (key, idx) { return \"\".concat(key, \": \").concat(orderedTableKeysMap[idx] === 'quantile' ? node.description.get('quantile')[0] : (0,_utils__WEBPACK_IMPORTED_MODULE_1__.fmtValue)(node.selected[0][key])); }).join(', ')));\n        orderedTableKeys === null || orderedTableKeys === void 0 ? void 0 : orderedTableKeys.forEach(function (key, idx) {\n            var value;\n            if (orderedTableKeysMap[idx] === 'quantile') {\n                value = node.description.get('quantile')[0];\n            }\n            else {\n                value = (0,_utils__WEBPACK_IMPORTED_MODULE_1__.fmtValue)(node.selected[0][key]);\n            }\n            var td = document.createElement(\"td\");\n            td.innerText = value;\n            td.setAttribute('aria-label', value);\n            dataRow.appendChild(td);\n        });\n        tableBody.appendChild(dataRow);\n    });\n    table.appendChild(tableBody);\n    return table;\n}\n\n\n//# sourceURL=webpack://olli/./src/Render/TreeView/index.ts?");

/***/ }),

/***/ "./src/Settings/commands.ts":
/*!**********************************!*\
  !*** ./src/Settings/commands.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"addCommandsBoxCommands\": () => (/* binding */ addCommandsBoxCommands),\n/* harmony export */   \"addMenuCommands\": () => (/* binding */ addMenuCommands),\n/* harmony export */   \"addTreeCommands\": () => (/* binding */ addTreeCommands),\n/* harmony export */   \"srSpeakingHack\": () => (/* binding */ srSpeakingHack)\n/* harmony export */ });\n/* harmony import */ var _Structure_Types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Structure/Types */ \"./src/Structure/Types.ts\");\n/* harmony import */ var _Render_TreeView__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Render/TreeView */ \"./src/Render/TreeView/index.ts\");\n/* harmony import */ var _index__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./index */ \"./src/Settings/index.ts\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils */ \"./src/utils.ts\");\nvar __values = (undefined && undefined.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\n\n\n\n\nfunction addMenuCommands(menu, t) {\n    menu.addEventListener('keydown', function (event) {\n        if (event.key === 'Escape') {\n            // \"Close\" menu by hiding it and moving focus back to the user's previous position in the tree\n            var menu_1 = document.getElementById('settings');\n            menu_1.setAttribute('style', 'display: none');\n            menu_1.setAttribute('aria-hidden', 'true');\n            setTimeout(function () {\n                t.setFocusToItem(t.lastFocusedItem);\n            }, 0);\n        }\n        else if (event.altKey && event.key === 'ArrowLeft') {\n            // Reorder custom preset items\n            var thisItem = document.activeElement;\n            if (thisItem && thisItem.nodeName === \"SELECT\") {\n                var thisDiv = thisItem.parentNode;\n                var previousDiv = thisDiv.previousElementSibling;\n                if (previousDiv != null) {\n                    // Change menu ordering\n                    // Note: don't want to call insertBefore(thisDiv, previousDiv)\n                    // because first parameter to insertBefore loses focus\n                    thisDiv.insertAdjacentElement('afterend', previousDiv);\n                    thisItem.focus();\n                    thisItem.setAttribute('aria-active', 'true');\n                    var hierarchyLevel_1 = thisItem.id.split('-')[0];\n                    srSpeakingHack((0,_index__WEBPACK_IMPORTED_MODULE_2__.prettifyTokenTuples)((0,_index__WEBPACK_IMPORTED_MODULE_2__.getCurrentCustom)(hierarchyLevel_1)));\n                }\n            }\n        }\n        else if (event.altKey && event.key === 'ArrowRight') {\n            var thisItem = document.activeElement;\n            if (thisItem && thisItem.nodeName === \"SELECT\") {\n                var thisDiv = thisItem.parentNode;\n                var nextDiv = thisDiv.nextElementSibling;\n                if (nextDiv != null) {\n                    thisDiv.parentNode.insertBefore(nextDiv, thisDiv);\n                    var hierarchyLevel_2 = thisItem.id.split('-')[0];\n                    srSpeakingHack((0,_index__WEBPACK_IMPORTED_MODULE_2__.prettifyTokenTuples)((0,_index__WEBPACK_IMPORTED_MODULE_2__.getCurrentCustom)(hierarchyLevel_2)));\n                }\n            }\n        }\n    });\n    // Keep settings menu a closed environment by blocking tab-forward at end and tab-back at beginning\n    var first = menu.firstElementChild;\n    var last = menu.lastElementChild;\n    first.addEventListener('keydown', function (event) {\n        if (event.key === \"Tab\" && event.shiftKey) {\n            event.preventDefault();\n        }\n    });\n    last.addEventListener('keydown', function (event) {\n        if (event.key === \"Tab\" && !event.shiftKey) {\n            event.preventDefault();\n        }\n    });\n}\nfunction addTreeCommands(treeElt, tree, t) {\n    treeElt.addEventListener('keydown', function (event) {\n        if (!(0,_utils__WEBPACK_IMPORTED_MODULE_3__.nodeIsTextInput)(document.activeElement)) {\n            if (event.key === 'm') {\n                // \"Open\" menu by making it visible and moving focus there\n                var menu = document.getElementById('settings');\n                var legend_1 = menu.firstElementChild;\n                menu.setAttribute('style', 'display: block');\n                menu.setAttribute('aria-hidden', 'false');\n                setTimeout(function () {\n                    legend_1.focus();\n                    legend_1.setAttribute('aria-selected', 'true');\n                }, 0);\n            }\n            if (event.key === 'i') {\n                // \"Open\" command dropdown by making it visible and moving focus there\n                var dropdown_1 = document.getElementById('command-dropdown-container');\n                dropdown_1.setAttribute('style', 'display: block');\n                dropdown_1.setAttribute('aria-hidden', 'false');\n                setTimeout(function () {\n                    dropdown_1.firstElementChild.focus();\n                    dropdown_1.setAttribute('aria-selected', 'true');\n                }, 0);\n            }\n        }\n    });\n}\nfunction addCommandsBoxCommands(commandsBox, tree, t) {\n    var dropdown = commandsBox.children[1];\n    commandsBox.addEventListener(\"change\", function () {\n        srSpeakingHack(dropdown.selectedOptions[0].text);\n    });\n    commandsBox.addEventListener('keydown', function (event) {\n        var e_1, _a, e_2, _b;\n        var settingsData = JSON.parse(localStorage.getItem('settingsData'));\n        if (event.key === 'Enter') {\n            var command_1 = dropdown.selectedOptions[0].value;\n            try {\n                for (var tokenType_1 = __values(_Structure_Types__WEBPACK_IMPORTED_MODULE_0__.tokenType), tokenType_1_1 = tokenType_1.next(); !tokenType_1_1.done; tokenType_1_1 = tokenType_1.next()) {\n                    var token = tokenType_1_1.value;\n                    if (command_1 === token) {\n                        // Read out the token for the current node in the tree\n                        var currentNode = t.lastFocusedItem.domNode;\n                        var treeNode = (0,_Render_TreeView__WEBPACK_IMPORTED_MODULE_1__.htmlNodeToTree)(currentNode, tree);\n                        if (treeNode.description.has(command_1)) {\n                            var hLevel = _Structure_Types__WEBPACK_IMPORTED_MODULE_0__.nodeTypeToHierarchyLevel[treeNode.type];\n                            var verbosity = document.getElementById(\"\".concat(hLevel, \"-verbosity\")).value;\n                            var length_1 = settingsData[hLevel][verbosity].find(function (x) { return x[0] === command_1; })[1];\n                            srSpeakingHack(treeNode.description.get(command_1)[length_1]);\n                        }\n                        else {\n                            srSpeakingHack(\"No \".concat(token, \" available\"));\n                        }\n                    }\n                    else if (command_1 === 'focus-' + token) {\n                        // 'Focus' the token by bringing it to the front\n                        _index__WEBPACK_IMPORTED_MODULE_2__.focusTokens[token] = true;\n                        (0,_Render_TreeView__WEBPACK_IMPORTED_MODULE_1__.rerenderTreeDescription)(tree, document.getElementById('tree-root'));\n                    }\n                }\n            }\n            catch (e_1_1) { e_1 = { error: e_1_1 }; }\n            finally {\n                try {\n                    if (tokenType_1_1 && !tokenType_1_1.done && (_a = tokenType_1.return)) _a.call(tokenType_1);\n                }\n                finally { if (e_1) throw e_1.error; }\n            }\n            if (command_1 === 'clear') { // Clear all focus\n                _Structure_Types__WEBPACK_IMPORTED_MODULE_0__.tokenType.forEach(function (token) {\n                    _index__WEBPACK_IMPORTED_MODULE_2__.focusTokens[token] = false;\n                });\n                (0,_Render_TreeView__WEBPACK_IMPORTED_MODULE_1__.rerenderTreeDescription)(tree, document.getElementById('tree-root'));\n            }\n            // Change one hierarchy level's verbosity\n            _Structure_Types__WEBPACK_IMPORTED_MODULE_0__.hierarchyLevel.forEach(function (hLevel) {\n                var e_3, _a;\n                if (hLevel === 'root') {\n                    return;\n                }\n                var dropdown = document.getElementById(hLevel + '-verbosity');\n                var settingLevels = Object.keys(settingsData[hLevel]);\n                try {\n                    for (var settingLevels_1 = __values(settingLevels), settingLevels_1_1 = settingLevels_1.next(); !settingLevels_1_1.done; settingLevels_1_1 = settingLevels_1.next()) {\n                        var sLevel = settingLevels_1_1.value;\n                        if (command_1 === hLevel + '-' + sLevel) {\n                            dropdown.value = sLevel;\n                            (0,_index__WEBPACK_IMPORTED_MODULE_2__.updateVerbosityDescription)(dropdown, tree);\n                            srSpeakingHack(\"\".concat(dropdown.id.split(\"-\")[0], \" verbosity set to \").concat(dropdown.value));\n                            return;\n                        }\n                    }\n                }\n                catch (e_3_1) { e_3 = { error: e_3_1 }; }\n                finally {\n                    try {\n                        if (settingLevels_1_1 && !settingLevels_1_1.done && (_a = settingLevels_1.return)) _a.call(settingLevels_1);\n                    }\n                    finally { if (e_3) throw e_3.error; }\n                }\n            });\n            var _loop_1 = function (length_2) {\n                if (typeof length_2 !== 'string')\n                    return \"continue\";\n                var num = Number(Object.values(_Structure_Types__WEBPACK_IMPORTED_MODULE_0__.tokenLength).find(function (v) { return typeof v === 'number' && _Structure_Types__WEBPACK_IMPORTED_MODULE_0__.tokenLength[v] === length_2; }));\n                var enumLength = _Structure_Types__WEBPACK_IMPORTED_MODULE_0__.tokenLength[num];\n                if (command_1 === length_2) {\n                    var currentNode = t.lastFocusedItem.domNode;\n                    var treeNode = (0,_Render_TreeView__WEBPACK_IMPORTED_MODULE_1__.htmlNodeToTree)(currentNode, tree);\n                    srSpeakingHack((0,_index__WEBPACK_IMPORTED_MODULE_2__.getDescriptionWithSettings)(treeNode, enumLength));\n                }\n            };\n            try {\n                for (var _c = __values(Object.values(_Structure_Types__WEBPACK_IMPORTED_MODULE_0__.tokenLength)), _d = _c.next(); !_d.done; _d = _c.next()) {\n                    var length_2 = _d.value;\n                    _loop_1(length_2);\n                }\n            }\n            catch (e_2_1) { e_2 = { error: e_2_1 }; }\n            finally {\n                try {\n                    if (_d && !_d.done && (_b = _c.return)) _b.call(_c);\n                }\n                finally { if (e_2) throw e_2.error; }\n            }\n        }\n        // Close menu and return to previous position in tree\n        if (event.key === 'Enter' || event.key === 'Escape') {\n            commandsBox.setAttribute('style', 'display: none');\n            commandsBox.setAttribute('aria-hidden', 'true');\n            t.setFocusToItem(t.lastFocusedItem);\n        }\n        // Closed environment, can't tab out\n        if (event.key === \"Tab\") {\n            event.preventDefault();\n        }\n    });\n}\nfunction srSpeakingHack(text) {\n    console.log('speaking:', text);\n    var elt = document.createElement('div');\n    elt.setAttribute('aria-live', 'assertive');\n    document.body.appendChild(elt);\n    window.setTimeout(function () {\n        elt.innerText = text;\n    }, 100);\n    window.setTimeout(function () {\n        elt.remove();\n    }, 1000);\n}\n\n\n//# sourceURL=webpack://olli/./src/Settings/commands.ts?");

/***/ }),

/***/ "./src/Settings/data.ts":
/*!******************************!*\
  !*** ./src/Settings/data.ts ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"defaultSettingsData\": () => (/* binding */ defaultSettingsData),\n/* harmony export */   \"tokenDescs\": () => (/* binding */ tokenDescs)\n/* harmony export */ });\n/* harmony import */ var _Structure_Types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Structure/Types */ \"./src/Structure/Types.ts\");\n\nvar Short = _Structure_Types__WEBPACK_IMPORTED_MODULE_0__.tokenLength.Short;\nvar Long = _Structure_Types__WEBPACK_IMPORTED_MODULE_0__.tokenLength.Long;\n// Note: when putting a number before quotation mark, add a space or else VoiceOver will read \n// the quotation mark as inches\nvar tokenDescs = {\n    'index': 'Index in set (e.g. \"1 of 5 \")',\n    'type': 'Type of element (e.g. \"temporal scale\", \"line chart\")',\n    'size': 'Size of children (e.g. \"10 values\")',\n    'data': 'Data value or range (e.g. \"0 to 800 \", \"price: 50 \")',\n    'aggregate': 'Aggregate statistics including minimum, maximum, and average (e.g. \"average: 50 \")',\n    'facet': 'Facet name (e.g. \"profit\" and \"expenditures\")',\n    'name': 'Name (e.g. \"x-axis titled price\")',\n    'children': 'Childrens names (e.g. at the root, \"axes titled date and price\") ',\n    'quantile': 'Quantile of current data (e.g. \"quartile: 1 \")'\n};\nvar defaultSettingsData = {\n    'facet': {\n        'high': [['index', Long], ['type', Long], ['name', Long], ['children', Long]],\n        'medium': [['type', Long], ['name', Long], ['children', Long]],\n        'low': [['type', Short], ['name', Short], ['children', Short]],\n    },\n    'axis': {\n        'high': [['name', Long], ['type', Long], ['data', Long], ['size', Long], ['facet', Long], ['aggregate', Long]],\n        'medium': [['name', Long], ['type', Long], ['data', Long]],\n        'low': [['name', Short], ['type', Short], ['data', Short]],\n    },\n    'section': {\n        'high': [['data', Long], ['index', Long], ['size', Long], ['facet', Long], ['aggregate', Long], ['quantile', Long]],\n        'medium': [['data', Long], ['size', Long], ['aggregate', Short], ['quantile', Short]],\n        'low': [['data', Short], ['size', Short]],\n    },\n    'datapoint': {\n        'high': [['data', Long], ['facet', Long], ['quantile', Long]],\n        'medium': [['data', Long]],\n        'low': [['data', Short]],\n    }\n};\n\n\n//# sourceURL=webpack://olli/./src/Settings/data.ts?");

/***/ }),

/***/ "./src/Settings/index.ts":
/*!*******************************!*\
  !*** ./src/Settings/index.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"focusTokens\": () => (/* binding */ focusTokens),\n/* harmony export */   \"getCurrentCustom\": () => (/* binding */ getCurrentCustom),\n/* harmony export */   \"getDescriptionWithSettings\": () => (/* binding */ getDescriptionWithSettings),\n/* harmony export */   \"getSettingsInfoForTable\": () => (/* binding */ getSettingsInfoForTable),\n/* harmony export */   \"prettifyTokenTuples\": () => (/* binding */ prettifyTokenTuples),\n/* harmony export */   \"renderCommandsBox\": () => (/* binding */ renderCommandsBox),\n/* harmony export */   \"renderMenu\": () => (/* binding */ renderMenu),\n/* harmony export */   \"updateVerbosityDescription\": () => (/* binding */ updateVerbosityDescription)\n/* harmony export */ });\n/* harmony import */ var _Structure_Types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Structure/Types */ \"./src/Structure/Types.ts\");\n/* harmony import */ var _Render_TreeView__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Render/TreeView */ \"./src/Render/TreeView/index.ts\");\n/* harmony import */ var _data__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./data */ \"./src/Settings/data.ts\");\n/* harmony import */ var _commands__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./commands */ \"./src/Settings/commands.ts\");\nvar __values = (undefined && undefined.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nvar __read = (undefined && undefined.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\n\n\n\n\n/**\n * Constructs the settings menu from the settings objects above\n * @param node The {@link AccessibilityTreeNode} being displayed\n * @returns An {@link HTMLElement} with the settings menu\n */\nfunction renderMenu(tree) {\n    // Get saved menu settings if they exist, otherwise save the default settings\n    var storedData = localStorage.getItem('settingsData');\n    var settingsData;\n    if (storedData) {\n        settingsData = JSON.parse(storedData);\n    }\n    else {\n        settingsData = _data__WEBPACK_IMPORTED_MODULE_2__.defaultSettingsData;\n        localStorage.setItem('settingsData', JSON.stringify(_data__WEBPACK_IMPORTED_MODULE_2__.defaultSettingsData));\n    }\n    // Make the menu container\n    var root = document.createElement(\"fieldset\");\n    root.setAttribute(\"id\", \"settings\");\n    var legend = document.createElement(\"legend\");\n    legend.setAttribute(\"tabindex\", \"0\");\n    legend.innerText = \"Settings Menu\";\n    legend.setAttribute('aria-label', legend.innerText);\n    root.appendChild(legend);\n    var close = document.createElement(\"button\");\n    close.addEventListener(\"click\", function (event) {\n        root.dispatchEvent(new KeyboardEvent('keydown', { 'key': 'Escape' }));\n    });\n    close.innerText = \"Close\";\n    root.appendChild(close);\n    // Make individual menus for each hierarchy level\n    Object.keys(settingsData).forEach(function (hierarchyLevel) {\n        // Verbosity options (high, low, custom)\n        root.appendChild(makeIndivVerbosityMenu(hierarchyLevel, tree));\n        // Menu to add custom preset - hidden until 'custom' option is selected\n        var cMenu = makeIndivCustomMenu(hierarchyLevel, tree);\n        cMenu.setAttribute('style', 'display: none');\n        cMenu.setAttribute('aria-hidden', 'true');\n        root.appendChild(cMenu);\n    });\n    var text = document.createElement('p');\n    text.innerText = 'Press escape to close the menu. Press m to open it.';\n    text.setAttribute('tabindex', '0');\n    text.setAttribute('aria-label', text.innerText);\n    root.appendChild(text);\n    return root;\n}\nfunction renderCommandsBox() {\n    var e_1, _a, e_2, _b, e_3, _c, e_4, _d, e_5, _e;\n    var dropdown = document.createElement('select');\n    dropdown.setAttribute('id', 'command-dropdown');\n    function createOption(text, value, container) {\n        var option = document.createElement('option');\n        option.innerText = text;\n        option.value = value;\n        container.appendChild(option);\n    }\n    try {\n        // Speak token\n        for (var tokenType_1 = __values(_Structure_Types__WEBPACK_IMPORTED_MODULE_0__.tokenType), tokenType_1_1 = tokenType_1.next(); !tokenType_1_1.done; tokenType_1_1 = tokenType_1.next()) {\n            var token = tokenType_1_1.value;\n            createOption(token, token, dropdown);\n        }\n    }\n    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n    finally {\n        try {\n            if (tokenType_1_1 && !tokenType_1_1.done && (_a = tokenType_1.return)) _a.call(tokenType_1);\n        }\n        finally { if (e_1) throw e_1.error; }\n    }\n    try {\n        // 'Focus' token by bringing up to front\n        for (var tokenType_2 = __values(_Structure_Types__WEBPACK_IMPORTED_MODULE_0__.tokenType), tokenType_2_1 = tokenType_2.next(); !tokenType_2_1.done; tokenType_2_1 = tokenType_2.next()) {\n            var token = tokenType_2_1.value;\n            createOption('focus ' + token, 'focus-' + token, dropdown);\n        }\n    }\n    catch (e_2_1) { e_2 = { error: e_2_1 }; }\n    finally {\n        try {\n            if (tokenType_2_1 && !tokenType_2_1.done && (_b = tokenType_2.return)) _b.call(tokenType_2);\n        }\n        finally { if (e_2) throw e_2.error; }\n    }\n    createOption('clear', 'clear', dropdown);\n    try {\n        // Read current node with different length settings\n        for (var _f = __values(Object.values(_Structure_Types__WEBPACK_IMPORTED_MODULE_0__.tokenLength)), _g = _f.next(); !_g.done; _g = _f.next()) {\n            var length_1 = _g.value;\n            if (typeof length_1 !== 'string')\n                continue; // values lists both string and numbers\n            createOption(length_1, length_1, dropdown);\n        }\n    }\n    catch (e_3_1) { e_3 = { error: e_3_1 }; }\n    finally {\n        try {\n            if (_g && !_g.done && (_c = _f.return)) _c.call(_f);\n        }\n        finally { if (e_3) throw e_3.error; }\n    }\n    try {\n        // Change one hierarchy level's verbosity\n        for (var hierarchyLevel_1 = __values(_Structure_Types__WEBPACK_IMPORTED_MODULE_0__.hierarchyLevel), hierarchyLevel_1_1 = hierarchyLevel_1.next(); !hierarchyLevel_1_1.done; hierarchyLevel_1_1 = hierarchyLevel_1.next()) {\n            var hLevel = hierarchyLevel_1_1.value;\n            if (hLevel === 'root')\n                continue;\n            var settingsData = JSON.parse(localStorage.getItem('settingsData'));\n            try {\n                for (var _h = (e_5 = void 0, __values(Object.keys(settingsData[hLevel]))), _j = _h.next(); !_j.done; _j = _h.next()) {\n                    var level = _j.value;\n                    createOption(hLevel + ' ' + level, hLevel + '-' + level, dropdown);\n                }\n            }\n            catch (e_5_1) { e_5 = { error: e_5_1 }; }\n            finally {\n                try {\n                    if (_j && !_j.done && (_e = _h.return)) _e.call(_h);\n                }\n                finally { if (e_5) throw e_5.error; }\n            }\n        }\n    }\n    catch (e_4_1) { e_4 = { error: e_4_1 }; }\n    finally {\n        try {\n            if (hierarchyLevel_1_1 && !hierarchyLevel_1_1.done && (_d = hierarchyLevel_1.return)) _d.call(hierarchyLevel_1);\n        }\n        finally { if (e_4) throw e_4.error; }\n    }\n    var label = document.createElement('label');\n    label.setAttribute('for', 'command-dropdown');\n    label.innerText = 'Choose command';\n    var container = document.createElement('div');\n    container.setAttribute('id', 'command-dropdown-container');\n    container.appendChild(label);\n    container.appendChild(dropdown);\n    return container;\n}\nfunction makeIndivVerbosityMenu(hierarchyLevel, tree) {\n    var e_6, _a;\n    var settingsData = JSON.parse(localStorage.getItem('settingsData'));\n    var options = settingsData[hierarchyLevel];\n    // Make the dropdown container\n    var dropdown = document.createElement('select');\n    dropdown.id = \"\".concat(hierarchyLevel, \"-verbosity\");\n    dropdown.addEventListener('change', function (event) {\n        updateVerbosityDescription(dropdown, tree);\n    });\n    var label = document.createElement('label');\n    label.setAttribute('for', \"\".concat(hierarchyLevel, \"-verbosity\"));\n    var desc = 'Description: ' + prettifyTokenTuples(options[Object.keys(options)[0]]);\n    label.innerText = capitalizeFirst(\"\".concat(hierarchyLevel, \" verbosity. \").concat(desc));\n    try {\n        // Add all preset options, plus 'custom' to make a new preset\n        for (var _b = __values(Object.keys(options)), _c = _b.next(); !_c.done; _c = _b.next()) {\n            var option = _c.value;\n            var opt = document.createElement('option');\n            opt.innerText = option;\n            opt.value = option;\n            dropdown.appendChild(opt);\n        }\n    }\n    catch (e_6_1) { e_6 = { error: e_6_1 }; }\n    finally {\n        try {\n            if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n        }\n        finally { if (e_6) throw e_6.error; }\n    }\n    var custom = document.createElement('option');\n    custom.innerText = 'custom';\n    custom.value = 'custom';\n    dropdown.appendChild(custom);\n    dropdown.addEventListener('change', function (event) {\n        if (dropdown.value !== 'custom') {\n            (0,_commands__WEBPACK_IMPORTED_MODULE_3__.srSpeakingHack)(\"\".concat(dropdown.id.split(\"-\")[0], \" verbosity set to \").concat(dropdown.value));\n        }\n        else {\n            (0,_commands__WEBPACK_IMPORTED_MODULE_3__.srSpeakingHack)('Custom menu open');\n        }\n    });\n    var container = document.createElement('div');\n    container.id = \"\".concat(hierarchyLevel, \"-verbosity-container\");\n    container.appendChild(label);\n    container.appendChild(dropdown);\n    return container;\n}\nfunction updateVerbosityDescription(dropdown, tree) {\n    var settingsData = JSON.parse(localStorage.getItem('settingsData'));\n    var hierarchyLevel = dropdown.id.split('-')[0];\n    var customMenu = document.getElementById(\"\".concat(hierarchyLevel, \"-custom\"));\n    var descriptionText = dropdown.nextElementSibling;\n    if (dropdown.value === 'custom') {\n        // Open the customization menu\n        customMenu.setAttribute('style', 'display: block');\n        customMenu.setAttribute('aria-hidden', 'false');\n        descriptionText.innerText = \"Create a custom preset using the preset menu. Set verbosity for each element; use alt+left and alt+right to reorder elements.\";\n    }\n    else {\n        // Close custom menu (if it was open)\n        customMenu.setAttribute('style', 'display: none');\n        customMenu.setAttribute('aria-hidden', 'true');\n        // Updates based on the new setting:\n        // description tokens listed in the menu\n        descriptionText.innerText = 'Description: ' + prettifyTokenTuples(settingsData[hierarchyLevel][dropdown.value]);\n        // node description in the tree\n        (0,_Render_TreeView__WEBPACK_IMPORTED_MODULE_1__.rerenderTreeDescription)(tree, document.getElementById('tree-root'));\n    }\n}\nfunction makeIndivCustomMenu(hierarchyLevel, tree) {\n    var e_7, _a, e_8, _b;\n    var tokens = _Structure_Types__WEBPACK_IMPORTED_MODULE_0__.hierarchyLevelToTokens[hierarchyLevel];\n    // Create overall container, plus one just for length dropdowns\n    var container = document.createElement('div');\n    container.id = \"\".concat(hierarchyLevel, \"-custom\");\n    var checkboxContainer = document.createElement('div');\n    checkboxContainer.id = \"\".concat(hierarchyLevel, \"-custom-options\");\n    var nameInput = document.createElement('input');\n    nameInput.type = 'text';\n    nameInput.id = \"\".concat(hierarchyLevel, \"-custom-name\");\n    var nameLabel = document.createElement('label');\n    nameLabel.setAttribute('for', \"\".concat(hierarchyLevel, \"-custom-name\"));\n    nameLabel.innerText = 'Custom preset name';\n    try {\n        // Create individual dropdowns\n        for (var tokens_1 = __values(tokens), tokens_1_1 = tokens_1.next(); !tokens_1_1.done; tokens_1_1 = tokens_1.next()) {\n            var token = tokens_1_1.value;\n            var dropdown = document.createElement('select');\n            dropdown.id = \"\".concat(hierarchyLevel, \"-\").concat(token);\n            try {\n                for (var _c = (e_8 = void 0, __values(['off', 'short', 'long'])), _d = _c.next(); !_d.done; _d = _c.next()) {\n                    var option = _d.value;\n                    var opt = document.createElement('option');\n                    opt.innerText = option;\n                    opt.value = option;\n                    dropdown.appendChild(opt);\n                }\n            }\n            catch (e_8_1) { e_8 = { error: e_8_1 }; }\n            finally {\n                try {\n                    if (_d && !_d.done && (_b = _c.return)) _b.call(_c);\n                }\n                finally { if (e_8) throw e_8.error; }\n            }\n            var label = document.createElement('label');\n            label.setAttribute('for', \"\".concat(hierarchyLevel, \"-\").concat(token));\n            label.innerText = _data__WEBPACK_IMPORTED_MODULE_2__.tokenDescs[token];\n            var div = document.createElement('div');\n            div.appendChild(dropdown);\n            div.appendChild(label);\n            checkboxContainer.append(div);\n        }\n    }\n    catch (e_7_1) { e_7 = { error: e_7_1 }; }\n    finally {\n        try {\n            if (tokens_1_1 && !tokens_1_1.done && (_a = tokens_1.return)) _a.call(tokens_1);\n        }\n        finally { if (e_7) throw e_7.error; }\n    }\n    var saveButton = document.createElement('button');\n    saveButton.innerText = 'Save';\n    saveButton.addEventListener('click', function (event) {\n        savePreset(hierarchyLevel, tree);\n    });\n    container.append(checkboxContainer);\n    container.appendChild(nameLabel);\n    container.appendChild(nameInput);\n    container.appendChild(saveButton);\n    return container;\n}\nfunction savePreset(hierarchyLevel, tree) {\n    var customMenu = document.getElementById(\"\".concat(hierarchyLevel, \"-custom\"));\n    // Close the custom menu since user is done with it\n    customMenu.setAttribute('style', 'display: none');\n    customMenu.setAttribute('aria-hidden', 'true');\n    // Store the new preset in settingsData\n    var settingsData = JSON.parse(localStorage.getItem('settingsData'));\n    var presetName = document.getElementById(\"\".concat(hierarchyLevel, \"-custom-name\")).value;\n    settingsData[hierarchyLevel][presetName] = getCurrentCustom(hierarchyLevel);\n    localStorage.setItem('settingsData', JSON.stringify(settingsData));\n    updateVerbosityDropdown(hierarchyLevel);\n    // Set the dropdown to this preset and update the description accordingly\n    // (acting as though user had selected their new preset from the dropdown menu)\n    var dropdown = document.getElementById(\"\".concat(hierarchyLevel, \"-verbosity\"));\n    dropdown.value = presetName;\n    updateVerbosityDescription(dropdown, tree);\n    dropdown.focus();\n    dropdown.setAttribute('aria-active', 'true');\n    function updateVerbosityDropdown(hierarchyLevel) {\n        var settingsData = JSON.parse(localStorage.getItem('settingsData'));\n        var oldMenu = document.getElementById(\"\".concat(hierarchyLevel, \"-verbosity-container\"));\n        oldMenu.replaceWith(makeIndivVerbosityMenu(hierarchyLevel, tree));\n    }\n    // add to the command prompt\n    var commands = document.getElementById('command-dropdown');\n    var option = document.createElement('option');\n    option.innerText = presetName;\n    option.value = presetName;\n    commands.appendChild(option);\n}\nfunction getCurrentCustom(hierarchyLevel) {\n    var e_9, _a;\n    var tokens = [];\n    try {\n        for (var _b = __values(document.getElementById(\"\".concat(hierarchyLevel, \"-custom-options\")).children), _c = _b.next(); !_c.done; _c = _b.next()) {\n            var tokenOption = _c.value;\n            var dropdown = tokenOption.firstElementChild;\n            if (dropdown.value === 'long') {\n                tokens.push([dropdown.id.split('-')[1], _Structure_Types__WEBPACK_IMPORTED_MODULE_0__.tokenLength.Long]);\n            }\n            else if (dropdown.value === 'short') {\n                tokens.push([dropdown.id.split('-')[1], _Structure_Types__WEBPACK_IMPORTED_MODULE_0__.tokenLength.Short]);\n            } // otherwise it's 'off', so don't push\n        }\n    }\n    catch (e_9_1) { e_9 = { error: e_9_1 }; }\n    finally {\n        try {\n            if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n        }\n        finally { if (e_9) throw e_9.error; }\n    }\n    return tokens;\n}\nvar focusTokens = Object.fromEntries(_Structure_Types__WEBPACK_IMPORTED_MODULE_0__.tokenType.map(function (token) { return [token, false]; }));\n/**\n * Given a node with all possible description tokens, return a formatted string\n * including only those tokens which the settings define as currently visible\n *\n * @param node A {@link AccessibilityTreeNode} with a description map\n * @returns A formatted string description for the node\n */\nfunction getDescriptionWithSettings(node, lengthFlag) {\n    var e_10, _a;\n    if (lengthFlag === void 0) { lengthFlag = undefined; }\n    var hierarchyLevel = _Structure_Types__WEBPACK_IMPORTED_MODULE_0__.nodeTypeToHierarchyLevel[node.type];\n    var includeOrder;\n    var tokenLengths = {}; // TODO string is actually TokenType but gave up on typing\n    var settingsData = JSON.parse(localStorage.getItem('settingsData'));\n    if (hierarchyLevel === 'root') {\n        // Cannot be changed by user; use default settings\n        includeOrder = _Structure_Types__WEBPACK_IMPORTED_MODULE_0__.hierarchyLevelToTokens[hierarchyLevel];\n        tokenLengths = Object.fromEntries(includeOrder.map(function (token) { return [token, _Structure_Types__WEBPACK_IMPORTED_MODULE_0__.tokenLength.Long]; }));\n    }\n    else {\n        var dropdown = document.getElementById(\"\".concat(hierarchyLevel, \"-verbosity\"));\n        var value = dropdown ? dropdown.value : 'high'; // If not yet initialized, use default of 'high' setting\n        includeOrder = settingsData[hierarchyLevel][value].map(function (x) { return x[0]; });\n        tokenLengths = Object.fromEntries(settingsData[hierarchyLevel][value]);\n    }\n    var description = [];\n    try {\n        for (var _b = __values(node.description.entries()), _c = _b.next(); !_c.done; _c = _b.next()) {\n            var _d = __read(_c.value, 2), token = _d[0], desc = _d[1];\n            if (includeOrder.includes(token) || focusTokens[token]) {\n                var length_2 = 0; // default to short if no info\n                if (lengthFlag) {\n                    // lengthFlag is a string from tokenLength enum; convert to its corresponding number\n                    length_2 = Number(Object.values(_Structure_Types__WEBPACK_IMPORTED_MODULE_0__.tokenLength).find(function (v) { return typeof v === 'number' && _Structure_Types__WEBPACK_IMPORTED_MODULE_0__.tokenLength[v] === lengthFlag; }));\n                }\n                else if (tokenLengths[token]) {\n                    length_2 = tokenLengths[token];\n                }\n                if (focusTokens[token]) { // put it up front\n                    description.unshift(desc[length_2]);\n                }\n                else { // use original order\n                    description[includeOrder.indexOf(token)] = desc[length_2];\n                }\n            }\n        }\n    }\n    catch (e_10_1) { e_10 = { error: e_10_1 }; }\n    finally {\n        try {\n            if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n        }\n        finally { if (e_10) throw e_10.error; }\n    }\n    function formatDescTokens(description) {\n        return description.filter(function (x) { return x.length > 0; }).map(capitalizeFirst).join('. ') + '.';\n    }\n    return formatDescTokens(description);\n}\nfunction getSettingsInfoForTable() {\n    var e_11, _a;\n    var settingsData = JSON.parse(localStorage.getItem('settingsData'));\n    var dropdown = document.getElementById(\"datapoint-verbosity\");\n    var value = dropdown ? dropdown.value : 'high'; // If not yet initialized, use default of 'high' setting\n    var includeOrder = settingsData['datapoint'][value].map(function (x) { return x[0]; });\n    var allTokens = settingsData['datapoint']['high'].map(function (x) { return x[0]; });\n    var settingOrders = {};\n    try {\n        for (var allTokens_1 = __values(allTokens), allTokens_1_1 = allTokens_1.next(); !allTokens_1_1.done; allTokens_1_1 = allTokens_1.next()) {\n            var token = allTokens_1_1.value;\n            settingOrders[token] = includeOrder.indexOf(token);\n        }\n    }\n    catch (e_11_1) { e_11 = { error: e_11_1 }; }\n    finally {\n        try {\n            if (allTokens_1_1 && !allTokens_1_1.done && (_a = allTokens_1.return)) _a.call(allTokens_1);\n        }\n        finally { if (e_11) throw e_11.error; }\n    }\n    return settingOrders;\n}\nfunction capitalizeFirst(s) {\n    return s.slice(0, 1).toUpperCase() + s.slice(1);\n}\nfunction prettifyTokenTuples(tups) {\n    var e_12, _a;\n    var result = '';\n    try {\n        for (var tups_1 = __values(tups), tups_1_1 = tups_1.next(); !tups_1_1.done; tups_1_1 = tups_1.next()) {\n            var _b = __read(tups_1_1.value, 2), option = _b[0], length_3 = _b[1];\n            result += \"\".concat(option, \" (\").concat(_Structure_Types__WEBPACK_IMPORTED_MODULE_0__.tokenLength[length_3], \"), \");\n        }\n    }\n    catch (e_12_1) { e_12 = { error: e_12_1 }; }\n    finally {\n        try {\n            if (tups_1_1 && !tups_1_1.done && (_a = tups_1.return)) _a.call(tups_1);\n        }\n        finally { if (e_12) throw e_12.error; }\n    }\n    return result.slice(0, -2);\n}\n\n\n//# sourceURL=webpack://olli/./src/Settings/index.ts?");

/***/ }),

/***/ "./src/Structure/Types.ts":
/*!********************************!*\
  !*** ./src/Structure/Types.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"hierarchyLevel\": () => (/* binding */ hierarchyLevel),\n/* harmony export */   \"hierarchyLevelToTokens\": () => (/* binding */ hierarchyLevelToTokens),\n/* harmony export */   \"nodeTypeToHierarchyLevel\": () => (/* binding */ nodeTypeToHierarchyLevel),\n/* harmony export */   \"tokenLength\": () => (/* binding */ tokenLength),\n/* harmony export */   \"tokenType\": () => (/* binding */ tokenType)\n/* harmony export */ });\nvar tokenType = [\"name\", \"index\", \"type\", \"children\", \"data\", \"size\", \"facet\", \"aggregate\", \"quantile\"];\nvar hierarchyLevel = ['root', 'facet', 'axis', 'section', 'datapoint'];\nvar tokenLength;\n(function (tokenLength) {\n    tokenLength[tokenLength[\"Short\"] = 0] = \"Short\";\n    tokenLength[tokenLength[\"Long\"] = 1] = \"Long\";\n})(tokenLength || (tokenLength = {}));\nvar nodeTypeToHierarchyLevel = {\n    'multiView': 'root',\n    'chart': 'facet',\n    'xAxis': 'axis',\n    'yAxis': 'axis',\n    'legend': 'axis',\n    'grid': 'axis',\n    'filteredData': 'section',\n    'data': 'datapoint',\n};\nvar hierarchyLevelToTokens = {\n    'root': ['name'],\n    'facet': ['index', 'type', 'name', 'children'],\n    'axis': ['name', 'type', 'data', 'size', 'facet', 'aggregate'],\n    'section': ['data', 'index', 'size', 'facet', 'aggregate', 'quantile'],\n    'datapoint': ['data', 'facet', 'quantile'],\n};\n\n\n//# sourceURL=webpack://olli/./src/Structure/Types.ts?");

/***/ }),

/***/ "./src/Structure/index.ts":
/*!********************************!*\
  !*** ./src/Structure/index.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"isNumeric\": () => (/* binding */ isNumeric),\n/* harmony export */   \"olliVisSpecToTree\": () => (/* binding */ olliVisSpecToTree)\n/* harmony export */ });\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils */ \"./src/utils.ts\");\n/* harmony import */ var _Types__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Types */ \"./src/Structure/Types.ts\");\nvar __read = (undefined && undefined.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spreadArray = (undefined && undefined.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nvar __values = (undefined && undefined.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\n\n\n/**\n * Constructs an {@link AccessibilityTree} from a visualization spec\n * @param olliVisSpec the {@link OlliVisSpec} to transform into a tree\n * @returns An {@link AccessibilityTree} for that spec\n */\nfunction olliVisSpecToTree(olliVisSpec) {\n    var fieldsUsed = getFieldsUsedForChart(olliVisSpec);\n    switch (olliVisSpec.type) {\n        case \"facetedChart\":\n            return {\n                root: olliVisSpecToNode(\"multiView\", olliVisSpec.selection || olliVisSpec.data, null, olliVisSpec, fieldsUsed),\n                fieldsUsed: fieldsUsed\n            };\n        case \"chart\":\n            return {\n                root: olliVisSpecToNode(\"chart\", olliVisSpec.selection || olliVisSpec.data, null, olliVisSpec, fieldsUsed),\n                fieldsUsed: fieldsUsed\n            };\n        default:\n            throw \"olliVisSpec.type \".concat(olliVisSpec.type, \" not handled in olliVisSpecToTree\");\n    }\n}\nfunction getFieldsUsedForChart(olliVisSpec) {\n    switch (olliVisSpec.type) {\n        case \"facetedChart\":\n            return __spreadArray([], __read(new Set(__spreadArray([olliVisSpec.facetedField], __read(__spreadArray([], __read(olliVisSpec.charts.values()), false).flatMap(function (chart) { return getFieldsUsedForChart(chart); })), false))), false);\n        case \"chart\":\n            return __spreadArray([], __read(new Set(olliVisSpec.axes.concat(olliVisSpec.legends).reduce(function (fields, guide) { return fields.concat(guide.field); }, []))), false);\n        default:\n            throw \"olliVisSpec.type \".concat(olliVisSpec.type, \" not handled in getFieldsUsedForChart\");\n    }\n}\nvar filterInterval = function (selection, field, lowerBound, upperBound) {\n    return selection.filter(function (datum) {\n        var value = datum[field];\n        if (value instanceof Date) {\n            var lowerBoundStr = String(lowerBound);\n            var upperBoundStr = String(upperBound);\n            if (lowerBoundStr.length === 4 && upperBoundStr.length === 4) {\n                value = value.getFullYear();\n            }\n        }\n        return value >= lowerBound && value < upperBound;\n    });\n};\nfunction axisValuesToIntervals(values) {\n    var ensureAxisValuesNumeric = function (values) {\n        var isStringArr = values.every(function (v) { return typeof v === 'string' || v instanceof String; });\n        if (isStringArr) {\n            return {\n                values: values.map(function (s) { return Number(s.replaceAll(',', '')); })\n            };\n        }\n        var isDateArr = values.every(function (v) { return v instanceof Date; });\n        if (isDateArr) {\n            return {\n                values: values.map(function (d) { return d.getTime(); }),\n                isDate: true\n            };\n        }\n        return {\n            values: values\n        };\n    };\n    var getEncodingValueIncrements = function (incrementArray, currentValue, index, array) {\n        var bounds;\n        var reducedIndex = index - 1;\n        if (index === 0 && currentValue === 0) {\n            return incrementArray;\n        }\n        else if (reducedIndex === -1 && currentValue !== 0) {\n            var incrementDifference = array[index + 1] - currentValue;\n            bounds = [(currentValue - incrementDifference), currentValue];\n        }\n        else if (index === array.length - 1) {\n            var incrementDifference = currentValue - array[index - 1];\n            var finalIncrement = currentValue + incrementDifference;\n            incrementArray.push([array[reducedIndex], currentValue]);\n            bounds = [currentValue, finalIncrement];\n        }\n        else {\n            bounds = [array[reducedIndex], array[reducedIndex + 1]];\n        }\n        incrementArray.push([bounds[0], bounds[1]]);\n        return incrementArray;\n    };\n    var res = ensureAxisValuesNumeric(values);\n    var increments = res.values.reduce(getEncodingValueIncrements, []);\n    if (res.isDate) {\n        return increments.map(function (value) { return [new Date(value[0]), new Date(value[1])]; });\n    }\n    return increments;\n}\n/**\n * Creates a {@link AccessibilityTreeNode} of the given parameters.\n * This function recursively constructs a tree and returns the root node of the tree.\n *\n * @param type The {@link NodeType} to construct\n * @param selected filtered list of data rows selected by the node\n * @param parent The parent {@link AccessibilityTreeNode} of the node\n * @param olliVisSpec The spec for the visualization\n * @param fieldsUsed The data fields that are used by encodings in the olliVisSpec\n * @param facetValue? If the spec is a faceted chart, the data value to facet on\n * @param filterValue? if the current node being constructed is a filteredData node, the FilterValue to filter on\n * @param guide? if the current node is associated with a guide, the guide spec\n * @param index? the index of the current node in its sibling list\n * @param length? the length of the list containing the current node and its siblings\n * @param gridIndex? if the current node being constructed is a grid node, the row/col coordinates of the node\n *\n * @returns The {@link AccessibilityTreeNode} from the provided parameters\n */\nfunction olliVisSpecToNode(type, selected, parent, olliVisSpec, fieldsUsed, facetValue, filterValue, guide, index, length, gridIndex) {\n    var node = {\n        type: type,\n        parent: parent,\n        selected: selected,\n        filterValue: filterValue,\n        gridIndex: gridIndex,\n        //\n        description: new Map(),\n        children: [],\n    };\n    var facetedChart = olliVisSpec;\n    var chart = olliVisSpec;\n    var sampleTableInfo = [];\n    switch (type) {\n        case \"multiView\":\n            node.children = __spreadArray([], __read(facetedChart.charts.entries()), false).map(function (_a, index, array) {\n                var _b = __read(_a, 2), facetValue = _b[0], chart = _b[1];\n                return olliVisSpecToNode(\"chart\", selected.filter(function (datum) { return String(datum[facetedChart.facetedField]) === facetValue; }), node, chart, fieldsUsed, facetValue, undefined, undefined, index, array.length);\n            });\n            break;\n        case \"chart\":\n            // remove some axes depending on mark type\n            var filteredAxes = chart.axes.filter(function (axis) {\n                if (chart.mark === 'bar' && axis.type === 'continuous') {\n                    // don't show continuous axis for bar charts\n                    return false;\n                }\n                return true;\n            });\n            node.children = __spreadArray(__spreadArray(__spreadArray([], __read(filteredAxes.map(function (axis) {\n                return olliVisSpecToNode(axis.axisType === 'x' ? 'xAxis' : 'yAxis', selected, node, chart, fieldsUsed, facetValue, undefined, axis);\n            })), false), __read(chart.legends.map(function (legend) {\n                return olliVisSpecToNode('legend', selected, node, chart, fieldsUsed, facetValue, undefined, legend);\n            })), false), __read((chart.mark === 'point' && filteredAxes.length === 2 && filteredAxes.every(function (axis) { return axis.type === 'continuous'; }) ? [\n                olliVisSpecToNode('grid', selected, node, chart, fieldsUsed, facetValue)\n            ] : [])), false);\n            break;\n        case \"xAxis\":\n        case \"yAxis\":\n            var axis_1 = guide;\n            switch (axis_1.type) {\n                case \"discrete\":\n                    node.children = axis_1.values.map(function (value, idx) {\n                        return olliVisSpecToNode('filteredData', selected.filter(function (d) { return String(d[axis_1.field]) === String(value); }), node, chart, fieldsUsed, facetValue, String(value), axis_1, idx, axis_1.values.length);\n                    });\n                    break;\n                case \"continuous\":\n                    var intervals_1 = axisValuesToIntervals(axis_1.values);\n                    node.children = intervals_1.map(function (_a, idx) {\n                        var _b = __read(_a, 2), a = _b[0], b = _b[1];\n                        return olliVisSpecToNode('filteredData', filterInterval(selected, axis_1.field, a, b), node, chart, fieldsUsed, facetValue, [a, b], axis_1, idx, intervals_1.length);\n                    });\n                    break;\n            }\n            break;\n        case \"legend\":\n            var legend_1 = guide;\n            switch (legend_1.type) {\n                case \"discrete\":\n                    node.children = legend_1.values.map(function (value, idx) {\n                        return olliVisSpecToNode('filteredData', selected.filter(function (d) { return String(d[legend_1.field]) === String(value); }), node, chart, fieldsUsed, facetValue, String(value), legend_1, idx, legend_1.values.length);\n                    });\n                    break;\n                case \"continuous\":\n                    // TODO currently unsupported\n                    break;\n            }\n            break;\n        case \"grid\":\n            var xAxis_1 = chart.axes.find(function (axis) { return axis.axisType === 'x'; });\n            var yAxis_1 = chart.axes.find(function (axis) { return axis.axisType === 'y'; });\n            var xIntervals = axisValuesToIntervals(xAxis_1.values);\n            var yIntervals_1 = axisValuesToIntervals(yAxis_1.values);\n            var cartesian = function () {\n                var a = [];\n                for (var _i = 0; _i < arguments.length; _i++) {\n                    a[_i] = arguments[_i];\n                }\n                return a.reduce(function (a, b) { return a.flatMap(function (d) { return b.map(function (e) { return [d, e].flat(); }); }); });\n            };\n            node.children = cartesian(xIntervals, yIntervals_1).map(function (_a, index) {\n                var _b = __read(_a, 4), x1 = _b[0], x2 = _b[1], y1 = _b[2], y2 = _b[3];\n                return olliVisSpecToNode('filteredData', filterInterval(filterInterval(selected, xAxis_1.field, x1, x2), yAxis_1.field, y1, y2), node, chart, fieldsUsed, facetValue, [[x1, x2], [y1, y2]], undefined, undefined, undefined, { i: Math.floor(index / yIntervals_1.length), j: index % yIntervals_1.length });\n            });\n            break;\n        case \"filteredData\":\n            node.children = selected.map(function (datum, index, array) {\n                return olliVisSpecToNode('data', [datum], node, chart, fieldsUsed, facetValue, undefined, guide, index, array.length);\n            });\n            break;\n        case \"data\":\n            // set the ordering of the fields for rendering to a table\n            // put the filter values last, since user already knows the value\n            node.tableKeys = fieldsUsed;\n            node.tableKeysMap = node.tableKeys.map(function (x) { return \"data\"; });\n            if (guide) {\n                node.tableKeys = node.tableKeys.filter(function (f) { return f !== guide.field; }).concat([guide.field]);\n            }\n            if (facetValue) {\n                var facetedField_1 = fieldsUsed[0];\n                node.tableKeys = node.tableKeys.filter(function (f) { return f !== facetedField_1; }).concat([facetedField_1]);\n                node.tableKeysMap[node.tableKeys.length - 1] = \"facet\";\n            }\n            node.tableKeys.push(\"quartile\");\n            node.tableKeysMap.push(\"quantile\");\n            break;\n        default:\n            throw \"Node type \".concat(type, \" not handled in olliVisSpecToNode\");\n    }\n    node.description = nodeToDesc(node, olliVisSpec, facetValue, guide, index, length);\n    return node;\n}\nfunction findNumericField(node, axis) {\n    var e_1, _a;\n    var field = undefined;\n    if (node.type !== 'data')\n        return field;\n    try {\n        for (var _b = __values(node.tableKeys.entries()), _c = _b.next(); !_c.done; _c = _b.next()) {\n            var _d = __read(_c.value, 2), idx = _d[0], key = _d[1];\n            if (node.tableKeysMap[idx] === 'facet' || // ignore special fields\n                node.tableKeysMap[idx] === 'quartile' ||\n                key === axis.field || // don't want to compute on the current axis field\n                !isNumeric('' + node.selected[0][key])) { // can only compute numeric quantiles\n                continue;\n            }\n            field = key;\n        }\n    }\n    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n    finally {\n        try {\n            if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n        }\n        finally { if (e_1) throw e_1.error; }\n    }\n    return field;\n}\nfunction findFirstDataChild(node) {\n    var e_2, _a;\n    if (node.type === 'data')\n        return node;\n    if (!node.children)\n        return undefined;\n    try {\n        for (var _b = __values(node.children), _c = _b.next(); !_c.done; _c = _b.next()) {\n            var child = _c.value;\n            if (child.type === 'data')\n                return child;\n            var recurse = findFirstDataChild(child);\n            if (recurse)\n                return recurse;\n        }\n    }\n    catch (e_2_1) { e_2 = { error: e_2_1 }; }\n    finally {\n        try {\n            if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n        }\n        finally { if (e_2) throw e_2.error; }\n    }\n}\n/**\n *\n * @param node The node whose description is being created\n * @returns A description based on the provided {@link AccessibilityTreeNode}\n */\nfunction nodeToDesc(node, olliVisSpec, facetValue, guide, idx, length) {\n    return _nodeToDesc(node, olliVisSpec, facetValue, guide, idx, length);\n    function _nodeToDesc(node, olliVisSpec, facetValue, guide, idx, length) {\n        var e_3, _a;\n        var chartType = function (chart) {\n            if (chart.mark === 'point') {\n                if (chart.axes.every(function (axis) { return axis.type === 'continuous'; })) {\n                    return 'scatterplot';\n                }\n                else {\n                    return 'dot plot';\n                }\n            }\n            return chart.mark ? \"\".concat(chart.mark, \" chart\") : '';\n        };\n        var chartTitle = function (chart) { return (chart.title || facetValue) ? \"\\\"\".concat(chart.title || facetValue, \"\\\"\") : ''; };\n        var authorDescription = function (chart) {\n            if (chart.description) {\n                var str = chart.description.trim();\n                if (!/.*[.?!]/g.test(str)) {\n                    str += '.';\n                }\n                return str + ' ';\n            }\n            return '';\n        };\n        var guideTitle = function (guide) { return \"titled \\\"\".concat(guide.title || guide.field, \"\\\"\"); };\n        var axisScaleType = function (axis) { return \"\".concat(axis.scaleType || axis.type, \" scale\"); };\n        var legendChannel = function (legend) { return legend.channel ? \"for \".concat(legend.channel) : ''; };\n        var pluralize = function (count, noun, suffix) {\n            if (suffix === void 0) { suffix = 's'; }\n            return \"\".concat(count, \" \").concat(noun).concat(count !== 1 ? suffix : '');\n        };\n        function ordinal_suffix_of(i) {\n            var j = i % 10, k = i % 100;\n            if (j == 1 && k != 11) {\n                return i + \"st\";\n            }\n            if (j == 2 && k != 12) {\n                return i + \"nd\";\n            }\n            if (j == 3 && k != 13) {\n                return i + \"rd\";\n            }\n            return i + \"th\";\n        }\n        var a_or_an_scale = function (scaleType) {\n            if (scaleType.charAt(0) === 'o') {\n                return \"an \".concat(scaleType);\n            }\n            return \"a \".concat(scaleType);\n        };\n        var facetValueStr = function (facetValue) { return facetValue ? \"\".concat(facetValue) : ''; };\n        var filteredValues = function (guideFilterValues) {\n            if (!guideFilterValues)\n                return '';\n            else if (Array.isArray(guideFilterValues)) {\n                return \"\".concat(guideFilterValues.map(function (v) { return (0,_utils__WEBPACK_IMPORTED_MODULE_0__.fmtValue)(v); }).join(' to '));\n            }\n            else {\n                return \"\\\"\".concat((0,_utils__WEBPACK_IMPORTED_MODULE_0__.fmtValue)(guideFilterValues), \"\\\"\");\n            }\n        };\n        var filteredValuesGrid = function (gridFilterValues) {\n            if (!gridFilterValues)\n                return '';\n            return \"\".concat(filteredValues(gridFilterValues[0]), \" and \").concat(filteredValues(gridFilterValues[1]));\n        };\n        var indexStr = function (index, length) { return index !== undefined && length !== undefined ? \"\".concat(index + 1, \" of \").concat(length) : ''; };\n        var datum = function (datum, node) {\n            var _a;\n            return (_a = node.tableKeys) === null || _a === void 0 ? void 0 : _a.map(function (field) {\n                // maybe just literally filter out symbol here, so it can be returned in parent function like it should be?\n                // would then need some new way to concat data and parent in settings format but that's ok probably\n                var value = (0,_utils__WEBPACK_IMPORTED_MODULE_0__.fmtValue)(datum[field]);\n                return \"\\\"\".concat(field, \"\\\": \\\"\").concat(value, \"\\\"\");\n            }).join(', ');\n        };\n        var capitalize = function (s) { return s.charAt(0).toUpperCase() + s.slice(1); };\n        var averageValue = function (data, field) {\n            return (0,_utils__WEBPACK_IMPORTED_MODULE_0__.fmtValue)(data.reduce(function (a, b) { return a + Number(b[field]); }, 0)\n                / data.length);\n        };\n        var maximumValue = function (data, field) {\n            return (0,_utils__WEBPACK_IMPORTED_MODULE_0__.fmtValue)(data.reduce(function (a, b) { return Math.max(a, Number(b[field])); }, Number(data[0][field])));\n        };\n        var minimumValue = function (data, field) {\n            return (0,_utils__WEBPACK_IMPORTED_MODULE_0__.fmtValue)(data.reduce(function (a, b) { return Math.min(a, Number(b[field])); }, Number(data[0][field])));\n        };\n        var chart = olliVisSpec;\n        var axis = guide;\n        var legend = guide;\n        function name(node) {\n            switch (node.type) {\n                case 'multiView':\n                    var title = chartTitle(olliVisSpec);\n                    return [\"faceted chart \".concat(title, \", \").concat(node.children.length, \" views\"), \"a faceted chart \".concat(title.length > 0 ? \"titled \".concat(title) : title, \" with \").concat(node.children.length, \" views\")];\n                case 'chart':\n                    title = chartTitle(olliVisSpec);\n                    return [title, title.length > 0 ? \"titled \".concat(title) : title];\n                case 'xAxis':\n                case 'yAxis':\n                    return Array(2).fill(\"\".concat(axis.axisType, \"-axis \").concat(guideTitle(axis)));\n                case 'legend':\n                    return Array(2).fill(\"legend \".concat(guideTitle(legend)));\n                case 'grid':\n                    return ['grid', \"grid view of \".concat(chartType(chart))];\n                default:\n                    throw \"Node type \".concat(node.type, \" does not have the token name.\");\n            }\n        }\n        function index(node) {\n            switch (node.type) {\n                case 'chart':\n                case 'filteredData':\n                    return Array(2).fill(indexStr(idx, length));\n                default:\n                    throw \"Node type \".concat(node.type, \" does not have the token index.\");\n            }\n        }\n        function type(node) {\n            switch (node.type) {\n                case 'chart':\n                    return Array(2).fill(chartType(chart));\n                case 'xAxis':\n                case 'yAxis':\n                    return [axisScaleType(axis), 'for ' + a_or_an_scale(axisScaleType(axis))];\n                case 'legend':\n                    return Array(2).fill(legendChannel(legend));\n                case 'grid':\n                    return ['', '']; // grid is weird\n                default:\n                    throw \"Node type \".concat(node.type, \" does not have the token type.\");\n            }\n        }\n        function children(node) {\n            switch (node.type) {\n                case 'chart':\n                    var first = chart.axes[0].title || chart.axes[0].field;\n                    var all = chart.axes.map(function (axis) { return \"\\\"\".concat(axis.title || axis.field, \"\\\"\"); });\n                    return chart.axes.length === 1 ?\n                        [\"axis \".concat(first), \"with axis \".concat(first)] :\n                        [\"axes \".concat(all.join(', ')), \"with axes \".concat(all.join(' and '))];\n                default:\n                    throw \"Node type \".concat(node.type, \" does not have the token children.\");\n            }\n        }\n        function data(node) {\n            var _a;\n            switch (node.type) {\n                case 'xAxis':\n                case 'yAxis':\n                case 'legend':\n                    var start = (0,_utils__WEBPACK_IMPORTED_MODULE_0__.fmtValue)(axis.values[0]);\n                    var next = (0,_utils__WEBPACK_IMPORTED_MODULE_0__.fmtValue)(axis.values[1]);\n                    var end = (0,_utils__WEBPACK_IMPORTED_MODULE_0__.fmtValue)(axis.values[axis.values.length - 1]);\n                    var total = pluralize(axis.values.length, 'value');\n                    return (axis.type === 'discrete') ?\n                        ((axis.values.length === 2) ?\n                            [\"2 values: \".concat(start, \", \").concat(next), \"with 2 values: \\\"\".concat(start, \"\\\" and \\\"\").concat(next, \"\\\"\")] :\n                            [\"\".concat(total, \" from \").concat(start, \" to \").concat(end), \"with \".concat(total, \" starting with \\\"\").concat(start, \"\\\" and ending with \\\"\").concat(end, \"\\\"\")]) :\n                        [\"from \".concat(start, \" to \").concat(end), \"with values from \\\"\".concat(start, \"\\\" to \\\"\").concat(end, \"\\\"\")];\n                case 'grid':\n                    return ['', '']; // grid is weird\n                case 'filteredData':\n                    if (((_a = node.parent) === null || _a === void 0 ? void 0 : _a.type) === 'grid') {\n                        var range = filteredValuesGrid(node.filterValue);\n                        return [range, \"Values from \".concat(range)];\n                    }\n                    else {\n                        var range = filteredValues(node.filterValue);\n                        return [range, \"Values from \".concat(range)];\n                    }\n                case 'data':\n                    return Array(2).fill(datum(node.selected[0], node));\n                default:\n                    throw \"Node type \".concat(node.type, \" does not have the token data.\");\n            }\n        }\n        function size(node) {\n            switch (node.type) {\n                case 'xAxis':\n                case 'yAxis':\n                case 'legend':\n                case 'grid':\n                case 'filteredData':\n                    return Array(2).fill(pluralize(node.children.length, 'value'));\n                default:\n                    throw \"Node type \".concat(node.type, \" does not have the token size.\");\n            }\n        }\n        function facet(node) {\n            switch (node.type) {\n                case 'xAxis':\n                case 'yAxis':\n                case 'legend':\n                case 'grid':\n                case 'filteredData':\n                case 'data':\n                    var fvs = facetValueStr(facetValue);\n                    return [fvs, fvs.length > 0 ? \"\\\"\".concat(fvs, \"\\\"\") : fvs];\n                default:\n                    throw \"Node type \".concat(node.type, \" does not have the token parent.\");\n            }\n        }\n        function aggregate(node) {\n            switch (node.type) {\n                case 'xAxis':\n                case 'yAxis':\n                case 'filteredData':\n                    var sampleChild = findFirstDataChild(node);\n                    if (!sampleChild || !axis || !node.selected.length)\n                        return ['', ''];\n                    var maybeField = findNumericField(sampleChild, axis);\n                    if (maybeField === undefined)\n                        return ['', ''];\n                    var field = String(maybeField);\n                    var avg = averageValue(node.selected, field);\n                    var max = maximumValue(node.selected, field);\n                    var min = minimumValue(node.selected, field);\n                    return [\"average \".concat(avg, \", maximum \").concat(max, \", minimum \").concat(min), \"the average for the \\\"\".concat(field, \"\\\" field is \").concat(avg, \", the maximum is \").concat(max, \", and the minimum is \").concat(min)];\n                case 'legend':\n                case 'grid':\n                    return ['', '']; // grid is weird\n                default:\n                    throw \"Node type \".concat(node.type, \" does not have the token aggregate.\");\n            }\n        }\n        function quantile(node) {\n            switch (node.type) {\n                case 'filteredData':\n                    // figure out what field we're calculating the quantile over\n                    var sampleChild = findFirstDataChild(node);\n                    if (!sampleChild || !axis || !node.parent || !node.selected.length)\n                        return ['', ''];\n                    var maybeField = findNumericField(sampleChild, axis);\n                    if (maybeField === undefined)\n                        return ['', ''];\n                    var field_1 = String(maybeField);\n                    // Identify the sections we're comparing against\n                    // Note - copy of the olliVisSpecToNode logic for guide types\n                    var sections = void 0;\n                    switch (node.parent.type) {\n                        case \"xAxis\":\n                        case \"yAxis\":\n                            var axis_2 = guide;\n                            switch (axis_2.type) {\n                                case \"discrete\":\n                                    sections = axis_2.values.map(function (value, idx) {\n                                        return node.parent.selected.filter(function (d) { return String(d[axis_2.field]) === String(value); });\n                                    });\n                                    break;\n                                case \"continuous\":\n                                    var intervals = axisValuesToIntervals(axis_2.values);\n                                    sections = intervals.map(function (_a, idx) {\n                                        var _b = __read(_a, 2), a = _b[0], b = _b[1];\n                                        return filterInterval(node.parent.selected, axis_2.field, a, b);\n                                    });\n                                    break;\n                            }\n                            break;\n                        case \"legend\":\n                            var legend_2 = guide;\n                            switch (legend_2.type) {\n                                case \"discrete\":\n                                    sections = legend_2.values.map(function (value, idx) {\n                                        return node.parent.selected.filter(function (d) { return String(d[legend_2.field]) === String(value); });\n                                    });\n                                    break;\n                                case \"continuous\":\n                                    return ['', ''];\n                            }\n                            break;\n                        case \"grid\":\n                            return ['', '']; // weird and don't want to deal with this\n                    }\n                    if (!sections) {\n                        return ['', ''];\n                    }\n                    // Actually calculate the averages and then the quantile\n                    var avgs_1 = [];\n                    sections.forEach(function (interval) {\n                        if (interval.length == 0) {\n                            avgs_1.push(0);\n                            return;\n                        }\n                        var avg = averageValue(interval, field_1);\n                        avgs_1.push(Number(avg));\n                    });\n                    avgs_1.sort(function (a, b) {\n                        return a - b;\n                    });\n                    var thisAvg = node.selected.length == 0 ? 0 : averageValue(node.selected, field_1);\n                    var sectionsPos = avgs_1.indexOf(Number(thisAvg)) / avgs_1.length;\n                    var sectionsQuart = Math.max(1, Math.ceil(sectionsPos * 4)); // pos is btwn 0 and 1, no quartile 0\n                    return [\"\".concat(ordinal_suffix_of(sectionsQuart), \" quartile by average\"), \"This section's average \".concat(field_1, \" is in the \").concat(ordinal_suffix_of(sectionsQuart), \" quartile  of all sections\")];\n                case 'data':\n                    // figure out what field we're calculating the quantile over\n                    if (!axis)\n                        return ['', ''];\n                    maybeField = findNumericField(node, axis);\n                    if (maybeField === undefined)\n                        return ['', ''];\n                    field_1 = String(maybeField);\n                    node.tableKeys[node.tableKeys.indexOf('quartile')] = \"quartile (\".concat(field_1, \")\");\n                    // actually calculate it\n                    var data_1 = node.parent.selected.map(function (x) { return x[field_1]; });\n                    data_1.sort(function (a, b) {\n                        return Number(a) - Number(b); // we checked they are numeric so this is fine\n                    });\n                    var dataPos = data_1.indexOf(node.selected[0][field_1]) / data_1.length;\n                    var dataQuart = '' + Math.max(1, Math.ceil(dataPos * 4));\n                    return [dataQuart, dataQuart];\n                default:\n                    throw \"Node type \".concat(node.type, \" does not have the token context.\");\n            }\n        }\n        var tokenFunctions = {\n            'name': name,\n            'index': index,\n            'type': type,\n            'children': children,\n            'data': data,\n            'size': size,\n            'facet': facet,\n            'aggregate': aggregate,\n            'quantile': quantile\n        };\n        var description = new Map();\n        try {\n            var tokens = _Types__WEBPACK_IMPORTED_MODULE_1__.hierarchyLevelToTokens[_Types__WEBPACK_IMPORTED_MODULE_1__.nodeTypeToHierarchyLevel[node.type]];\n            try {\n                for (var tokens_1 = __values(tokens), tokens_1_1 = tokens_1.next(); !tokens_1_1.done; tokens_1_1 = tokens_1.next()) {\n                    var token = tokens_1_1.value;\n                    description.set(token, tokenFunctions[token](node));\n                }\n            }\n            catch (e_3_1) { e_3 = { error: e_3_1 }; }\n            finally {\n                try {\n                    if (tokens_1_1 && !tokens_1_1.done && (_a = tokens_1.return)) _a.call(tokens_1);\n                }\n                finally { if (e_3) throw e_3.error; }\n            }\n        }\n        catch (e) {\n            throw \"Node type \".concat(node.type, \" not handled in nodeToDesc, threw: \").concat(e);\n        }\n        return description;\n    }\n}\nfunction isNumeric(value) {\n    if (typeof value === 'number') {\n        return true;\n    }\n    return !isNaN(value) && !isNaN(parseFloat(value));\n}\n\n\n//# sourceURL=webpack://olli/./src/Structure/index.ts?");

/***/ }),

/***/ "./src/Types.ts":
/*!**********************!*\
  !*** ./src/Types.ts ***!
  \**********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"chart\": () => (/* binding */ chart),\n/* harmony export */   \"facetedChart\": () => (/* binding */ facetedChart)\n/* harmony export */ });\nvar __assign = (undefined && undefined.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar chart = function (fields) {\n    return __assign(__assign({}, fields), { type: \"chart\" });\n};\nvar facetedChart = function (fields) {\n    return __assign(__assign({}, fields), { type: \"facetedChart\" });\n};\n\n\n//# sourceURL=webpack://olli/./src/Types.ts?");

/***/ }),

/***/ "./src/index.ts":
/*!**********************!*\
  !*** ./src/index.ts ***!
  \**********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"chart\": () => (/* reexport safe */ _Types__WEBPACK_IMPORTED_MODULE_7__.chart),\n/* harmony export */   \"facetedChart\": () => (/* reexport safe */ _Types__WEBPACK_IMPORTED_MODULE_7__.facetedChart),\n/* harmony export */   \"olli\": () => (/* binding */ olli)\n/* harmony export */ });\n/* harmony import */ var _Render_Table__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Render/Table */ \"./src/Render/Table/index.ts\");\n/* harmony import */ var _Render_TreeView_Tree__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Render/TreeView/Tree */ \"./src/Render/TreeView/Tree.ts\");\n/* harmony import */ var _Render_TreeView__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Render/TreeView */ \"./src/Render/TreeView/index.ts\");\n/* harmony import */ var _Structure__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Structure */ \"./src/Structure/index.ts\");\n/* harmony import */ var _Settings__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./Settings */ \"./src/Settings/index.ts\");\n/* harmony import */ var _Settings_commands__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./Settings/commands */ \"./src/Settings/commands.ts\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./utils */ \"./src/utils.ts\");\n/* harmony import */ var _Types__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./Types */ \"./src/Types.ts\");\n\n\n\n\n\n\n\n\n/**\n *\n * @param config The {@link OlliConfigOptions} object to specify how an accessible visualization should be generated.\n */\nfunction olli(olliVisSpec, config) {\n    var tree = (0,_Structure__WEBPACK_IMPORTED_MODULE_3__.olliVisSpecToTree)(olliVisSpec);\n    var htmlRendering = document.createElement(\"div\");\n    config = {\n        renderType: (config === null || config === void 0 ? void 0 : config.renderType) || 'tree',\n        onFocus: config === null || config === void 0 ? void 0 : config.onFocus\n    };\n    switch (config.renderType) {\n        case (\"table\"):\n            htmlRendering.appendChild((0,_Render_Table__WEBPACK_IMPORTED_MODULE_0__.renderTable)(tree.root.selected, tree.fieldsUsed));\n            break;\n        case ('tree'):\n        default:\n            var menu = (0,_Settings__WEBPACK_IMPORTED_MODULE_4__.renderMenu)(tree);\n            menu.setAttribute('style', 'display: none');\n            menu.setAttribute('aria-hidden', 'true');\n            htmlRendering.appendChild(menu);\n            var commandsMenu = (0,_Settings__WEBPACK_IMPORTED_MODULE_4__.renderCommandsBox)();\n            commandsMenu.setAttribute('style', 'display: none');\n            commandsMenu.setAttribute('aria-hidden', 'true');\n            htmlRendering.appendChild(commandsMenu);\n            var ul = (0,_Render_TreeView__WEBPACK_IMPORTED_MODULE_2__.renderTree)(tree);\n            var container = document.createElement('div');\n            container.classList.add('olli-vis');\n            container.setAttribute('role', 'application');\n            container.appendChild(ul);\n            htmlRendering.appendChild(container);\n            var t_1 = new _Render_TreeView_Tree__WEBPACK_IMPORTED_MODULE_1__.Tree(ul, config.onFocus);\n            t_1.init();\n            document.addEventListener('keypress', function (e) {\n                if (e.key === 't' && !t_1.currentlyTypingToken()) {\n                    t_1.setFocusToItem(t_1.rootTreeItem);\n                }\n            });\n            (0,_Settings_commands__WEBPACK_IMPORTED_MODULE_5__.addMenuCommands)(menu, t_1);\n            (0,_Settings_commands__WEBPACK_IMPORTED_MODULE_5__.addTreeCommands)(ul, tree, t_1);\n            (0,_Settings_commands__WEBPACK_IMPORTED_MODULE_5__.addCommandsBoxCommands)(commandsMenu, tree, t_1);\n            (0,_utils__WEBPACK_IMPORTED_MODULE_6__.updateGlobalStateOnRender)(t_1);\n            break;\n    }\n    return htmlRendering;\n}\n\n\n//# sourceURL=webpack://olli/./src/index.ts?");

/***/ }),

/***/ "./src/utils.ts":
/*!**********************!*\
  !*** ./src/utils.ts ***!
  \**********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"fmtValue\": () => (/* binding */ fmtValue),\n/* harmony export */   \"getOlliGlobalState\": () => (/* binding */ getOlliGlobalState),\n/* harmony export */   \"nodeIsTextInput\": () => (/* binding */ nodeIsTextInput),\n/* harmony export */   \"setOlliGlobalState\": () => (/* binding */ setOlliGlobalState),\n/* harmony export */   \"updateGlobalStateOnRender\": () => (/* binding */ updateGlobalStateOnRender)\n/* harmony export */ });\nvar __assign = (undefined && undefined.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar fmtValue = function (value) {\n    if (value instanceof Date) {\n        return value.toLocaleString(\"en-US\", { year: 'numeric', month: 'short', day: 'numeric' });\n    }\n    else if (typeof value !== 'string' && (!isNaN(value) && value % 1 != 0)) {\n        return Number(value).toFixed(2);\n    }\n    return String(value);\n};\nvar getOlliGlobalState = function () {\n    if (!window._olli) {\n        window._olli = {};\n    }\n    return window._olli;\n};\nvar setOlliGlobalState = function (state) {\n    window._olli = __assign(__assign({}, window._olli), state);\n};\nvar nodeIsTextInput = function (activeElement) {\n    switch (activeElement === null || activeElement === void 0 ? void 0 : activeElement.nodeName) {\n        case 'INPUT':\n        case 'TEXTAREA':\n        case 'SELECT':\n        case 'OPTION':\n            return true;\n    }\n    if (typeof (activeElement === null || activeElement === void 0 ? void 0 : activeElement.getAttribute('contenteditable')) === 'string')\n        return true;\n    return false;\n};\nvar updateGlobalStateOnRender = function (t) {\n    // append t to list of trees on page\n    setOlliGlobalState({\n        treesOnPage: (getOlliGlobalState().treesOnPage || []).concat([t])\n    });\n    // add key listener if not already attached\n    if (!getOlliGlobalState().keyListenerAttached) {\n        document.addEventListener('keydown', function (e) {\n            if (!nodeIsTextInput(document.activeElement)) {\n                var _a = getOlliGlobalState(), lastVisitedTree = _a.lastVisitedTree, treesOnPage = _a.treesOnPage;\n                switch (e.code) {\n                    case 'KeyT':\n                        var currentTree = lastVisitedTree || treesOnPage[0];\n                        if (currentTree.domNode.firstElementChild.getAttribute('aria-selected') === 'true') {\n                            // we are currently focusing on the root of this tree\n                            var idx = treesOnPage.indexOf(currentTree);\n                            if (e.shiftKey) {\n                                // shift + t means jump to the prev one\n                                if (idx > 0) {\n                                    var prev = treesOnPage[idx - 1];\n                                    prev.setFocusToItem(prev.rootTreeItem);\n                                }\n                                else {\n                                    // TODO play some sort of earcon / notification to indicate you are at a boundary\n                                }\n                            }\n                            else {\n                                // jump to the next one\n                                if (idx < treesOnPage.length - 1) {\n                                    var next = treesOnPage[idx + 1];\n                                    next.setFocusToItem(next.rootTreeItem);\n                                }\n                                else {\n                                    // TODO play some sort of earcon / notification to indicate you are at a boundary\n                                }\n                            }\n                        }\n                        else {\n                            // we are not focused on the root of the tree, so jump there\n                            currentTree.setFocusToItem(currentTree.rootTreeItem);\n                        }\n                        break;\n                }\n            }\n        });\n        setOlliGlobalState({ keyListenerAttached: true });\n    }\n};\n\n\n//# sourceURL=webpack://olli/./src/utils.ts?");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			id: moduleId,
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/compat get default export */
/******/ 	(() => {
/******/ 		// getDefaultExport function for compatibility with non-harmony modules
/******/ 		__webpack_require__.n = (module) => {
/******/ 			var getter = module && module.__esModule ?
/******/ 				() => (module['default']) :
/******/ 				() => (module);
/******/ 			__webpack_require__.d(getter, { a: getter });
/******/ 			return getter;
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/nonce */
/******/ 	(() => {
/******/ 		__webpack_require__.nc = undefined;
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module can't be inlined because the eval devtool is used.
/******/ 	var __webpack_exports__ = __webpack_require__("./src/index.ts");
/******/ 	
/******/ 	return __webpack_exports__;
/******/ })()
;
});
!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var r=t();for(var n in r)("object"==typeof exports?exports:e)[n]=r[n]}}(this,(()=>(()=>{"use strict";var e={144:(e,t,r)=>{r.d(t,{Z:()=>l});var n=r(81),i=r.n(n),a=r(645),o=r.n(a)()(i());o.push([e.id,'.olli-vis ul[role="tree"] {\n  margin: 0;\n  padding: 0;\n  list-style: none;\n}\n\n.olli-vis ul[role="tree"] li {\n  margin: 0;\n  padding: 0;\n  list-style: none;\n}\n\n.olli-vis [role="treeitem"][aria-expanded="false"] + [role="group"] {\n  display: none;\n}\n\n.olli-vis [role="treeitem"][aria-expanded="true"] + [role="group"] {\n  display: block;\n}\n\n.olli-vis [role="treeitem"][aria-expanded="false"] > ul {\n  display: none;\n}\n\n.olli-vis [role="treeitem"][aria-expanded="true"] > ul {\n  display: block;\n}\n\n/* .olli-vis [role="treeitem"],\n.olli-vis [role="treeitem"] span {\n  width: 9em;\n  margin: 0;\n  padding: 0.125em;\n  display: block;\n} */\n\n/* disable default keyboard focus styling for treeitems\n   Keyboard focus is styled with the following CSS */\n.olli-vis :focus {\n  outline: 0;\n}\n\n.olli-vis .focus,\n.olli-vis  span.focus,\n.olli-vis  [aria-selected="true"] {\n  border-color: black;\n  background-color: #eee;\n}\n\n.olli-vis .hover,\n.olli-vis  span:hover {\n  background-color: #ddd;\n}\n',""]);const l=o},645:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var r="",n=void 0!==t[5];return t[4]&&(r+="@supports (".concat(t[4],") {")),t[2]&&(r+="@media ".concat(t[2]," {")),n&&(r+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),r+=e(t),n&&(r+="}"),t[2]&&(r+="}"),t[4]&&(r+="}"),r})).join("")},t.i=function(e,r,n,i,a){"string"==typeof e&&(e=[[null,e,void 0]]);var o={};if(n)for(var l=0;l<this.length;l++){var s=this[l][0];null!=s&&(o[s]=!0)}for(var d=0;d<e.length;d++){var u=[].concat(e[d]);n&&o[u[0]]||(void 0!==a&&(void 0===u[5]||(u[1]="@layer".concat(u[5].length>0?" ".concat(u[5]):""," {").concat(u[1],"}")),u[5]=a),r&&(u[2]?(u[1]="@media ".concat(u[2]," {").concat(u[1],"}"),u[2]=r):u[2]=r),i&&(u[4]?(u[1]="@supports (".concat(u[4],") {").concat(u[1],"}"),u[4]=i):u[4]="".concat(i)),t.push(u))}},t}},81:e=>{e.exports=function(e){return e[1]}},379:e=>{var t=[];function r(e){for(var r=-1,n=0;n<t.length;n++)if(t[n].identifier===e){r=n;break}return r}function n(e,n){for(var a={},o=[],l=0;l<e.length;l++){var s=e[l],d=n.base?s[0]+n.base:s[0],u=a[d]||0,c="".concat(d," ").concat(u);a[d]=u+1;var f=r(c),p={css:s[1],media:s[2],sourceMap:s[3],supports:s[4],layer:s[5]};if(-1!==f)t[f].references++,t[f].updater(p);else{var h=i(p,n);n.byIndex=l,t.splice(l,0,{identifier:c,updater:h,references:1})}o.push(c)}return o}function i(e,t){var r=t.domAPI(t);return r.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;r.update(e=t)}else r.remove()}}e.exports=function(e,i){var a=n(e=e||[],i=i||{});return function(e){e=e||[];for(var o=0;o<a.length;o++){var l=r(a[o]);t[l].references--}for(var s=n(e,i),d=0;d<a.length;d++){var u=r(a[d]);0===t[u].references&&(t[u].updater(),t.splice(u,1))}a=s}}},569:e=>{var t={};e.exports=function(e,r){var n=function(e){if(void 0===t[e]){var r=document.querySelector(e);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(e){r=null}t[e]=r}return t[e]}(e);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");n.appendChild(r)}},216:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},565:(e,t,r)=>{e.exports=function(e){var t=r.nc;t&&e.setAttribute("nonce",t)}},795:e=>{e.exports=function(e){var t=e.insertStyleElement(e);return{update:function(r){!function(e,t,r){var n="";r.supports&&(n+="@supports (".concat(r.supports,") {")),r.media&&(n+="@media ".concat(r.media," {"));var i=void 0!==r.layer;i&&(n+="@layer".concat(r.layer.length>0?" ".concat(r.layer):""," {")),n+=r.css,i&&(n+="}"),r.media&&(n+="}"),r.supports&&(n+="}");var a=r.sourceMap;a&&"undefined"!=typeof btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),t.styleTagTransform(n,e,t.options)}(t,e,r)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},589:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}}},t={};function r(n){var i=t[n];if(void 0!==i)return i.exports;var a=t[n]={id:n,exports:{}};return e[n](a,a.exports,r),a.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.nc=void 0;var n={};return(()=>{r.r(n),r.d(n,{chart:()=>ae,facetedChart:()=>oe,olli:()=>le});var e,t=function(){return t=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},t.apply(this,arguments)},i=function(e){return e instanceof Date?e.toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric"}):"string"==typeof e||isNaN(e)||e%1==0?String(e):Number(e).toFixed(2)},a=function(){return window._olli||(window._olli={}),window._olli},o=function(e){window._olli=t(t({},window._olli),e)},l=function(e){switch(null==e?void 0:e.nodeName){case"INPUT":case"TEXTAREA":case"SELECT":case"OPTION":return!0}return"string"==typeof(null==e?void 0:e.getAttribute("contenteditable"))},s=function(){function e(e,t,r){e.tabIndex=-1,this.tree=t,this.domNode=e,this.isExpandable=!1,this.isVisible=!1,this.inGroup=!1,r&&(this.inGroup=!0),this.parent=r,this.children=[];for(var n=e.firstElementChild;n;){if(["ul","table","thead","tbody","tr","td","th"].includes(n.tagName.toLowerCase())){this.isExpandable=!0;break}n=n.nextElementSibling}this.keyCode=Object.freeze({RETURN:13,SPACE:32,PAGEUP:33,PAGEDOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,X:88,Y:89,L:76,G:71,W:87,A:65,S:83,D:68,ESCAPE:27,PLUS:107,MINUS:189})}return e.prototype.init=function(){this.domNode.tabIndex=-1,this.domNode.addEventListener("keydown",this.handleKeydown.bind(this)),this.domNode.addEventListener("click",this.handleClick.bind(this)),this.domNode.addEventListener("focus",this.handleFocus.bind(this)),this.domNode.addEventListener("blur",this.handleBlur.bind(this)),this.isExpandable||(this.domNode.addEventListener("mouseover",this.handleMouseOver.bind(this)),this.domNode.addEventListener("mouseout",this.handleMouseOut.bind(this)))},e.prototype.isExpanded=function(){return!!this.isExpandable&&"true"===this.domNode.getAttribute("aria-expanded")},e.prototype.handleKeydown=function(e){e.altKey||e.ctrlKey||e.metaKey||this.checkBaseKeys(e)},e.prototype.checkBaseKeys=function(e){var t=!1,r=this.tree.currentlyTypingToken();switch(e.key){case"Enter":case" ":this.isExpandable&&(this.isExpanded()?this.tree.collapseTreeItem(this):this.tree.expandTreeItem(this)),t=!0;break;case"ArrowDown":this.children.length>0&&this.isExpandable&&(this.tree.expandTreeItem(this),this.tree.setFocusToNextLayer(this)),t=!0;break;case"Escape":case"ArrowUp":this.inGroup&&(this.tree.setFocusToParentItem(this),t=!0);break;case"ArrowLeft":this.tree.setFocusToPreviousItem(this),t=!0;break;case"ArrowRight":this.tree.setFocusToNextItem(this),t=!0;break;case"Home":this.parent&&(this.tree.setFocusToFirstInLayer(this),t=!0);break;case"End":this.parent&&(this.tree.setFocusToLastInLayer(this),t=!0);break;case"x":r||this.tree.focusOnNodeType("xAxis",this);break;case"y":r||this.tree.focusOnNodeType("yAxis",this);break;case"l":r||this.tree.focusOnNodeType("legend",this);break;case"w":r||this.tree.setFocusGridUp(this);break;case"a":r||this.tree.setFocusGridLeft(this);break;case"s":r||this.tree.setFocusGridDown(this);break;case"d":r||this.tree.setFocusGridRight(this)}t&&(e.stopPropagation(),e.preventDefault())},e.prototype.handleClick=function(e){this.isExpandable?(this.isExpanded()?this.tree.collapseTreeItem(this):this.tree.expandTreeItem(this),e.stopPropagation()):(this.tree.setFocusToItem(this),e.stopPropagation())},e.prototype.handleFocus=function(){var e=this.domNode;this.isExpandable&&(e=e.firstElementChild),e.classList.add("focus")},e.prototype.handleBlur=function(){var e=this.domNode;this.isExpandable&&(e=e.firstElementChild),e.classList.remove("focus")},e.prototype.handleMouseOver=function(e){e.currentTarget.classList.add("hover")},e.prototype.handleMouseOut=function(e){e.currentTarget.classList.remove("hover")},e}(),d=function(){function e(e,t){this.currentlyTypingToken=function(){if(document.activeElement&&(document.activeElement.id.endsWith("custom-name")||"command-dropdown"===document.activeElement.id))return!0},this.domNode=e,this.treeItems=[],this.onFocus=t}return e.prototype.init=function(){!function e(t,r,n){for(var i=t.firstElementChild,a=n;i;)["li","table","tr","th","td"].includes(i.tagName.toLowerCase())&&((a=new s(i,r,n)).init(),n&&n.children.push(a),r.treeItems.push(a)),i.firstElementChild&&e(i,r,a),i=i.nextElementSibling}(this.domNode,this,void 0),this.updateVisibleTreeItems(),this.rootTreeItem.domNode.tabIndex=0,this.lastFocusedItem=this.rootTreeItem},e.prototype.setFocusToItem=function(e){for(var t=0;t<this.treeItems.length;t++){var r=this.treeItems[t];r===e?(r.domNode.tabIndex=0,r.domNode.focus(),r.domNode.setAttribute("aria-selected","true"),this.lastFocusedItem=r,this.onFocus&&this.onFocus(r.domNode),o({lastVisitedTree:this})):(r.domNode.tabIndex=-1,r.domNode.setAttribute("aria-selected","false"))}},e.prototype.setFocusToNextItem=function(e){if(e.parent){var t=e.parent.children.indexOf(e);t<e.parent.children.length-1&&this.setFocusToItem(e.parent.children[t+1])}},e.prototype.setFocusToPreviousItem=function(e){if(e.parent){var t=e.parent.children.indexOf(e);t>0&&this.setFocusToItem(e.parent.children[t-1])}},e.prototype.setFocusToNextLayer=function(e){e.lastVisitedChild?this.setFocusToItem(e.lastVisitedChild):this.setFocusToItem(e.children[0])},e.prototype.setFocusToParentItem=function(e){e.parent&&(e.parent.lastVisitedChild=e,this.setFocusToItem(e.parent),e.parent.isExpandable&&e.parent.isExpanded()&&this.collapseTreeItem(e.parent))},e.prototype.setFocusToFirstInLayer=function(e){e.parent&&this.setFocusToItem(e.parent.children[0])},e.prototype.setFocusToLastInLayer=function(e){e.parent&&this.setFocusToItem(e.parent.children[e.parent.children.length-1])},e.prototype.setFocusGridLeft=function(e){var t=e.domNode.getAttribute("data-i"),r=e.domNode.getAttribute("data-j");if(t&&r){var n=this.treeItems.find((function(e){return e.domNode.getAttribute("data-i")===String(Number(t)-1)&&e.domNode.getAttribute("data-j")===String(r)}));n&&this.setFocusToItem(n)}},e.prototype.setFocusGridRight=function(e){var t=e.domNode.getAttribute("data-i"),r=e.domNode.getAttribute("data-j");if(t&&r){var n=this.treeItems.find((function(e){return e.domNode.getAttribute("data-i")===String(Number(t)+1)&&e.domNode.getAttribute("data-j")===String(r)}));n&&this.setFocusToItem(n)}},e.prototype.setFocusGridUp=function(e){var t=e.domNode.getAttribute("data-i"),r=e.domNode.getAttribute("data-j");if(t&&r){var n=this.treeItems.find((function(e){return e.domNode.getAttribute("data-i")===String(t)&&e.domNode.getAttribute("data-j")===String(Number(r)+1)}));n&&this.setFocusToItem(n)}},e.prototype.setFocusGridDown=function(e){var t=e.domNode.getAttribute("data-i"),r=e.domNode.getAttribute("data-j");if(t&&r){var n=this.treeItems.find((function(e){return e.domNode.getAttribute("data-i")===String(t)&&e.domNode.getAttribute("data-j")===String(Number(r)-1)}));n&&this.setFocusToItem(n)}},e.prototype.expandTreeItem=function(e){e.isExpandable&&(e.parent&&e.parent.children.forEach((function(t){t!==e&&t.domNode.setAttribute("aria-expanded","false")})),e.domNode.setAttribute("aria-expanded","true"),this.updateVisibleTreeItems())},e.prototype.collapseTreeItem=function(e){var t;e.isExpanded()?t=e:e.parent&&(t=e.parent),t&&(t.domNode.setAttribute("aria-expanded","false"),this.updateVisibleTreeItems(),this.setFocusToItem(t))},e.prototype.updateVisibleTreeItems=function(){this.rootTreeItem=this.treeItems[0];for(var e=0;e<this.treeItems.length;e++){var t=this.treeItems[e],r=t.domNode.parentNode;for(t.isVisible=!0;r&&r!==this.domNode;)"false"==r.getAttribute("aria-expanded")&&(t.isVisible=!1),r=r.parentNode}},e.prototype.focusOnNodeType=function(e,t){for(var r=this,n=function(e){e&&e.isExpandable&&!e.isExpanded()&&(r.expandTreeItem(e),n(e.parent))},i=function(e){e.children.forEach((function(e){e.isExpandable&&e.isExpanded()&&(i(e),r.collapseTreeItem(e))}))},a=t.domNode.getAttribute("data-nodetype"),o=t;"chart"!==a;){if(!a)return;if(!o.parent)return;a=(o=o.parent).domNode.getAttribute("data-nodetype")}var l=o.children.find((function(t){var r=t.domNode.getAttribute("data-nodetype");return e===r}));l&&(n(l),i(l),this.setFocusToItem(l))},e}(),u=["name","index","type","children","data","size","facet","depth","aggregate","quantile"],c=["root","facet","axis","section","datapoint"];!function(e){e[e.Short=0]="Short",e[e.Long=1]="Long"}(e||(e={}));var f={multiView:"root",chart:"facet",xAxis:"axis",yAxis:"axis",legend:"axis",grid:"axis",filteredData:"section",data:"datapoint"},p={root:["name"],facet:["index","type","name","children","depth"],axis:["name","type","data","size","facet","aggregate","depth"],section:["data","index","size","facet","aggregate","quantile","depth"],datapoint:["data","facet","quantile"]},h=e.Short,m=e.Long,v={index:'Index in set (e.g. "1 of 5 ")',type:'Type of element (e.g. "temporal scale", "line chart")',size:'Size of children (e.g. "10 values")',data:'Data value or range (e.g. "0 to 800 ", "price: 50 ")',aggregate:'Aggregate statistics including minimum, maximum, and average (e.g. "average: 50 ")',facet:'Facet name (e.g. "profit" and "expenditures")',name:'Name (e.g. "x-axis titled price")',children:'Childrenâ€™s names (e.g. at the root, "axes titled date and price") ',quantile:'Quantile of current data (e.g. "quartile: 1 ")',depth:'Depth of element in tree (e.g. "depth: 3 ")'},y={facet:{high:[["index",m],["type",m],["name",m],["children",m],["depth",m]],medium:[["type",m],["name",m],["children",m]],low:[["type",h],["name",h],["children",h]]},axis:{high:[["name",m],["type",m],["data",m],["size",m],["facet",m],["aggregate",m],["depth",m]],medium:[["name",m],["type",m],["data",m]],low:[["name",h],["type",h],["data",h]]},section:{high:[["data",m],["index",m],["size",m],["facet",m],["aggregate",m],["quantile",m],["depth",m]],medium:[["data",m],["size",m],["aggregate",h],["quantile",h]],low:[["data",h],["size",h]]},datapoint:{high:[["data",m],["facet",m],["quantile",m]],medium:[["data",m]],low:[["data",h]]}},g=function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};function b(e){console.log("speaking:",e);var t=document.createElement("div");t.setAttribute("aria-live","assertive"),document.body.appendChild(t),window.setTimeout((function(){t.innerText=e}),100),window.setTimeout((function(){t.remove()}),1e3)}var x=function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},E=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,a=r.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)o.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(i)throw i.error}}return o};function w(e,t){var r,n,i=JSON.parse(localStorage.getItem("settingsData"))[e],a=document.createElement("select");a.id=e+"-verbosity";var o=document.createElement("label");o.setAttribute("for",e+"-verbosity");var l="Description: "+k(i[Object.keys(i)[0]]);o.innerText=I(e+" verbosity. "+l);try{for(var s=x(Object.keys(i)),d=s.next();!d.done;d=s.next()){var u=d.value,c=document.createElement("option");c.innerText=u,c.value=u,a.appendChild(c)}}catch(e){r={error:e}}finally{try{d&&!d.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}var f=document.createElement("option");f.innerText="custom",f.value="custom",a.appendChild(f),a.addEventListener("change",(function(e){A(a,t)}));var p=document.createElement("div");return p.id=e+"-verbosity-container",p.appendChild(o),p.appendChild(a),p}function A(e,t){var r=JSON.parse(localStorage.getItem("settingsData")),n=e.id.split("-")[0],i=document.getElementById(n+"-custom"),a=e.previousElementSibling;if("custom"===e.value)i.setAttribute("style","display: block"),i.setAttribute("aria-hidden","false"),a.innerText="Create a custom preset using the preset menu. Set verbosity for each element; use alt+left and alt+right to reorder elements.",b("Custom menu open");else{i.setAttribute("style","display: none"),i.setAttribute("aria-hidden","true");var o="Description: "+k(r[n][e.value]);a.innerText=I(n+" verbosity. "+o),R(t,document.getElementById("tree-root")),b(e.id.split("-")[0]+" verbosity set to "+e.value+". "+o)}}function T(t){var r,n,i=[];try{for(var a=x(document.getElementById(t+"-custom-options").children),o=a.next();!o.done;o=a.next()){var l=o.value.firstElementChild;"long"===l.value?i.push([l.id.split("-")[1],e.Long]):"short"===l.value&&i.push([l.id.split("-")[1],e.Short])}}catch(e){r={error:e}}finally{try{o&&!o.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}return i}var N=Object.fromEntries(u.map((function(e){return[e,!1]})));function S(t,r){var n,i;void 0===r&&(r=void 0);var a,o=f[t.type],l={},s=JSON.parse(localStorage.getItem("settingsData"));if("root"===o)a=p[o],l=Object.fromEntries(a.map((function(t){return[t,e.Long]})));else{var d=document.getElementById(o+"-verbosity"),u=d?d.value:"high";a=s[o][u].map((function(e){return e[0]})),l=Object.fromEntries(s[o][u])}var c=[];try{for(var h=x(t.description.entries()),m=h.next();!m.done;m=h.next()){var v=E(m.value,2),y=v[0],g=v[1];if(a.includes(y)||N[y]){var b=0;r?b=Number(Object.values(e).find((function(t){return"number"==typeof t&&e[t]===r}))):l[y]&&(b=l[y]),N[y]?c.unshift(g[b]):c[a.indexOf(y)]=g[b]}}}catch(e){n={error:e}}finally{try{m&&!m.done&&(i=h.return)&&i.call(h)}finally{if(n)throw n.error}}return function(e){return e.filter((function(e){return e.length>0})).map(I).join(". ")+"."}(c)}function I(e){return e.slice(0,1).toUpperCase()+e.slice(1)}function k(t){var r,n,i="";try{for(var a=x(t),o=a.next();!o.done;o=a.next()){var l=E(o.value,2),s=l[0],d=l[1];i+=s+" ("+e[d]+"), "}}catch(e){r={error:e}}finally{try{o&&!o.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}return i.slice(0,-2)}var C=r(379),O=r.n(C),F=r(795),L=r.n(F),j=r(569),D=r.n(j),K=r(565),M=r.n(K),V=r(216),q=r.n(V),P=r(589),B=r.n(P),U=r(144),G={};G.styleTagTransform=B(),G.setAttributes=M(),G.insert=D().bind(null,"head"),G.domAPI=L(),G.insertStyleElement=q(),O()(U.Z,G),U.Z&&U.Z.locals&&U.Z.locals;var z=function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},J=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,a=r.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)o.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(i)throw i.error}}return o};function R(e,t){var r,n;if(t.children.length)try{for(var i=z(t.children),a=i.next();!a.done;a=i.next()){var o=a.value;if("TABLE"===o.nodeName){var l=t.parentElement,s=_(l,e).children.filter((function(e){return"data"===e.type}));o.replaceWith(W(s,l.id.split("-").length))}else o.firstElementChild.innerText=S(_(o,e)),o.children[1]&&R(e,o.children[1])}}catch(e){r={error:e}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}}function _(e,t){var r,n,i=t.root,a=e.id.split("-").slice(2).map((function(e){return Number(e)}));try{for(var o=z(a),l=o.next();!l.done;l=o.next()){var s=l.value;i=i.children[s]}}catch(e){r={error:e}}finally{try{l&&!l.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return i}function W(e,t){var r,n,a=function(){var e,t,r=JSON.parse(localStorage.getItem("settingsData")),n=document.getElementById("datapoint-verbosity"),i=n?n.value:"high",a=r.datapoint[i].map((function(e){return e[0]})),o=r.datapoint.high.map((function(e){return e[0]})),l={};try{for(var s=x(o),d=s.next();!d.done;d=s.next()){var u=d.value;l[u]=a.indexOf(u)}}catch(t){e={error:t}}finally{try{d&&!d.done&&(t=s.return)&&t.call(s)}finally{if(e)throw e.error}}return l}(),o=[],l=[];e[0].tableKeys.forEach((function(t,r){var n=e[0].tableKeysMap[r];a[n]<0||("quantile"!=n||e[0].description.get("quantile")[0])&&(o.push(t),l.push(n))}));var s=[],d=[];try{for(var u=z(Object.entries(a).sort((function(e,t){return e[1]-t[1]}))),c=u.next();!c.done;c=u.next()){var f=J(c.value,2),p=f[0],h=(f[1],l.indexOf(p));h<0||(d.push(p),s.push(o[h]),"data"===p&&(d.push(p),s.push(o[h+1])))}}catch(e){r={error:e}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(r)throw r.error}}var m=document.createElement("table");m.setAttribute("aria-label","Table with "+e.length+" rows"),m.setAttribute("aria-level",String(t)),m.setAttribute("aria-posinset","1"),m.setAttribute("aria-setsize","1");var v=document.createElement("tbody"),y=document.createElement("thead"),g=document.createElement("tr");return g.setAttribute("aria-label",""+(null==s?void 0:s.join(", "))),null==s||s.forEach((function(e){var t=document.createElement("th");t.setAttribute("scope","col"),t.innerText=e,t.setAttribute("aria-label",e),g.appendChild(t)})),y.appendChild(g),m.appendChild(y),e.forEach((function(e,t){var r=document.createElement("tr");r.setAttribute("aria-label",""+(null==s?void 0:s.map((function(t,r){return t+": "+("quantile"===d[r]?e.description.get("quantile")[0]:i(e.selected[0][t]))})).join(", "))),null==s||s.forEach((function(t,n){var a;a="quantile"===d[n]?e.description.get("quantile")[0]:i(e.selected[0][t]);var o=document.createElement("td");o.innerText=a,o.setAttribute("aria-label",a),r.appendChild(o)})),v.appendChild(r)})),m.appendChild(v),m}var H=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,a=r.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)o.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(i)throw i.error}}return o},Z=function(e,t,r){if(r||2===arguments.length)for(var n,i=0,a=t.length;i<a;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))},X=function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};function Y(e){var t=Q(e);switch(e.type){case"facetedChart":return{root:te("multiView",e.selection||e.data,null,e,t),fieldsUsed:t};case"chart":return{root:te("chart",e.selection||e.data,null,e,t),fieldsUsed:t};default:throw"olliVisSpec.type "+e.type+" not handled in olliVisSpecToTree"}}function Q(e){switch(e.type){case"facetedChart":return Z([],H(new Set(Z([e.facetedField],H(Z([],H(e.charts.values()),!1).flatMap((function(e){return Q(e)}))),!1))),!1);case"chart":return Z([],H(new Set(e.axes.concat(e.legends).reduce((function(e,t){return e.concat(t.field)}),[]))),!1);default:throw"olliVisSpec.type "+e.type+" not handled in getFieldsUsedForChart"}}var $=function(e,t,r,n){return e.filter((function(e){var i=e[t];if(i instanceof Date){var a=String(r),o=String(n);4===a.length&&4===o.length&&(i=i.getFullYear())}return i>=r&&i<n}))};function ee(e){var t=function(e){return e.every((function(e){return"string"==typeof e||e instanceof String}))?{values:e.map((function(e){return Number(e.replaceAll(",",""))}))}:e.every((function(e){return e instanceof Date}))?{values:e.map((function(e){return e.getTime()})),isDate:!0}:{values:e}}(e),r=t.values.reduce((function(e,t,r,n){var i,a=r-1;if(0===r&&0===t)return e;if(-1===a&&0!==t)i=[t-(n[r+1]-t),t];else if(r===n.length-1){var o=t+(t-n[r-1]);e.push([n[a],t]),i=[t,o]}else i=[n[a],n[a+1]];return e.push([i[0],i[1]]),e}),[]);return t.isDate?r.map((function(e){return[new Date(e[0]),new Date(e[1])]})):r}function te(e,t,r,n,a,o,l,s,d,u,c,h){void 0===o&&(o=0);var m={type:e,parent:r,selected:t,filterValue:s,gridIndex:h,description:new Map,children:[]},v=n,y=n;switch(e){case"multiView":m.children=Z([],H(v.charts.entries()),!1).map((function(e,r,n){var i=H(e,2),l=i[0],s=i[1];return te("chart",t.filter((function(e){return String(e[v.facetedField])===l})),m,s,a,o+1,l,void 0,void 0,r,n.length)}));break;case"chart":var g=y.axes.filter((function(e){return"bar"!==y.mark||"continuous"!==e.type}));m.children=Z(Z(Z([],H(g.map((function(e){return te("x"===e.axisType?"xAxis":"yAxis",t,m,y,a,o+1,l,void 0,e)}))),!1),H(y.legends.map((function(e){return te("legend",t,m,y,a,o+1,l,void 0,e)}))),!1),H("point"===y.mark&&2===g.length&&g.every((function(e){return"continuous"===e.type}))?[te("grid",t,m,y,a,o+1,l)]:[]),!1);break;case"xAxis":case"yAxis":var b=d;switch(b.type){case"discrete":m.children=b.values.map((function(e,r){return te("filteredData",t.filter((function(t){return String(t[b.field])===String(e)})),m,y,a,o+1,l,String(e),b,r,b.values.length)}));break;case"continuous":var x=ee(b.values);m.children=x.map((function(e,r){var n=H(e,2),i=n[0],s=n[1];return te("filteredData",$(t,b.field,i,s),m,y,a,o+1,l,[i,s],b,r,x.length)}))}break;case"legend":var E=d;"discrete"===E.type&&(m.children=E.values.map((function(e,r){return te("filteredData",t.filter((function(t){return String(t[E.field])===String(e)})),m,y,a,o+1,l,String(e),E,r,E.values.length)})));break;case"grid":var w=y.axes.find((function(e){return"x"===e.axisType})),A=y.axes.find((function(e){return"y"===e.axisType})),T=ee(w.values),N=ee(A.values);m.children=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.reduce((function(e,t){return e.flatMap((function(e){return t.map((function(t){return[e,t].flat()}))}))}))}(T,N).map((function(e,r){var n=H(e,4),i=n[0],s=n[1],d=n[2],u=n[3];return te("filteredData",$($(t,w.field,i,s),A.field,d,u),m,y,a,o+1,l,[[i,s],[d,u]],void 0,void 0,void 0,{i:Math.floor(r/N.length),j:r%N.length})}));break;case"filteredData":m.children=t.map((function(e,t,r){return te("data",[e],m,y,a,o+1,l,void 0,d,t,r.length)}));break;case"data":if(m.tableKeys=a,m.tableKeysMap=m.tableKeys.map((function(e){return"data"})),d&&(m.tableKeys=m.tableKeys.filter((function(e){return e!==d.field})).concat([d.field])),l){var S=a[0];m.tableKeys=m.tableKeys.filter((function(e){return e!==S})).concat([S]),m.tableKeysMap[m.tableKeys.length-1]="facet"}m.tableKeys.push("quartile"),m.tableKeysMap.push("quantile");break;default:throw"Node type "+e+" not handled in olliVisSpecToNode"}return m.description=function(e,t,r,n,a,o,l){return function(e,t,r,n,a,o,l){var s,d,u=function(e){return"point"===e.mark?e.axes.every((function(e){return"continuous"===e.type}))?"scatterplot":"dot plot":e.mark?e.mark+" chart":""},c=function(e){return e.title||r?'"'+(e.title||r)+'"':""},h=function(e){return'titled "'+(e.title||e.field)+'"'},m=function(e){return(e.scaleType||e.type)+" scale"};function v(e){var t=e%10,r=e%100;return 1==t&&11!=r?e+"st":2==t&&12!=r?e+"nd":3==t&&13!=r?e+"rd":e+"th"}var y=function(e){return e?Array.isArray(e)?""+e.map((function(e){return i(e)})).join(" to "):'"'+i(e)+'"':""},g=function(e,t){return i(e.reduce((function(e,r){return e+Number(r[t])}),0)/e.length)},b=t,x=n,E=n;var w={name:function(e){switch(e.type){case"multiView":var r=c(t);return["faceted chart "+r+", "+e.children.length+" views","a faceted chart "+(r.length>0?"titled "+r:r)+" with "+e.children.length+" views"];case"chart":return[r=c(t),r.length>0?"titled "+r:r];case"xAxis":case"yAxis":return Array(2).fill(x.axisType+"-axis "+h(x));case"legend":return Array(2).fill("legend "+h(E));case"grid":return["grid","grid view of "+u(b)];default:throw"Node type "+e.type+" does not have the token name."}},index:function(e){switch(e.type){case"chart":case"filteredData":return Array(2).fill(function(e,t){return void 0!==e&&void 0!==t?e+1+" of "+t:""}(a,o));default:throw"Node type "+e.type+" does not have the token index."}},type:function(e){switch(e.type){case"chart":return Array(2).fill(u(b));case"xAxis":case"yAxis":return[m(x),"for "+(t=m(x),"o"===t.charAt(0)?"an "+t:"a "+t)];case"legend":return Array(2).fill(function(e){return e.channel?"for "+e.channel:""}(E));case"grid":return["",""];default:throw"Node type "+e.type+" does not have the token type."}var t},children:function(e){if("chart"===e.type){var t=b.axes[0].title||b.axes[0].field,r=b.axes.map((function(e){return'"'+(e.title||e.field)+'"'}));return 1===b.axes.length?["axis "+t,"with axis "+t]:["axes "+r.join(", "),"with axes "+r.join(" and ")]}throw"Node type "+e.type+" does not have the token children."},data:function(e){var t,r;switch(e.type){case"xAxis":case"yAxis":case"legend":var n=i(x.values[0]),a=i(x.values[1]),o=i(x.values[x.values.length-1]);return"discrete"===x.type?2===x.values.length?["2 values: "+n+", "+a,'with 2 values: "'+n+'" and "'+a+'"']:["from "+n+" to "+o,'with values starting with "'+n+'" and ending with "'+o+'"']:["from "+n+" to "+o,'with values from "'+n+'" to "'+o+'"'];case"grid":return["",""];case"filteredData":var l;return"grid"===(null===(t=e.parent)||void 0===t?void 0:t.type)?[(r=e.filterValue,l=r?y(r[0])+" and "+y(r[1]):""),"Values from "+l]:[l=y(e.filterValue),"Values from "+l];case"data":return Array(2).fill(function(e,t){var r;return null===(r=t.tableKeys)||void 0===r?void 0:r.map((function(t){return'"'+t+'": "'+i(e[t])+'"'})).join(", ")}(e.selected[0],e));default:throw"Node type "+e.type+" does not have the token data."}},size:function(e){switch(e.type){case"xAxis":case"yAxis":case"legend":case"grid":case"filteredData":return Array(2).fill((void 0===r&&(r="s"),(t=e.children.length)+" value"+(1!==t?r:"")));default:throw"Node type "+e.type+" does not have the token size."}var t,r},facet:function(e){switch(e.type){case"xAxis":case"yAxis":case"legend":case"grid":case"filteredData":case"data":var t=function(e){return e?""+e:""}(r);return[t,t.length>0?'"'+t+'"':t];default:throw"Node type "+e.type+" does not have the token parent."}},depth:function(e){return["depth "+l,"the tree depth is "+l]},aggregate:function(e){switch(e.type){case"xAxis":case"yAxis":case"filteredData":var t=ne(e);if(!t||!x||!e.selected.length)return["",""];var r=re(t,x);if(void 0===r)return["",""];var n=String(r),a=g(e.selected,n),o=function(e,t){return i(e.reduce((function(e,r){return Math.max(e,Number(r[t]))}),Number(e[0][t])))}(e.selected,n),l=function(e,t){return i(e.reduce((function(e,r){return Math.min(e,Number(r[t]))}),Number(e[0][t])))}(e.selected,n);return["average "+a+", maximum "+o+", minimum "+l,'the average for the "'+n+'" field is '+a+", the maximum is "+o+", and the minimum is "+l];case"legend":case"grid":return["",""];default:throw"Node type "+e.type+" does not have the token aggregate."}},quantile:function(e){switch(e.type){case"filteredData":var t=ne(e);if(!(t&&x&&e.parent&&e.selected.length))return["",""];var r=re(t,x);if(void 0===r)return["",""];var i=String(r),a=void 0;switch(e.parent.type){case"xAxis":case"yAxis":var o=n;switch(o.type){case"discrete":a=o.values.map((function(t,r){return e.parent.selected.filter((function(e){return String(e[o.field])===String(t)}))}));break;case"continuous":a=ee(o.values).map((function(t,r){var n=H(t,2),i=n[0],a=n[1];return $(e.parent.selected,o.field,i,a)}))}break;case"legend":var l=n;switch(l.type){case"discrete":a=l.values.map((function(t,r){return e.parent.selected.filter((function(e){return String(e[l.field])===String(t)}))}));break;case"continuous":return["",""]}break;case"grid":return["",""]}if(!a)return["",""];var s=[];a.forEach((function(e){if(0!=e.length){var t=g(e,i);s.push(Number(t))}else s.push(0)})),s.sort((function(e,t){return e-t}));var d=0==e.selected.length?0:g(e.selected,i),u=s.indexOf(Number(d))/s.length,c=Math.max(1,Math.ceil(4*u));return[v(c)+" quartile by average","This section's average "+i+" is in the "+v(c)+" quartile  of all sections"];case"data":if(!x)return["",""];if(void 0===(r=re(e,x)))return["",""];i=String(r),e.tableKeys[e.tableKeys.indexOf("quartile")]="quartile ("+i+")";var f=e.parent.selected.map((function(e){return e[i]}));f.sort((function(e,t){return Number(e)-Number(t)}));var p=f.indexOf(e.selected[0][i])/f.length,h=""+Math.max(1,Math.ceil(4*p));return[h,h];default:throw"Node type "+e.type+" does not have the token context."}}},A=new Map;try{var T=p[f[e.type]];try{for(var N=X(T),S=N.next();!S.done;S=N.next()){var I=S.value;A.set(I,w[I](e))}}catch(e){s={error:e}}finally{try{S&&!S.done&&(d=N.return)&&d.call(N)}finally{if(s)throw s.error}}}catch(t){throw"Node type "+e.type+" not handled in nodeToDesc, threw: "+t}return A}(e,t,r,n,a,o,l)}(m,n,l,d,u,c,o),m}function re(e,t){var r,n,i,a=void 0;if("data"!==e.type)return a;try{for(var o=X(e.tableKeys.entries()),l=o.next();!l.done;l=o.next()){var s=H(l.value,2),d=s[0],u=s[1];"facet"!==e.tableKeysMap[d]&&"quartile"!==e.tableKeysMap[d]&&u!==t.field&&("number"==typeof(i=""+e.selected[0][u])||!isNaN(i)&&!isNaN(parseFloat(i)))&&(a=u)}}catch(e){r={error:e}}finally{try{l&&!l.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return a}function ne(e){var t,r;if("data"===e.type)return e;if(e.children)try{for(var n=X(e.children),i=n.next();!i.done;i=n.next()){var a=i.value;if("data"===a.type)return a;var o=ne(a);if(o)return o}}catch(e){t={error:e}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(t)throw t.error}}}var ie=function(){return ie=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},ie.apply(this,arguments)},ae=function(e){return ie(ie({},e),{type:"chart"})},oe=function(e){return ie(ie({},e),{type:"facetedChart"})};function le(t,r){var n,s=Y(t),h=document.createElement("div");if("table"===(r={renderType:(null==r?void 0:r.renderType)||"tree",onFocus:null==r?void 0:r.onFocus}).renderType)h.appendChild(function(e,t){var r=document.createElement("table"),n=document.createElement("thead"),a=document.createElement("tr");t.forEach((function(e){var t=document.createElement("th");t.setAttribute("scope","col"),t.innerText=e,a.appendChild(t)})),n.appendChild(a),r.appendChild(n);var o=document.createElement("tbody");return e.forEach((function(e){var r=document.createElement("tr");t.forEach((function(t){var n=document.createElement("td");n.innerText=i(e[t]),r.appendChild(n)})),o.appendChild(r)})),r.appendChild(o),r}(s.root.selected,s.fieldsUsed));else{var m=function(e){var t,r=localStorage.getItem("settingsData");r?t=JSON.parse(r):(t=y,localStorage.setItem("settingsData",JSON.stringify(y)));var n=document.createElement("fieldset");n.setAttribute("id","settings");var i=document.createElement("button");return i.addEventListener("click",(function(e){n.dispatchEvent(new KeyboardEvent("keydown",{key:"Escape"}))})),i.innerText="Close",n.appendChild(i),Object.keys(t).forEach((function(t){n.appendChild(w(t,e));var r=function(e,t){var r,n,i,a,o=p[e],l=document.createElement("div");l.id=e+"-custom";var s=document.createElement("div");s.id=e+"-custom-options";var d=document.createElement("input");d.type="text",d.id=e+"-custom-name";var u=document.createElement("label");u.setAttribute("for",e+"-custom-name"),u.innerText="Custom preset name";try{for(var c=x(o),f=c.next();!f.done;f=c.next()){var h=f.value,m=document.createElement("select");m.id=e+"-"+h;try{for(var y=(i=void 0,x(["off","short","long"])),g=y.next();!g.done;g=y.next()){var b=g.value,E=document.createElement("option");E.innerText=b,E.value=b,m.appendChild(E)}}catch(e){i={error:e}}finally{try{g&&!g.done&&(a=y.return)&&a.call(y)}finally{if(i)throw i.error}}var N=document.createElement("label");N.setAttribute("for",e+"-"+h),N.innerText=v[h];var S=document.createElement("div");S.appendChild(m),S.appendChild(N),s.append(S)}}catch(e){r={error:e}}finally{try{f&&!f.done&&(n=c.return)&&n.call(c)}finally{if(r)throw r.error}}var I=document.createElement("button");return I.innerText="Save",I.addEventListener("click",(function(r){!function(e,t){var r=document.getElementById(e+"-custom");r.setAttribute("style","display: none"),r.setAttribute("aria-hidden","true");var n=JSON.parse(localStorage.getItem("settingsData")),i=document.getElementById(e+"-custom-name").value;n[e][i]=T(e),localStorage.setItem("settingsData",JSON.stringify(n)),function(e){JSON.parse(localStorage.getItem("settingsData")),document.getElementById(e+"-verbosity-container").replaceWith(w(e,t))}(e);var a=document.getElementById(e+"-verbosity");a.value=i,A(a,t),a.focus(),a.setAttribute("aria-active","true");var o=document.getElementById("command-dropdown"),l=document.createElement("option");l.innerText=i,l.value=i,o.appendChild(l)}(e,t)})),l.append(s),l.appendChild(u),l.appendChild(d),l.appendChild(I),l}(t,e);r.setAttribute("style","display: none"),r.setAttribute("aria-hidden","true"),n.appendChild(r)})),n}(s);m.setAttribute("style","display: none"),m.setAttribute("aria-hidden","true"),h.appendChild(m);var E=function(){var t,r,n,i,a,o,l,s,d,f,p=document.createElement("select");function h(e,t,r){var n=document.createElement("option");n.innerText=e,n.value=t,r.appendChild(n)}p.setAttribute("id","command-dropdown");try{for(var m=x(u),v=m.next();!v.done;v=m.next())h(b=v.value,b,p)}catch(e){t={error:e}}finally{try{v&&!v.done&&(r=m.return)&&r.call(m)}finally{if(t)throw t.error}}try{for(var y=x(u),g=y.next();!g.done;g=y.next()){var b;h("focus "+(b=g.value),"focus-"+b,p)}}catch(e){n={error:e}}finally{try{g&&!g.done&&(i=y.return)&&i.call(y)}finally{if(n)throw n.error}}h("clear","clear",p);try{for(var E=x(Object.values(e)),w=E.next();!w.done;w=E.next()){var A=w.value;"string"==typeof A&&h(A,A,p)}}catch(e){a={error:e}}finally{try{w&&!w.done&&(o=E.return)&&o.call(E)}finally{if(a)throw a.error}}try{for(var T=x(c),N=T.next();!N.done;N=T.next()){var S=N.value;if("root"!==S){var I=JSON.parse(localStorage.getItem("settingsData"));try{for(var k=(d=void 0,x(Object.keys(I[S]))),C=k.next();!C.done;C=k.next()){var O=C.value;h(S+" "+O,S+"-"+O,p)}}catch(e){d={error:e}}finally{try{C&&!C.done&&(f=k.return)&&f.call(k)}finally{if(d)throw d.error}}}}}catch(e){l={error:e}}finally{try{N&&!N.done&&(s=T.return)&&s.call(T)}finally{if(l)throw l.error}}var F=document.createElement("label");F.setAttribute("for","command-dropdown"),F.innerText="Choose command";var L=document.createElement("div");return L.setAttribute("id","command-dropdown-container"),L.appendChild(F),L.appendChild(p),L}();E.setAttribute("style","display: none"),E.setAttribute("aria-hidden","true"),h.appendChild(E);var I=function(e){var t,r=(Math.random()+1).toString(36).substring(7),n=e.root,i=document.createElement("ul"),a=r+"-"+n.type+"-label";return i.setAttribute("role","tree"),i.setAttribute("aria-labelledby",a),i.setAttribute("id","tree-root"),i.appendChild(function e(t,r,n,i,a,o){var l=document.createElement("li"),s=o+"-"+(i-1);l.setAttribute("role","treeitem"),l.setAttribute("aria-level",String(n)),l.setAttribute("aria-setsize",String(a)),l.setAttribute("aria-posinset",String(i)),l.setAttribute("aria-expanded","false"),l.setAttribute("data-nodetype",t.type),l.setAttribute("id",s),t.gridIndex&&(l.setAttribute("data-i",String(t.gridIndex.i)),l.setAttribute("data-j",String(t.gridIndex.j))),t.filterValue&&l.setAttribute("data-filterValue",JSON.stringify(t.filterValue));var d=document.createElement("span");if(d.textContent=S(t),l.appendChild(d),t.children.length){var u=t.children.filter((function(e){return"data"===e.type})),c=t.children.filter((function(e){return"data"!==e.type})),f=document.createElement("ul");f.setAttribute("role","group"),u.length?f.appendChild(W(u,n+1)):c.forEach((function(t,i,a){f.appendChild(e(t,r,n+1,i+1,a.length,s))})),l.appendChild(f)}return l}(n,r,1,1,1,"root")),null===(t=i.querySelector("span"))||void 0===t||t.setAttribute("id",a),i}(s),C=document.createElement("div");C.classList.add("olli-vis"),C.setAttribute("role","application"),C.appendChild(I),h.appendChild(C);var O=new d(I,r.onFocus);O.init(),document.addEventListener("keypress",(function(e){"t"!==e.key||O.currentlyTypingToken()||O.setFocusToItem(O.rootTreeItem)})),function(e,t){e.addEventListener("keydown",(function(e){if("Escape"===e.key){var r=document.getElementById("settings");r.setAttribute("style","display: none"),r.setAttribute("aria-hidden","true"),setTimeout((function(){t.setFocusToItem(t.lastFocusedItem)}),0)}else if(e.altKey&&"ArrowLeft"===e.key){if((i=document.activeElement)&&"SELECT"===i.nodeName){var n=(a=i.parentNode).previousElementSibling;null!=n&&(a.insertAdjacentElement("afterend",n),i.focus(),i.setAttribute("aria-active","true"),b(k(T(i.id.split("-")[0]))))}}else if(e.altKey&&"ArrowRight"===e.key){var i;if((i=document.activeElement)&&"SELECT"===i.nodeName){var a,o=(a=i.parentNode).nextElementSibling;null!=o&&(a.parentNode.insertBefore(o,a),b(k(T(i.id.split("-")[0]))))}}}));var r=e.querySelector(":enabled"),n=function(e,t,r){if(r||2===arguments.length)for(var n,i=0,a=t.length;i<a;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))}([],function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,a=r.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)o.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(i)throw i.error}}return o}(e.querySelectorAll("select:enabled")),!1).filter((function(e){return!e.parentElement.closest('#settings > div[aria-hidden="true"]')})).reverse()[0];r.addEventListener("keydown",(function(e){"Tab"===e.key&&e.shiftKey&&e.preventDefault()})),n.addEventListener("keydown",(function(e){"Tab"!==e.key||e.shiftKey||e.preventDefault()}))}(m,O),I.addEventListener("keydown",(function(e){if(!l(document.activeElement)){if("m"===e.key){var t=document.getElementById("settings");t.firstElementChild,t.setAttribute("style","display: block"),t.setAttribute("aria-hidden","false"),setTimeout((function(){var e;null===(e=t.querySelector(":enabled"))||void 0===e||e.focus()}),0)}if("i"===e.key){var r=document.getElementById("command-dropdown-container");r.setAttribute("style","display: block"),r.setAttribute("aria-hidden","false"),setTimeout((function(){r.firstElementChild.focus(),r.setAttribute("aria-selected","true")}),0)}}})),function(t,r,n){var i=t.children[1];t.addEventListener("change",(function(){b(i.selectedOptions[0].text)})),t.addEventListener("keydown",(function(a){var o,l,s,d,p=JSON.parse(localStorage.getItem("settingsData"));if("Enter"===a.key){var h=i.selectedOptions[0].value;try{for(var m=g(u),v=m.next();!v.done;v=m.next()){var y=v.value;if(h===y){var x=_(n.lastFocusedItem.domNode,r);if(x.description.has(h)){var E=f[x.type],w=document.getElementById(E+"-verbosity").value,T=p[E][w].find((function(e){return e[0]===h}))[1];b(x.description.get(h)[T])}else b("No "+y+" available")}else h==="focus-"+y&&(N[y]=!0,R(r,document.getElementById("tree-root")))}}catch(e){o={error:e}}finally{try{v&&!v.done&&(l=m.return)&&l.call(m)}finally{if(o)throw o.error}}"clear"===h&&(u.forEach((function(e){N[e]=!1})),R(r,document.getElementById("tree-root"))),c.forEach((function(e){var t,n;if("root"!==e){var i=document.getElementById(e+"-verbosity"),a=Object.keys(p[e]);try{for(var o=g(a),l=o.next();!l.done;l=o.next()){var s=l.value;if(h===e+"-"+s)return i.value=s,A(i,r),void b(i.id.split("-")[0]+" verbosity set to "+i.value)}}catch(e){t={error:e}}finally{try{l&&!l.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}}}));var I=function(t){if("string"!=typeof t)return"continue";var i=Number(Object.values(e).find((function(r){return"number"==typeof r&&e[r]===t}))),a=e[i];h===t&&b(S(_(n.lastFocusedItem.domNode,r),a))};try{for(var k=g(Object.values(e)),C=k.next();!C.done;C=k.next())I(C.value)}catch(e){s={error:e}}finally{try{C&&!C.done&&(d=k.return)&&d.call(k)}finally{if(s)throw s.error}}}"Enter"!==a.key&&"Escape"!==a.key||(t.setAttribute("style","display: none"),t.setAttribute("aria-hidden","true"),n.setFocusToItem(n.lastFocusedItem)),"Tab"===a.key&&a.preventDefault()}))}(E,s,O),n=O,o({treesOnPage:(a().treesOnPage||[]).concat([n])}),a().keyListenerAttached||(document.addEventListener("keydown",(function(e){if(!l(document.activeElement)){var t=a(),r=t.lastVisitedTree,n=t.treesOnPage;if("KeyT"===e.code){var i=r||n[0];if("true"===i.domNode.firstElementChild.getAttribute("aria-selected")){var o=n.indexOf(i);if(e.shiftKey){if(o>0){var s=n[o-1];s.setFocusToItem(s.rootTreeItem)}}else if(o<n.length-1){var d=n[o+1];d.setFocusToItem(d.rootTreeItem)}}else i.setFocusToItem(i.rootTreeItem)}}})),o({keyListenerAttached:!0}))}return h}})(),n})()));
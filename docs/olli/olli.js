!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var n=t();for(var r in n)("object"==typeof exports?exports:e)[r]=n[r]}}(this,(()=>(()=>{"use strict";var e={144:(e,t,n)=>{n.d(t,{Z:()=>l});var r=n(81),i=n.n(r),a=n(645),o=n.n(a)()(i());o.push([e.id,'.olli-vis ul[role="tree"] {\n  margin: 0;\n  padding: 0;\n  list-style: none;\n}\n\n.olli-vis ul[role="tree"] li {\n  margin: 0;\n  padding: 0;\n  list-style: none;\n}\n\n.olli-vis [role="treeitem"]:not(.expanded) + [role="group"] {\n  display: none;\n}\n\n.olli-vis [role="treeitem"].expanded + [role="group"] {\n  display: block;\n}\n\n.olli-vis [role="treeitem"]:not(.expanded) > ul {\n  display: none;\n}\n\n.olli-vis [role="treeitem"].expanded > ul {\n  display: block;\n}\n\n/* .olli-vis [role="treeitem"],\n.olli-vis [role="treeitem"] span {\n  width: 9em;\n  margin: 0;\n  padding: 0.125em;\n  display: block;\n} */\n\n/* disable default keyboard focus styling for treeitems\n   Keyboard focus is styled with the following CSS */\n.olli-vis :focus {\n  outline: 0;\n}\n\n.olli-vis .focus,\n.olli-vis  span.focus,\n/* .olli-vis  [aria-selected="true"] { */\n.olli-vis  .selected {\n  border-color: black;\n  background-color: #eee;\n}\n\n.olli-vis .hover,\n.olli-vis  span:hover {\n  background-color: #ddd;\n}\n',""]);const l=o},645:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",r=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),r&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),r&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,r,i,a){"string"==typeof e&&(e=[[null,e,void 0]]);var o={};if(r)for(var l=0;l<this.length;l++){var s=this[l][0];null!=s&&(o[s]=!0)}for(var d=0;d<e.length;d++){var c=[].concat(e[d]);r&&o[c[0]]||(void 0!==a&&(void 0===c[5]||(c[1]="@layer".concat(c[5].length>0?" ".concat(c[5]):""," {").concat(c[1],"}")),c[5]=a),n&&(c[2]?(c[1]="@media ".concat(c[2]," {").concat(c[1],"}"),c[2]=n):c[2]=n),i&&(c[4]?(c[1]="@supports (".concat(c[4],") {").concat(c[1],"}"),c[4]=i):c[4]="".concat(i)),t.push(c))}},t}},81:e=>{e.exports=function(e){return e[1]}},379:e=>{var t=[];function n(e){for(var n=-1,r=0;r<t.length;r++)if(t[r].identifier===e){n=r;break}return n}function r(e,r){for(var a={},o=[],l=0;l<e.length;l++){var s=e[l],d=r.base?s[0]+r.base:s[0],c=a[d]||0,u="".concat(d," ").concat(c);a[d]=c+1;var f=n(u),p={css:s[1],media:s[2],sourceMap:s[3],supports:s[4],layer:s[5]};if(-1!==f)t[f].references++,t[f].updater(p);else{var h=i(p,r);r.byIndex=l,t.splice(l,0,{identifier:u,updater:h,references:1})}o.push(u)}return o}function i(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,i){var a=r(e=e||[],i=i||{});return function(e){e=e||[];for(var o=0;o<a.length;o++){var l=n(a[o]);t[l].references--}for(var s=r(e,i),d=0;d<a.length;d++){var c=n(a[d]);0===t[c].references&&(t[c].updater(),t.splice(c,1))}a=s}}},569:e=>{var t={};e.exports=function(e,n){var r=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},216:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},565:(e,t,n)=>{e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},795:e=>{e.exports=function(e){var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var i=void 0!==n.layer;i&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,i&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var a=n.sourceMap;a&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),t.styleTagTransform(r,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},589:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={id:r,exports:{}};return e[r](a,a.exports,n),a.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nc=void 0;var r={};return(()=>{n.r(r),n.d(r,{chart:()=>oe,facetedChart:()=>le,olli:()=>se});var e,t=function(){return t=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},t.apply(this,arguments)},i=function(e){return e instanceof Date?e.toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric"}):"string"==typeof e||isNaN(e)||e%1==0?String(e):Number(e).toFixed(2)},a=function(){return window._olli||(window._olli={}),window._olli},o=function(e){window._olli=t(t({},window._olli),e)},l=function(e){switch(null==e?void 0:e.nodeName){case"INPUT":case"TEXTAREA":case"SELECT":case"OPTION":return!0}return"string"==typeof(null==e?void 0:e.getAttribute("contenteditable"))},s=function(){function e(e,t,n){e.tabIndex=-1,this.tree=t,this.domNode=e,this.isExpandable=!1,this.isVisible=!1,this.inGroup=!1,n&&(this.inGroup=!0),this.parent=n,this.children=[];for(var r=e.firstElementChild;r;){if(["ul","table","thead","tbody","tr","td","th"].includes(r.tagName.toLowerCase())){this.isExpandable=!0;break}r=r.nextElementSibling}}return e.prototype.init=function(){this.domNode.tabIndex=-1,this.domNode.addEventListener("keydown",this.handleKeydown.bind(this)),this.domNode.addEventListener("click",this.handleClick.bind(this)),this.domNode.addEventListener("focus",this.handleFocus.bind(this)),this.domNode.addEventListener("blur",this.handleBlur.bind(this)),this.isExpandable||(this.domNode.addEventListener("mouseover",this.handleMouseOver.bind(this)),this.domNode.addEventListener("mouseout",this.handleMouseOut.bind(this)))},e.prototype.isExpanded=function(){return!!this.isExpandable&&this.domNode.classList.contains("expanded")},e.prototype.handleKeydown=function(e){e.altKey||e.ctrlKey||e.metaKey||this.checkBaseKeys(e)},e.prototype.checkBaseKeys=function(e){var t,n=!1,r=this.tree.currentlyTypingToken();switch(e.key){case"Enter":case" ":case"ArrowDown":this.children.length>0&&this.isExpandable&&(this.tree.expandTreeItem(this),this.tree.setFocusToNextLayer(this)),n=!0;break;case"Escape":case"ArrowUp":this.isExpandable&&this.isExpanded()?(this.tree.collapseTreeItem(this),this.tree.setFocusToParentItem(this),n=!0):this.inGroup&&((null===(t=null==this?void 0:this.parent)||void 0===t?void 0:t.isExpandable)&&this.parent.isExpanded()&&this.tree.collapseTreeItem(this.parent),this.tree.setFocusToParentItem(this),n=!0);break;case"ArrowLeft":this.tree.setFocusToPreviousItem(this),n=!0;break;case"ArrowRight":this.tree.setFocusToNextItem(this),n=!0;break;case"Home":this.parent&&(this.tree.setFocusToFirstInLayer(this),n=!0);break;case"End":this.parent&&(this.tree.setFocusToLastInLayer(this),n=!0);break;case"x":r||this.tree.focusOnNodeType("xAxis",this);break;case"y":r||this.tree.focusOnNodeType("yAxis",this);break;case"l":r||this.tree.focusOnNodeType("legend",this);break;case"w":r||this.tree.setFocusGridUp(this);break;case"a":r||this.tree.setFocusGridLeft(this);break;case"s":r||this.tree.setFocusGridDown(this);break;case"d":r||this.tree.setFocusGridRight(this)}n&&(e.stopPropagation(),e.preventDefault())},e.prototype.handleClick=function(e){this.isExpandable?(this.isExpanded()?this.tree.collapseTreeItem(this):this.tree.expandTreeItem(this),e.stopPropagation()):(this.tree.setFocusToItem(this),e.stopPropagation())},e.prototype.handleFocus=function(){var e=this.domNode;this.isExpandable&&(e=e.firstElementChild),e.classList.add("focus")},e.prototype.handleBlur=function(){var e=this.domNode;this.isExpandable&&(e=e.firstElementChild),e.classList.remove("focus")},e.prototype.handleMouseOver=function(e){e.currentTarget.classList.add("hover")},e.prototype.handleMouseOut=function(e){e.currentTarget.classList.remove("hover")},e}(),d=function(){function e(e,t){this.currentlyTypingToken=function(){if(document.activeElement&&(document.activeElement.id.endsWith("custom-name")||"command-dropdown"===document.activeElement.id))return!0},this.domNode=e,this.treeItems=[],this.onFocus=t}return e.prototype.init=function(){!function e(t,n,r){for(var i=t.firstElementChild,a=r;i;)["li","table","tr","th","td"].includes(i.tagName.toLowerCase())&&((a=new s(i,n,r)).init(),r&&r.children.push(a),n.treeItems.push(a)),i.firstElementChild&&e(i,n,a),i=i.nextElementSibling}(this.domNode,this,void 0),this.updateVisibleTreeItems(),this.rootTreeItem.domNode.tabIndex=0,this.lastFocusedItem=this.rootTreeItem},e.prototype.setFocusToItem=function(e){var t=this;window.requestAnimationFrame((function(){for(var n=0;n<t.treeItems.length;n++){var r=t.treeItems[n];r===e?(r.domNode.tabIndex=0,r.domNode.focus(),r.domNode.classList.add("selected"),t.lastFocusedItem=r,t.onFocus&&t.onFocus(r.domNode),o({lastVisitedTree:t})):(r.domNode.tabIndex=-1,r.domNode.classList.remove("selected"))}}))},e.prototype.setFocusToNextItem=function(e){if(e.parent){var t=e.parent.children.indexOf(e);t<e.parent.children.length-1&&this.setFocusToItem(e.parent.children[t+1])}},e.prototype.setFocusToPreviousItem=function(e){if(e.parent){var t=e.parent.children.indexOf(e);t>0&&this.setFocusToItem(e.parent.children[t-1])}},e.prototype.setFocusToNextLayer=function(e){e.lastVisitedChild?this.setFocusToItem(e.lastVisitedChild):this.setFocusToItem(e.children[0])},e.prototype.setFocusToParentItem=function(e){e.parent&&(e.parent.lastVisitedChild=e,this.setFocusToItem(e.parent))},e.prototype.setFocusToFirstInLayer=function(e){e.parent&&this.setFocusToItem(e.parent.children[0])},e.prototype.setFocusToLastInLayer=function(e){e.parent&&this.setFocusToItem(e.parent.children[e.parent.children.length-1])},e.prototype.setFocusGridLeft=function(e){var t=e.domNode.getAttribute("data-i"),n=e.domNode.getAttribute("data-j");if(t&&n){var r=this.treeItems.find((function(e){return e.domNode.getAttribute("data-i")===String(Number(t)-1)&&e.domNode.getAttribute("data-j")===String(n)}));r&&this.setFocusToItem(r)}},e.prototype.setFocusGridRight=function(e){var t=e.domNode.getAttribute("data-i"),n=e.domNode.getAttribute("data-j");if(t&&n){var r=this.treeItems.find((function(e){return e.domNode.getAttribute("data-i")===String(Number(t)+1)&&e.domNode.getAttribute("data-j")===String(n)}));r&&this.setFocusToItem(r)}},e.prototype.setFocusGridUp=function(e){var t=e.domNode.getAttribute("data-i"),n=e.domNode.getAttribute("data-j");if(t&&n){var r=this.treeItems.find((function(e){return e.domNode.getAttribute("data-i")===String(t)&&e.domNode.getAttribute("data-j")===String(Number(n)+1)}));r&&this.setFocusToItem(r)}},e.prototype.setFocusGridDown=function(e){var t=e.domNode.getAttribute("data-i"),n=e.domNode.getAttribute("data-j");if(t&&n){var r=this.treeItems.find((function(e){return e.domNode.getAttribute("data-i")===String(t)&&e.domNode.getAttribute("data-j")===String(Number(n)-1)}));r&&this.setFocusToItem(r)}},e.prototype.expandTreeItem=function(e){e.isExpandable&&(e.parent&&e.parent.children.forEach((function(t){t!==e&&t.domNode.classList.remove("expanded")})),e.domNode.classList.add("expanded"),this.updateVisibleTreeItems())},e.prototype.collapseTreeItem=function(e){var t;e.isExpanded()?t=e:e.parent&&(t=e.parent),t&&(t.domNode.classList.remove("expanded"),this.updateVisibleTreeItems())},e.prototype.updateVisibleTreeItems=function(){this.rootTreeItem=this.treeItems[0];for(var e=0;e<this.treeItems.length;e++){var t=this.treeItems[e],n=t.domNode.parentNode;for(t.isVisible=!0;n&&n!==this.domNode;)n.classList.contains("expanded")||(t.isVisible=!1),n=n.parentNode}},e.prototype.focusOnNodeType=function(e,t){for(var n=this,r=function(e){e&&e.isExpandable&&!e.isExpanded()&&(n.expandTreeItem(e),r(e.parent))},i=function(e){e.children.forEach((function(e){e.isExpandable&&e.isExpanded()&&(i(e),n.collapseTreeItem(e))}))},a=t.domNode.getAttribute("data-nodetype"),o=t;"chart"!==a;){if(!a)return;if(!o.parent)return;a=(o=o.parent).domNode.getAttribute("data-nodetype")}var l=o.children.find((function(t){var n=t.domNode.getAttribute("data-nodetype");return e===n}));l&&(r(l),i(l),this.setFocusToItem(l))},e}(),c=["name","index","type","children","data","size","facet","depth","aggregate","quantile"],u=["root","facet","axis","section","datapoint"];!function(e){e[e.Short=0]="Short",e[e.Long=1]="Long"}(e||(e={}));var f={multiView:"root",chart:"facet",xAxis:"axis",yAxis:"axis",legend:"axis",grid:"axis",filteredData:"section",data:"datapoint"},p={root:["name"],facet:["index","type","name","children","depth"],axis:["name","type","data","size","facet","aggregate","depth"],section:["data","index","size","facet","aggregate","quantile","depth"],datapoint:["data","facet","quantile"]},h=e.Short,m=e.Long,v={index:'Index in set (e.g. "1 of 5 ")',type:'Type of element (e.g. "temporal scale", "line chart")',size:'Size of children (e.g. "10 values")',data:'Data value or range (e.g. "0 to 800 ", "price: 50 ")',aggregate:'Aggregate statistics including minimum, maximum, and average (e.g. "average: 50 ")',facet:'Facet name (e.g. "profit" and "expenditures")',name:'Name (e.g. "x-axis titled price")',children:'Childrenâ€™s names (e.g. at the root, "axes titled date and price") ',quantile:'Quantile of current data (e.g. "quartile: 1 ")',depth:'Depth of element in tree (e.g. "depth: 3 ")'},y={facet:{high:[["index",m],["type",m],["name",m],["children",m],["depth",m]],medium:[["type",m],["name",m],["children",m]],low:[["type",h],["name",h],["children",h]]},axis:{high:[["name",m],["type",m],["data",m],["size",m],["facet",m],["aggregate",m],["depth",m]],medium:[["name",m],["type",m],["data",m]],low:[["name",h],["type",h],["data",h]]},section:{high:[["data",m],["index",m],["size",m],["facet",m],["aggregate",m],["quantile",m],["depth",m]],medium:[["data",m],["size",m],["aggregate",h],["quantile",h]],low:[["data",h],["size",h]]},datapoint:{high:[["data",m],["facet",m],["quantile",m]],medium:[["data",m]],low:[["data",h]]}},g=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},b=[];function x(e){console.log("speaking:",e);var t=document.createElement("div");t.setAttribute("aria-live","assertive"),document.body.appendChild(t),window.setTimeout((function(){t.innerText=e}),100),window.setTimeout((function(){t.remove()}),1e3)}var E=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},w=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,a=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o};function T(e,t){var n,r,i=JSON.parse(localStorage.getItem("settingsData"))[e],a=localStorage.getItem(e);a||(a="high",localStorage.setItem(e,"high"));var o=document.createElement("select");o.id=e+"-verbosity";var l=document.createElement("label");l.setAttribute("for",e+"-verbosity");var s="Description: "+C(i[Object.keys(i)[0]]);l.innerText=k(e+" verbosity. "+s);try{for(var d=E(Object.keys(i)),c=d.next();!c.done;c=d.next()){var u=c.value,f=document.createElement("option");f.innerText=u,f.value=u,o.appendChild(f)}}catch(e){n={error:e}}finally{try{c&&!c.done&&(r=d.return)&&r.call(d)}finally{if(n)throw n.error}}var p=document.createElement("option");p.innerText="custom",p.value="custom",o.appendChild(p),o.value=a,o.addEventListener("change",(function(n){A(o,t),localStorage.setItem(e,o.value)}));var h=document.createElement("div");return h.id=e+"-verbosity-container",h.appendChild(l),h.appendChild(o),h}function A(e,t){var n=JSON.parse(localStorage.getItem("settingsData")),r=e.id.split("-")[0],i=document.getElementById(r+"-custom"),a=e.previousElementSibling;if("custom"===e.value){window.requestAnimationFrame((function(){i.setAttribute("style","display: block"),i.setAttribute("aria-hidden","false")}));var o="Create a custom preset using the preset menu. Set verbosity for each element; use alt+left and alt+right to reorder elements.";a.innerText=o,x(e.id.split("-")[0]+" verbosity set to "+e.value+". "+o)}else window.requestAnimationFrame((function(){i.setAttribute("style","display: none"),i.setAttribute("aria-hidden","true")})),o="Description: "+C(n[r][e.value]),a.innerText=k(r+" verbosity. "+o),R(t,document.getElementById("tree-root")),x(e.id.split("-")[0]+" verbosity set to "+e.value+". "+o),b.push({action:"dropdown",target:"settings-"+r,value:e.value})}function N(t){var n,r,i=[];try{for(var a=E(document.getElementById(t+"-custom-options").children),o=a.next();!o.done;o=a.next()){var l=o.value.firstElementChild;"long"===l.value?i.push([l.id.split("-")[1],e.Long]):"short"===l.value&&i.push([l.id.split("-")[1],e.Short])}}catch(e){n={error:e}}finally{try{o&&!o.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}return i}var I=[];function S(t,n){var r,i;void 0===n&&(n=void 0);var a,o=f[t.type],l={},s=JSON.parse(localStorage.getItem("settingsData"));if("root"===o)a=p[o],l=Object.fromEntries(a.map((function(t){return[t,e.Long]})));else{var d=document.getElementById(o+"-verbosity"),c=d?d.value:"high";a=s[o][c].map((function(e){return e[0]})),l=Object.fromEntries(s[o][c])}var u=[],h=[];try{for(var m=E(t.description.entries()),v=m.next();!v.done;v=m.next()){var y=w(v.value,2),g=y[0],b=y[1];if(a.includes(g)||I.includes(g)){var x=0;n?x=Number(Object.values(e).find((function(t){return"number"==typeof t&&e[t]===n}))):l[g]&&(x=l[g]),I.includes(g)?u[I.indexOf(g)]=b[x]:h[a.indexOf(g)]=b[x]}}}catch(e){r={error:e}}finally{try{v&&!v.done&&(i=m.return)&&i.call(m)}finally{if(r)throw r.error}}return u.concat(h).filter((function(e){return e.length>0})).map(k).join(". ")+"."}function k(e){return e.slice(0,1).toUpperCase()+e.slice(1)}function C(t){var n,r,i="";try{for(var a=E(t),o=a.next();!o.done;o=a.next()){var l=w(o.value,2),s=l[0],d=l[1];i+=s+" ("+e[d]+"), "}}catch(e){n={error:e}}finally{try{o&&!o.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}return i.slice(0,-2)}var F=n(379),O=n.n(F),L=n(795),j=n.n(L),D=n(569),K=n.n(D),M=n(565),V=n.n(M),q=n(216),B=n.n(q),P=n(589),J=n.n(P),z=n(144),G={};G.styleTagTransform=J(),G.setAttributes=V(),G.insert=K().bind(null,"head"),G.domAPI=j(),G.insertStyleElement=B(),O()(z.Z,G),z.Z&&z.Z.locals&&z.Z.locals;var U=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},_=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,a=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o};function R(e,t){var n,r;if(t.children.length)try{for(var i=U(t.children),a=i.next();!a.done;a=i.next()){var o=a.value;if("TABLE"===o.nodeName){var l=t.parentElement,s=Z(l,e).children.filter((function(e){return"data"===e.type}));o.replaceWith(H(s,l.id.split("-").length))}else o.firstElementChild.innerText=S(Z(o,e)),o.children[1]&&R(e,o.children[1])}}catch(e){n={error:e}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}}function Z(e,t){var n,r,i=t.root,a=e.id.split("-").slice(2).map((function(e){return Number(e)}));try{for(var o=U(a),l=o.next();!l.done;l=o.next()){var s=l.value;i=i.children[s]}}catch(e){n={error:e}}finally{try{l&&!l.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return i}function H(e,t){var n,r,a=function(){var e,t,n=JSON.parse(localStorage.getItem("settingsData")),r=document.getElementById("datapoint-verbosity"),i=r?r.value:"high",a=n.datapoint[i].map((function(e){return e[0]})),o=n.datapoint.high.map((function(e){return e[0]})),l={};try{for(var s=E(o),d=s.next();!d.done;d=s.next()){var c=d.value;l[c]=a.indexOf(c)}}catch(t){e={error:t}}finally{try{d&&!d.done&&(t=s.return)&&t.call(s)}finally{if(e)throw e.error}}return l}(),o=[],l=[];e[0].tableKeys.forEach((function(t,n){var r=e[0].tableKeysMap[n];a[r]<0||("quantile"!=r||e[0].description.get("quantile")[0])&&(o.push(t),l.push(r))}));var s=[],d=[];try{for(var c=U(Object.entries(a).sort((function(e,t){return e[1]-t[1]}))),u=c.next();!u.done;u=c.next()){var f=_(u.value,2),p=f[0],h=(f[1],l.indexOf(p));h<0||(d.push(p),s.push(o[h]),"data"===p&&(d.push(p),s.push(o[h+1])))}}catch(e){n={error:e}}finally{try{u&&!u.done&&(r=c.return)&&r.call(c)}finally{if(n)throw n.error}}var m=document.createElement("table"),v=document.createElement("tbody"),y=document.createElement("thead"),g=document.createElement("tr");return null==s||s.forEach((function(e){var t=document.createElement("th");t.setAttribute("scope","col"),t.innerText=e,g.appendChild(t)})),y.appendChild(g),m.appendChild(y),e.forEach((function(e,t){var n=document.createElement("tr");null==s||s.forEach((function(t,r){var a;a="quantile"===d[r]?e.description.get("quantile")[0]:i(e.selected[0][t]);var o=document.createElement("td");o.innerText=a,n.appendChild(o)})),v.appendChild(n)})),m.appendChild(v),m}var W=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,a=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o},Q=function(e,t,n){if(n||2===arguments.length)for(var r,i=0,a=t.length;i<a;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))},X=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};function Y(e){var t=$(e);switch(e.type){case"facetedChart":return{root:ne("multiView",e.selection||e.data,null,e,t),fieldsUsed:t};case"chart":return{root:ne("chart",e.selection||e.data,null,e,t),fieldsUsed:t};default:throw"olliVisSpec.type "+e.type+" not handled in olliVisSpecToTree"}}function $(e){switch(e.type){case"facetedChart":return Q([],W(new Set(Q([e.facetedField],W(Q([],W(e.charts.values()),!1).flatMap((function(e){return $(e)}))),!1))),!1);case"chart":return Q([],W(new Set(e.axes.concat(e.legends).reduce((function(e,t){return e.concat(t.field)}),[]))),!1);default:throw"olliVisSpec.type "+e.type+" not handled in getFieldsUsedForChart"}}var ee=function(e,t,n,r){return e.filter((function(e){var i=e[t];if(i instanceof Date){var a=String(n),o=String(r);4===a.length&&4===o.length&&(i=i.getFullYear())}return i>=n&&i<r}))};function te(e){var t=function(e){return e.every((function(e){return"string"==typeof e||e instanceof String}))?{values:e.map((function(e){return Number(e.replaceAll(",",""))}))}:e.every((function(e){return e instanceof Date}))?{values:e.map((function(e){return e.getTime()})),isDate:!0}:{values:e}}(e),n=t.values.reduce((function(e,t,n,r){var i,a=n-1;if(0===n&&0===t)return e;if(-1===a&&0!==t)i=[t-(r[n+1]-t),t];else if(n===r.length-1){var o=t+(t-r[n-1]);e.push([r[a],t]),i=[t,o]}else i=[r[a],r[a+1]];return e.push([i[0],i[1]]),e}),[]);return t.isDate?n.map((function(e){return[new Date(e[0]),new Date(e[1])]})):n}function ne(e,t,n,r,a,o,l,s,d,c,u,h){void 0===o&&(o=0);var m={type:e,parent:n,selected:t,filterValue:s,gridIndex:h,description:new Map,children:[]},v=r,y=r;switch(e){case"multiView":m.children=Q([],W(v.charts.entries()),!1).map((function(e,n,r){var i=W(e,2),l=i[0],s=i[1];return ne("chart",t.filter((function(e){return String(e[v.facetedField])===l})),m,s,a,o+1,l,void 0,void 0,n,r.length)}));break;case"chart":var g=y.axes.filter((function(e){return"bar"!==y.mark||"continuous"!==e.type}));m.children=Q(Q(Q([],W(g.map((function(e){return ne("x"===e.axisType?"xAxis":"yAxis",t,m,y,a,o+1,l,void 0,e)}))),!1),W(y.legends.map((function(e){return ne("legend",t,m,y,a,o+1,l,void 0,e)}))),!1),W("point"===y.mark&&2===g.length&&g.every((function(e){return"continuous"===e.type}))?[ne("grid",t,m,y,a,o+1,l)]:[]),!1);break;case"xAxis":case"yAxis":var b=d;switch(b.type){case"discrete":m.children=b.values.map((function(e,n){return ne("filteredData",t.filter((function(t){return String(t[b.field])===String(e)})),m,y,a,o+1,l,String(e),b,n,b.values.length)}));break;case"continuous":var x=te(b.values);m.children=x.map((function(e,n){var r=W(e,2),i=r[0],s=r[1];return ne("filteredData",ee(t,b.field,i,s),m,y,a,o+1,l,[i,s],b,n,x.length)}))}break;case"legend":var E=d;"discrete"===E.type&&(m.children=E.values.map((function(e,n){return ne("filteredData",t.filter((function(t){return String(t[E.field])===String(e)})),m,y,a,o+1,l,String(e),E,n,E.values.length)})));break;case"grid":var w=y.axes.find((function(e){return"x"===e.axisType})),T=y.axes.find((function(e){return"y"===e.axisType})),A=te(w.values),N=te(T.values);m.children=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.reduce((function(e,t){return e.flatMap((function(e){return t.map((function(t){return[e,t].flat()}))}))}))}(A,N).map((function(e,n){var r=W(e,4),i=r[0],s=r[1],d=r[2],c=r[3];return ne("filteredData",ee(ee(t,w.field,i,s),T.field,d,c),m,y,a,o+1,l,[[i,s],[d,c]],void 0,void 0,void 0,{i:Math.floor(n/N.length),j:n%N.length})}));break;case"filteredData":m.children=t.map((function(e,t,n){return ne("data",[e],m,y,a,o+1,l,void 0,d,t,n.length)}));break;case"data":if(m.tableKeys=a,m.tableKeysMap=m.tableKeys.map((function(e){return"data"})),d&&(m.tableKeys=m.tableKeys.filter((function(e){return e!==d.field})).concat([d.field])),l){var I=a[0];m.tableKeys=m.tableKeys.filter((function(e){return e!==I})).concat([I]),m.tableKeysMap[m.tableKeys.length-1]="facet"}m.tableKeys.push("quartile"),m.tableKeysMap.push("quantile");break;default:throw"Node type "+e+" not handled in olliVisSpecToNode"}return m.description=function(e,t,n,r,a,o,l){return function(e,t,n,r,a,o,l){var s,d,c=function(e){return"point"===e.mark?e.axes.every((function(e){return"continuous"===e.type}))?"scatterplot":"dot plot":e.mark?e.mark+" chart":""},u=function(e){return e.title||n?'"'+(e.title||n)+'"':""},h=function(e){return'titled "'+(e.title||e.field)+'"'},m=function(e){return(e.scaleType||e.type)+" scale"};function v(e){var t=e%10,n=e%100;return 1==t&&11!=n?e+"st":2==t&&12!=n?e+"nd":3==t&&13!=n?e+"rd":e+"th"}var y=function(e){return e?Array.isArray(e)?""+e.map((function(e){return i(e)})).join(" to "):'"'+i(e)+'"':""},g=function(e,t){return i(e.reduce((function(e,n){return e+Number(n[t])}),0)/e.length)},b=t,x=r,E=r;var w={name:function(e){switch(e.type){case"multiView":var n=u(t);return["faceted chart "+n+", "+e.children.length+" views","a faceted chart "+(n.length>0?"titled "+n+" ":n)+"with "+e.children.length+" views"];case"chart":return[n=u(t),n.length>0?"titled "+n:n];case"xAxis":case"yAxis":return Array(2).fill(x.axisType+"-axis "+h(x));case"legend":return Array(2).fill("legend "+h(E));case"grid":return["grid","grid view of "+c(b)];default:throw"Node type "+e.type+" does not have the token name."}},index:function(e){switch(e.type){case"chart":case"filteredData":return Array(2).fill(function(e,t){return void 0!==e&&void 0!==t?e+1+" of "+t:""}(a,o));default:throw"Node type "+e.type+" does not have the token index."}},type:function(e){switch(e.type){case"chart":return Array(2).fill(c(b));case"xAxis":case"yAxis":return[m(x),"for "+(t=m(x),"o"===t.charAt(0)?"an "+t:"a "+t)];case"legend":return Array(2).fill(function(e){return e.channel?"for "+e.channel:""}(E));case"grid":return["",""];default:throw"Node type "+e.type+" does not have the token type."}var t},children:function(e){if("chart"===e.type){var t=b.axes[0].title||b.axes[0].field,n=b.axes.map((function(e){return'"'+(e.title||e.field)+'"'}));return 1===b.axes.length?["axis "+t,"with axis "+t]:["axes "+n.join(", "),"with axes "+n.join(" and ")]}throw"Node type "+e.type+" does not have the token children."},data:function(e){var t,n;switch(e.type){case"xAxis":case"yAxis":case"legend":var r=i(x.values[0]),a=i(x.values[1]),o=i(x.values[x.values.length-1]);return"discrete"===x.type?2===x.values.length?[r+", "+a,'"'+r+'" and "'+a+'"']:["from "+r+" to "+o,'values starting with "'+r+'" and ending with "'+o+'"']:["from "+r+" to "+o,'with values from "'+r+'" to "'+o+'"'];case"grid":return["",""];case"filteredData":var l;return"grid"===(null===(t=e.parent)||void 0===t?void 0:t.type)?[(n=e.filterValue,l=n?y(n[0])+" and "+y(n[1]):""),"Values from "+l]:[l=y(e.filterValue),"Values from "+l];case"data":return Array(2).fill(function(e,t){var n;return null===(n=t.tableKeys)||void 0===n?void 0:n.map((function(t){return'"'+t+'": "'+i(e[t])+'"'})).join(", ")}(e.selected[0],e));default:throw"Node type "+e.type+" does not have the token data."}},size:function(e){switch(e.type){case"xAxis":case"yAxis":case"legend":case"grid":case"filteredData":return Array(2).fill((void 0===n&&(n="s"),(t=e.children.length)+" value"+(1!==t?n:"")));default:throw"Node type "+e.type+" does not have the token size."}var t,n},facet:function(e){switch(e.type){case"xAxis":case"yAxis":case"legend":case"grid":case"filteredData":case"data":var t=function(e){return e?""+e:""}(n);return[t,t.length>0?'"'+t+'"':t];default:throw"Node type "+e.type+" does not have the token parent."}},depth:function(e){return["depth "+l,"the tree depth is "+l]},aggregate:function(e){switch(e.type){case"xAxis":case"yAxis":case"filteredData":var t=ie(e);if(!t||!x||!e.selected.length)return["",""];var n=re(t,x);if(void 0===n)return["",""];var r=String(n),a=g(e.selected,r),o=function(e,t){return i(e.reduce((function(e,n){return Math.max(e,Number(n[t]))}),Number(e[0][t])))}(e.selected,r),l=function(e,t){return i(e.reduce((function(e,n){return Math.min(e,Number(n[t]))}),Number(e[0][t])))}(e.selected,r);return["average "+a+", maximum "+o+", minimum "+l,'the average for the "'+r+'" field is '+a+", the maximum is "+o+", and the minimum is "+l];case"legend":case"grid":return["",""];default:throw"Node type "+e.type+" does not have the token aggregate."}},quantile:function(e){switch(e.type){case"filteredData":var t=ie(e);if(!(t&&x&&e.parent&&e.selected.length))return["",""];var n=re(t,x);if(void 0===n)return["",""];var i=String(n),a=void 0;switch(e.parent.type){case"xAxis":case"yAxis":var o=r;switch(o.type){case"discrete":a=o.values.map((function(t,n){return e.parent.selected.filter((function(e){return String(e[o.field])===String(t)}))}));break;case"continuous":a=te(o.values).map((function(t,n){var r=W(t,2),i=r[0],a=r[1];return ee(e.parent.selected,o.field,i,a)}))}break;case"legend":var l=r;switch(l.type){case"discrete":a=l.values.map((function(t,n){return e.parent.selected.filter((function(e){return String(e[l.field])===String(t)}))}));break;case"continuous":return["",""]}break;case"grid":return["",""]}if(!a)return["",""];var s=[];a.forEach((function(e){if(0!=e.length){var t=g(e,i);s.push(Number(t))}else s.push(0)})),s.sort((function(e,t){return e-t}));var d=0==e.selected.length?0:g(e.selected,i),c=s.indexOf(Number(d))/s.length,u=Math.max(1,Math.ceil(4*c));return[v(u)+" quartile by average","This section's average "+i+" is in the "+v(u)+" quartile  of all sections"];case"data":if(!x)return["",""];if(void 0===(n=re(e,x)))return["",""];i=String(n),e.tableKeys[e.tableKeys.indexOf("quartile")]="quartile ("+i+")";var f=e.parent.selected.map((function(e){return e[i]}));f.sort((function(e,t){return Number(e)-Number(t)}));var p=f.indexOf(e.selected[0][i])/f.length,h=""+Math.max(1,Math.ceil(4*p));return[h,h];default:throw"Node type "+e.type+" does not have the token context."}}},T=new Map;try{var A=p[f[e.type]];try{for(var N=X(A),I=N.next();!I.done;I=N.next()){var S=I.value;T.set(S,w[S](e))}}catch(e){s={error:e}}finally{try{I&&!I.done&&(d=N.return)&&d.call(N)}finally{if(s)throw s.error}}}catch(t){throw"Node type "+e.type+" not handled in nodeToDesc, threw: "+t}return T}(e,t,n,r,a,o,l)}(m,r,l,d,c,u,o),m}function re(e,t){var n,r,i,a=void 0;if("data"!==e.type)return a;try{for(var o=X(e.tableKeys.entries()),l=o.next();!l.done;l=o.next()){var s=W(l.value,2),d=s[0],c=s[1];"facet"!==e.tableKeysMap[d]&&"quartile"!==e.tableKeysMap[d]&&c!==t.field&&("number"==typeof(i=""+e.selected[0][c])||!isNaN(i)&&!isNaN(parseFloat(i)))&&(a=c)}}catch(e){n={error:e}}finally{try{l&&!l.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return a}function ie(e){var t,n;if("data"===e.type)return e;if(e.children)try{for(var r=X(e.children),i=r.next();!i.done;i=r.next()){var a=i.value;if("data"===a.type)return a;var o=ie(a);if(o)return o}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}}var ae=function(){return ae=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},ae.apply(this,arguments)},oe=function(e){return ae(ae({},e),{type:"chart"})},le=function(e){return ae(ae({},e),{type:"facetedChart"})};function se(t,n){var r,s=Y(t),h=document.createElement("div");if("table"===(n={renderType:(null==n?void 0:n.renderType)||"tree",onFocus:null==n?void 0:n.onFocus}).renderType)h.appendChild(function(e,t){var n=document.createElement("table"),r=document.createElement("thead"),a=document.createElement("tr");t.forEach((function(e){var t=document.createElement("th");t.setAttribute("scope","col"),t.innerText=e,a.appendChild(t)})),r.appendChild(a),n.appendChild(r);var o=document.createElement("tbody");return e.forEach((function(e){var n=document.createElement("tr");t.forEach((function(t){var r=document.createElement("td");r.innerText=i(e[t]),n.appendChild(r)})),o.appendChild(n)})),n.appendChild(o),n}(s.root.selected,s.fieldsUsed));else{var m=function(e){var t,n=localStorage.getItem("settingsData");n?t=JSON.parse(n):(t=y,localStorage.setItem("settingsData",JSON.stringify(y)));var r=document.createElement("fieldset");r.setAttribute("id","settings");var i=document.createElement("button");return i.addEventListener("click",(function(e){r.dispatchEvent(new KeyboardEvent("keydown",{key:"Escape"}))})),i.innerText="Close",r.appendChild(i),Object.keys(t).forEach((function(t){r.appendChild(T(t,e));var n=function(e,t){var n,r,i,a,o=p[e],l=document.createElement("div");l.id=e+"-custom";var s=document.createElement("div");s.id=e+"-custom-options";var d=document.createElement("input");d.type="text",d.id=e+"-custom-name";var c=document.createElement("label");c.setAttribute("for",e+"-custom-name"),c.innerText="Custom preset name";try{for(var u=E(o),f=u.next();!f.done;f=u.next()){var h=f.value,m=document.createElement("select");m.id=e+"-"+h;try{for(var y=(i=void 0,E(["off","short","long"])),g=y.next();!g.done;g=y.next()){var x=g.value,w=document.createElement("option");w.innerText=x,w.value=x,m.appendChild(w)}}catch(e){i={error:e}}finally{try{g&&!g.done&&(a=y.return)&&a.call(y)}finally{if(i)throw i.error}}var I=document.createElement("label");I.setAttribute("for",e+"-"+h),I.innerText=v[h];var S=document.createElement("div");S.appendChild(m),S.appendChild(I),s.append(S)}}catch(e){n={error:e}}finally{try{f&&!f.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}var k=document.createElement("button");return k.innerText="Save",k.addEventListener("click",(function(n){!function(e,t){var n=document.getElementById(e+"-custom");n.setAttribute("style","display: none"),n.setAttribute("aria-hidden","true");var r=JSON.parse(localStorage.getItem("settingsData")),i=document.getElementById(e+"-custom-name").value,a=N(e);r[e][i]=a,localStorage.setItem("settingsData",JSON.stringify(r)),function(e){JSON.parse(localStorage.getItem("settingsData")),document.getElementById(e+"-verbosity-container").replaceWith(T(e,t))}(e);var o=document.getElementById(e+"-verbosity");o.value=i,A(o,t),o.focus(),o.setAttribute("aria-active","true"),localStorage.setItem(e,i);var l=document.getElementById("command-dropdown"),s=document.createElement("option");s.innerText=i,s.value=i,l.appendChild(s),b.push({action:"custom",target:"settings-"+e,value:JSON.stringify(a)})}(e,t)})),l.append(s),l.appendChild(c),l.appendChild(d),l.appendChild(k),l}(t,e);n.setAttribute("style","display: none"),n.setAttribute("aria-hidden","true"),r.appendChild(n)})),r}(s);m.setAttribute("style","display: none"),m.setAttribute("aria-hidden","true"),h.appendChild(m);var w=function(){var t,n,r,i,a,o,l,s,d,f,p=document.createElement("select");function h(e,t,n){var r=document.createElement("option");r.innerText=e,r.value=t,n.appendChild(r)}p.setAttribute("id","command-dropdown");try{for(var m=E(c.concat().sort()),v=m.next();!v.done;v=m.next())h(b=v.value,b,p)}catch(e){t={error:e}}finally{try{v&&!v.done&&(n=m.return)&&n.call(m)}finally{if(t)throw t.error}}try{for(var y=E(c.concat().sort()),g=y.next();!g.done;g=y.next()){var b;h("focus "+(b=g.value),"focus-"+b,p)}}catch(e){r={error:e}}finally{try{g&&!g.done&&(i=y.return)&&i.call(y)}finally{if(r)throw r.error}}h("clear","clear",p);try{for(var x=E(Object.values(e)),w=x.next();!w.done;w=x.next()){var T=w.value;"string"==typeof T&&h(T,T,p)}}catch(e){a={error:e}}finally{try{w&&!w.done&&(o=x.return)&&o.call(x)}finally{if(a)throw a.error}}try{for(var A=E(u),N=A.next();!N.done;N=A.next()){var I=N.value;if("root"!==I){var S=JSON.parse(localStorage.getItem("settingsData"));try{for(var k=(d=void 0,E(Object.keys(S[I]))),C=k.next();!C.done;C=k.next()){var F=C.value;h(I+" "+F,I+"-"+F,p)}}catch(e){d={error:e}}finally{try{C&&!C.done&&(f=k.return)&&f.call(k)}finally{if(d)throw d.error}}}}}catch(e){l={error:e}}finally{try{N&&!N.done&&(s=A.return)&&s.call(A)}finally{if(l)throw l.error}}var O=document.createElement("label");O.setAttribute("for","command-dropdown"),O.innerText="Choose command";var L=document.createElement("div");return L.setAttribute("id","command-dropdown-container"),L.appendChild(O),L.appendChild(p),L}();w.setAttribute("style","display: none"),w.setAttribute("aria-hidden","true"),h.appendChild(w);var k=function(e){var t,n=(Math.random()+1).toString(36).substring(7),r=e.root,i=document.createElement("ul"),a=n+"-"+r.type+"-label";return i.setAttribute("role","tree"),i.setAttribute("aria-labelledby",a),i.setAttribute("id","tree-root"),i.appendChild(function e(t,n,r,i,a,o){var l=document.createElement("li"),s=o+"-"+(i-1);l.setAttribute("role","treeitem"),l.setAttribute("data-nodetype",t.type),l.setAttribute("id",s),t.gridIndex&&(l.setAttribute("data-i",String(t.gridIndex.i)),l.setAttribute("data-j",String(t.gridIndex.j))),t.filterValue&&l.setAttribute("data-filterValue",JSON.stringify(t.filterValue));var d=document.createElement("span");if(d.textContent=S(t),l.appendChild(d),t.children.length){var c=t.children.filter((function(e){return"data"===e.type})),u=t.children.filter((function(e){return"data"!==e.type})),f=document.createElement("ul");f.setAttribute("role","group"),c.length?f.appendChild(H(c)):u.forEach((function(t,i,a){f.appendChild(e(t,n,r+1,i+1,a.length,s))})),l.appendChild(f)}return l}(r,n,1,1,0,"root")),null===(t=i.querySelector("span"))||void 0===t||t.setAttribute("id",a),i}(s),F=document.createElement("div");F.classList.add("olli-vis"),F.setAttribute("role","application"),F.appendChild(k),h.appendChild(F);var O=new d(k,n.onFocus);O.init(),document.addEventListener("keypress",(function(e){"t"!==e.key||O.currentlyTypingToken()||O.setFocusToItem(O.rootTreeItem)}));var L=document.createElement("button");L.innerText="Finish section",L.setAttribute("aria-live","polite"),L.addEventListener("click",(function(){fetch("https://docs.google.com/forms/d/e/1FAIpQLSeNGFhokzskkyxfgZz6hVHK1W-TbItjzgMsOw_LbEICNGxRAg/formResponse?usp=pp_url&entry.1882377581="+JSON.stringify(b),{mode:"no-cors",method:"GET"}).then((function(e){return L.innerText="All done, thank you"}))}));var j=document.createElement("h5");j.innerText="Finish study section",h.appendChild(j),h.appendChild(L),function(e,t){e.addEventListener("keydown",(function(e){if("Escape"===e.key){var n=document.getElementById("settings");n.setAttribute("style","display: none"),n.setAttribute("aria-hidden","true"),t.setFocusToItem(t.lastFocusedItem),b.push({action:"close",target:"settings"})}else if(e.altKey&&"ArrowLeft"===e.key){if((i=document.activeElement)&&"SELECT"===i.nodeName){var r=(a=i.parentNode).previousElementSibling;null!=r&&(a.insertAdjacentElement("afterend",r),i.focus(),i.setAttribute("aria-active","true"),x(C(N(i.id.split("-")[0]))),e.preventDefault())}}else if(e.altKey&&"ArrowRight"===e.key){var i;if((i=document.activeElement)&&"SELECT"===i.nodeName){var a,o=(a=i.parentNode).nextElementSibling;null!=o&&(a.parentNode.insertBefore(o,a),x(C(N(i.id.split("-")[0]))),e.preventDefault())}}}));var n=e.querySelector(":enabled"),r=function(e,t,n){if(n||2===arguments.length)for(var r,i=0,a=t.length;i<a;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}([],function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,a=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o}(e.querySelectorAll("select:enabled")),!1).filter((function(e){return!e.parentElement.closest('#settings > div[aria-hidden="true"]')})).reverse()[0];n.addEventListener("keydown",(function(e){"Tab"===e.key&&e.shiftKey&&(x("Beginning of settings menu"),e.preventDefault())})),r.addEventListener("keydown",(function(e){"Tab"!==e.key||e.shiftKey||(x("End of settings menu"),e.preventDefault())}))}(m,O),k.addEventListener("keydown",(function(e){if(!l(document.activeElement)){if("m"===e.key){var t=document.getElementById("settings");t.firstElementChild,t.setAttribute("style","display: block"),t.setAttribute("aria-hidden","false"),setTimeout((function(){var e;null===(e=t.querySelector(":enabled"))||void 0===e||e.focus()}),0),b.push({action:"open",target:"settings"})}if("i"===e.key){var n=document.getElementById("command-dropdown-container");n.setAttribute("style","display: block"),n.setAttribute("aria-hidden","false"),setTimeout((function(){n.firstElementChild.focus(),n.classList.add("selected")}),0),b.push({action:"open",target:"commands"})}}})),function(t,n,r){var i=t.children[1];t.addEventListener("change",(function(){x(i.selectedOptions[0].text)})),t.addEventListener("keydown",(function(a){var o,l,s,d,p=JSON.parse(localStorage.getItem("settingsData"));if("Enter"===a.key){var h=i.selectedOptions[0].value;b.push({action:"dropdown",target:"commands",value:h});try{for(var m=g(c),v=m.next();!v.done;v=m.next()){var y=v.value;if(h===y){var E=Z(r.lastFocusedItem.domNode,n);if(E.description.has(h)){var w=f[E.type];if("root"===w)x(E.description.get(h)[1]);else{var T=document.getElementById(w+"-verbosity").value,N=p[w][T].find((function(e){return e[0]===h}))[1];x(E.description.get(h)[N])}}else x("No "+y+" available")}else h==="focus-"+y&&(I.unshift(y),R(n,document.getElementById("tree-root")))}}catch(e){o={error:e}}finally{try{v&&!v.done&&(l=m.return)&&l.call(m)}finally{if(o)throw o.error}}"clear"===h&&(I.splice(0,I.length),R(n,document.getElementById("tree-root"))),u.forEach((function(e){var t,r;if("root"!==e){var i=document.getElementById(e+"-verbosity"),a=Object.keys(p[e]);try{for(var o=g(a),l=o.next();!l.done;l=o.next()){var s=l.value;if(h===e+"-"+s)return i.value=s,A(i,n),void x(i.id.split("-")[0]+" verbosity set to "+i.value)}}catch(e){t={error:e}}finally{try{l&&!l.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}}}));var k=function(t){if("string"!=typeof t)return"continue";var i=Number(Object.values(e).find((function(n){return"number"==typeof n&&e[n]===t}))),a=e[i];h===t&&x(S(Z(r.lastFocusedItem.domNode,n),a))};try{for(var C=g(Object.values(e)),F=C.next();!F.done;F=C.next())k(F.value)}catch(e){s={error:e}}finally{try{F&&!F.done&&(d=C.return)&&d.call(C)}finally{if(s)throw s.error}}}"Enter"!==a.key&&"Escape"!==a.key||(t.setAttribute("style","display: none"),t.setAttribute("aria-hidden","true"),r.setFocusToItem(r.lastFocusedItem),b.push({action:"close",target:"commands"})),"Tab"===a.key&&a.preventDefault()}))}(w,s,O),r=O,o({treesOnPage:(a().treesOnPage||[]).concat([r])}),a().keyListenerAttached||(document.addEventListener("keydown",(function(e){var t;if(!l(document.activeElement)){var n=a(),r=n.lastVisitedTree,i=n.treesOnPage;if("KeyT"===e.code){var o=r||i[0];if(null===(t=o.domNode.firstElementChild)||void 0===t?void 0:t.classList.contains("selected")){var s=i.indexOf(o);if(e.shiftKey){if(s>0){var d=i[s-1];d.setFocusToItem(d.rootTreeItem)}}else if(s<i.length-1){var c=i[s+1];c.setFocusToItem(c.rootTreeItem)}}else o.setFocusToItem(o.rootTreeItem)}}})),o({keyListenerAttached:!0}))}return h}})(),r})()));